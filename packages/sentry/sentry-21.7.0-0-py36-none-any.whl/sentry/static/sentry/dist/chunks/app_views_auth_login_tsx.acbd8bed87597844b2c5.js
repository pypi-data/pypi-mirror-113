(self.webpackChunk=self.webpackChunk||[]).push([["app_views_auth_login_tsx"],{"./app/views/auth/login.tsx":function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return le},formFooterClass:function(){return ie}}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var n,o=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),s=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),a=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),l=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),u=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),p=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),d=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),m=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),f=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),h=r("../node_modules/@babel/runtime/regenerator/index.js"),g=r.n(h),b=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/react/index.js")),v=r("./app/components/loadingError.tsx"),Z=r("./app/components/loadingIndicator.tsx"),y=r("./app/components/navTabs.tsx"),x=r("./app/locale.tsx"),_=r("./app/styles/space.tsx"),j=r("./app/utils/withApi.tsx"),k=r("../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),w=r("../node_modules/react-router/es/index.js"),S=r("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),O=r("./app/components/button.tsx"),L=r("./app/components/forms/form.tsx"),P=r("./app/components/forms/passwordField.tsx"),C=r("./app/components/forms/textField.tsx"),N=r("./app/components/links/link.tsx"),R=r("./app/icons/index.tsx"),B=r("./app/stores/configStore.tsx"),q=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var J=function(e){var t=e.vstsLoginLink,r=e.githubLoginLink,n=e.googleLoginLink;return(0,q.BX)(z,{children:[(0,q.tZ)(M,{children:(0,x.t)("External Account Login")}),n&&(0,q.tZ)(O.ZP,{align:"left",size:"small",icon:(0,q.tZ)(R.vY,{size:"xs"}),href:n,children:(0,x.t)("Sign in with Google")}),r&&(0,q.tZ)(O.ZP,{align:"left",size:"small",icon:(0,q.tZ)(R.Uv,{size:"xs"}),href:r,children:(0,x.t)("Sign in with GitHub")}),t&&(0,q.tZ)(O.ZP,{align:"left",size:"small",icon:(0,q.tZ)(R.mT,{size:"xs"}),href:t,children:(0,x.t)("Sign in with Azure DevOps")})]})};J.displayName="LoginProviders";var T=function(e){(0,c.Z)(s,e);var t,r,o=(t=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(r){var o=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,p.Z)(this,e)});function s(){var e;(0,i.Z)(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=o.call.apply(o,[this].concat(r)),(0,m.Z)((0,u.Z)(e),"state",{errorMessage:null,errors:{}}),(0,m.Z)((0,u.Z)(e),"handleSubmit",function(){var t=(0,a.Z)(g().mark((function t(r,n,o){var s,a;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.api.requestPromise("/auth/login/",{method:"POST",data:r});case 3:s=t.sent,n(r),B.Z.set("user",s.user),w.browserHistory.push({pathname:s.nextUri}),t.next=18;break;case 9:if(t.prev=9,t.t0=t.catch(0),t.t0.responseJSON&&t.t0.responseJSON.errors){t.next=14;break}return o(t.t0),t.abrupt("return");case 14:a=t.t0.responseJSON.detail,t.t0.responseJSON.errors.__all__&&(a=t.t0.responseJSON.errors.__all__),e.setState({errorMessage:a,errors:t.t0.responseJSON.errors||{}}),o(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,r,n){return t.apply(this,arguments)}}()),e}return(0,l.Z)(s,[{key:"render",value:function(){var e=this,t=this.state,r=t.errorMessage,o=t.errors,s=this.props.authConfig,a=s.githubLoginLink,i=s.vstsLoginLink,l=!(!a&&!i);return(0,q.tZ)(S.ms,{children:function(t){var s=t.css;return(0,q.BX)(D,{hasLoginProvider:l,children:[(0,q.BX)(L.Z,{submitLabel:(0,x.t)("Continue"),onSubmit:e.handleSubmit,footerClass:s(n||(n=(0,k.Z)(["\n                ","\n              "])),ie),errorMessage:r,extraButton:(0,q.tZ)(F,{to:"/account/recover/",children:(0,x.t)("Lost your password?")}),children:[(0,q.tZ)(C.Z,{name:"username",placeholder:(0,x.t)("username or email"),label:(0,x.t)("Account"),error:o.username,required:!0}),(0,q.tZ)(P.Z,{name:"password",placeholder:(0,x.t)("password"),label:(0,x.t)("Password"),error:o.password,required:!0})]}),l&&(0,q.tZ)(J,{vstsLoginLink:i,githubLoginLink:a})]})}})}}]),s}(b.Component);T.displayName="LoginForm";var A,D=(0,f.Z)("div",{target:"e1f436793"})("display:grid;grid-gap:60px;grid-template-columns:",(function(e){return e.hasLoginProvider?"1fr 0.8fr":"1fr"}),";"),M=(0,f.Z)("div",{target:"e1f436792"})({name:"1u5acre",styles:"margin:0;font-size:15px;font-weight:bold;line-height:24px"}),z=(0,f.Z)("div",{target:"e1f436791"})("position:relative;display:grid;grid-auto-rows:max-content;grid-gap:",(0,_.Z)(1.5),";&:before{position:absolute;display:block;content:'';top:0;bottom:0;left:-30px;border-left:1px solid ",(function(e){return e.theme.border}),";}"),F=(0,f.Z)(N.Z,{target:"e1f436790"})("color:",(function(e){return e.theme.gray300}),";&:hover{color:",(function(e){return e.theme.textColor}),";}"),X=T,E=(r("../node_modules/core-js/modules/es.function.name.js"),r("./app/components/forms/radioBooleanField.tsx")),I=r("./app/components/links/externalLink.tsx");var H=function(){return(0,q.tZ)(E.Z,{name:"subscribe",yesLabel:(0,x.t)("Yes, I would like to receive updates via email"),noLabel:(0,x.t)("No, I'd prefer not to receive these updates"),help:(0,x._N)("We'd love to keep you updated via email with product and feature\n           announcements, promotions, educational materials, and events. Our\n           updates focus on relevant information, and we'll never sell your data\n           to third parties. See our [link] for more details.",{link:(0,q.tZ)("a",{href:"https://sentry.io/privacy/",children:"Privacy Policy"})})})};H.displayName="SubscribeField";var U=function(e){(0,c.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(r){var o=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,p.Z)(this,e)});function o(){var e;(0,i.Z)(this,o);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=n.call.apply(n,[this].concat(r)),(0,m.Z)((0,u.Z)(e),"state",{errorMessage:null,errors:{}}),(0,m.Z)((0,u.Z)(e),"handleSubmit",function(){var t=(0,a.Z)(g().mark((function t(r,n,o){var s,a,i;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.props.api,t.prev=1,t.next=4,s.requestPromise("/auth/register/",{method:"POST",data:r});case 4:a=t.sent,n(r),B.Z.set("user",a.user),w.browserHistory.push({pathname:a.nextUri}),t.next=19;break;case 10:if(t.prev=10,t.t0=t.catch(1),t.t0.responseJSON&&t.t0.responseJSON.errors){t.next=15;break}return o(t.t0),t.abrupt("return");case 15:i=t.t0.responseJSON.detail,t.t0.responseJSON.errors.__all__&&(i=t.t0.responseJSON.errors.__all__),e.setState({errorMessage:i,errors:t.t0.responseJSON.errors||{}}),o(t.t0);case 19:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,r,n){return t.apply(this,arguments)}}()),e}return(0,l.Z)(o,[{key:"render",value:function(){var e=this,t=this.props.authConfig.hasNewsletter,r=this.state,n=r.errorMessage,o=r.errors;return(0,q.tZ)(S.ms,{children:function(r){var s=r.css;return(0,q.BX)(L.Z,{initialData:{subscribe:!0},submitLabel:(0,x.t)("Continue"),onSubmit:e.handleSubmit,footerClass:s(A||(A=(0,k.Z)(["\n              ","\n            "])),ie),errorMessage:n,extraButton:(0,q.tZ)(G,{href:"https://sentry.io/privacy/",children:(0,x.t)("Privacy Policy")}),children:[(0,q.tZ)(C.Z,{name:"name",placeholder:(0,x.t)("Jane Bloggs"),label:(0,x.t)("Name"),error:o.name,required:!0}),(0,q.tZ)(C.Z,{name:"username",placeholder:(0,x.t)("you@example.com"),label:(0,x.t)("Email"),error:o.username,required:!0}),(0,q.tZ)(P.Z,{name:"password",placeholder:(0,x.t)("something super secret"),label:(0,x.t)("Password"),error:o.password,required:!0}),t&&(0,q.tZ)(H,{})]})}})}}]),o}(b.Component);U.displayName="RegisterForm";var G=(0,f.Z)(I.Z,{target:"e138ohel0"})("color:",(function(e){return e.theme.gray300}),";&:hover{color:",(function(e){return e.theme.textColor}),";}"),Y=U;var W=function(e){(0,c.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(r){var o=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,p.Z)(this,e)});function o(){var e;(0,i.Z)(this,o);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=n.call.apply(n,[this].concat(r)),(0,m.Z)((0,u.Z)(e),"state",{errorMessage:null}),(0,m.Z)((0,u.Z)(e),"handleSubmit",function(){var t=(0,a.Z)(g().mark((function t(r,n,o){var s,a,i;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.props.api,t.prev=1,t.next=4,s.requestPromise("/auth/sso-locate/",{method:"POST",data:r});case 4:a=t.sent,n(r),w.browserHistory.push({pathname:a.nextUri}),t.next=17;break;case 9:if(t.prev=9,t.t0=t.catch(1),t.t0.responseJSON){t.next=14;break}return o(t.t0),t.abrupt("return");case 14:i=t.t0.responseJSON.detail,e.setState({errorMessage:i}),o(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,r,n){return t.apply(this,arguments)}}()),e}return(0,l.Z)(o,[{key:"render",value:function(){var e=this.props.authConfig.serverHostname,t=this.state.errorMessage;return(0,q.tZ)(L.Z,{className:"form-stacked",submitLabel:(0,x.t)("Continue"),onSubmit:this.handleSubmit,footerClass:"auth-footer",errorMessage:t,children:(0,q.tZ)(C.Z,{name:"organization",placeholder:"acme",label:(0,x.t)("Organization ID"),required:!0,help:(0,x._N)("Your ID is the slug after the hostname. e.g. [example] is [slug].",{slug:(0,q.tZ)("strong",{children:"acme"}),example:(0,q.tZ)(K,{slug:"acme",hostname:e})})})})}}]),o}(b.Component);W.displayName="SsoForm";var K=function(e){var t=e.hostname,r=e.slug;return(0,q.BX)("code",{children:[t,"/",(0,q.tZ)("strong",{children:r})]})};K.displayName="SlugExample";var Q=["vsts_login_link","github_login_link","google_login_link"];function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){(0,m.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ee={login:X,register:Y,sso:W},te=function(e){(0,c.Z)(f,e);var t,r,n=(t=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(r){var o=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,p.Z)(this,e)});function f(){var e;(0,i.Z)(this,f);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=n.call.apply(n,[this].concat(r)),(0,m.Z)((0,u.Z)(e),"state",{loading:!0,error:null,activeTab:"login",authConfig:null}),(0,m.Z)((0,u.Z)(e),"handleSetTab",(function(t,r){e.setState({activeTab:t}),r.preventDefault()})),(0,m.Z)((0,u.Z)(e),"fetchData",(0,a.Z)(g().mark((function t(){var r,n,o,a,i,l,u;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.api,t.prev=1,t.next=4,r.requestPromise("/auth/config/");case 4:n=t.sent,o=n.vsts_login_link,a=n.github_login_link,i=n.google_login_link,l=(0,s.Z)(n,Q),u=$($({},l),{},{vstsLoginLink:o,githubLoginLink:a,googleLoginLink:i}),e.setState({authConfig:u}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.setState({error:!0});case 13:e.setState({loading:!1});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))),e}return(0,l.Z)(f,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"hasAuthProviders",get:function(){if(null===this.state.authConfig)return!1;var e=this.state.authConfig,t=e.githubLoginLink,r=e.googleLoginLink,n=e.vstsLoginLink;return!!(t||n||r)}},{key:"render",value:function(){var e=this,t=this.props.api,r=this.state,n=r.loading,s=r.error,a=r.activeTab,i=r.authConfig,l=ee[a],u=[["login",(0,x.t)("Login")],["sso",(0,x.t)("Single Sign-On")],["register",(0,x.t)("Register"),!(null!=i&&i.canRegister)]];return(0,q.BX)(b.Fragment,{children:[(0,q.BX)(ne,{children:[(0,q.tZ)(oe,{children:(0,x.t)("Sign in to continue")}),(0,q.tZ)(se,{children:u.map((function(t){var r=(0,o.Z)(t,3),n=r[0],s=r[1];return!r[2]&&(0,q.tZ)("li",{className:a===n?"active":"",children:(0,q.tZ)("a",{href:"#",onClick:function(t){return e.handleSetTab(n,t)},children:s})},n)}))})]}),n&&(0,q.tZ)(Z.Z,{}),s&&(0,q.tZ)(re,{message:(0,x.t)("Unable to load authentication configuration"),onRetry:this.fetchData}),!n&&null!==i&&!s&&(0,q.tZ)(ae,{hasAuthProviders:this.hasAuthProviders,children:(0,q.tZ)(l,{api:t,authConfig:i})})]})}}]),f}(b.Component);te.displayName="Login";var re=(0,f.Z)(v.Z,{target:"e1omfq4b4"})("margin:",(0,_.Z)(2),";"),ne=(0,f.Z)("div",{target:"e1omfq4b3"})("border-bottom:1px solid ",(function(e){return e.theme.border}),";padding:20px 40px 0;"),oe=(0,f.Z)("h3",{target:"e1omfq4b2"})({name:"cqisp1",styles:"font-size:24px;margin:0 0 20px 0"}),se=(0,f.Z)(y.Z,{target:"e1omfq4b1"})({name:"ti75j2",styles:"margin:0"}),ae=(0,f.Z)("div",{target:"e1omfq4b0"})("padding:35px;width:",(function(e){return e.hasAuthProviders?"600px":"490px"}),";"),ie="\n  display: grid;\n  grid-template-columns: max-content 1fr;\n  grid-gap: ".concat((0,_.Z)(1),";\n  align-items: center;\n  justify-items: end;\n  border-top: none;\n  margin-bottom: 0;\n  padding: 0;\n"),le=(0,j.Z)(te)}}]);
//# sourceMappingURL=../sourcemaps/app_views_auth_login_tsx.b6c48e6ffbf980acb101dd3bf3bb04dc.js.map