(self.webpackChunk=self.webpackChunk||[]).push([["app_views_alerts_list_index_tsx"],{"./app/components/onboardingPanel.tsx":function(e,t,r){"use strict";var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/react/index.js"),r("./app/components/panels/index.tsx")),o=r("./app/styles/space.tsx"),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){var t=e.className,r=e.image,n=e.children;return(0,a.tZ)(s.s_,{className:t,children:(0,a.BX)(l,{children:[(0,a.tZ)(d,{children:r}),(0,a.tZ)(u,{children:n})]})})}i.displayName="OnboardingPanel";var l=(0,n.Z)("div",{target:"e19tujos2"})("padding:",(0,o.Z)(3),";position:relative;@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width: ",(function(e){return e.theme.breakpoints[1]}),"){min-height:350px;}"),u=(0,n.Z)("div",{target:"e19tujos1"})("z-index:1;@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){flex:2;}"),d=(0,n.Z)(u,{target:"e19tujos0"})("position:relative;min-height:100px;max-width:300px;margin:",(0,o.Z)(2)," auto;@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){flex:1;margin:",(0,o.Z)(3),";max-width:auto;}");t.Z=i},"./app/views/alerts/list/index.tsx":function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ue}}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var n=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),s=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),o=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),a=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),l=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),u=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),d=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),p=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),m=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),h=r("../node_modules/@babel/runtime/regenerator/index.js"),g=r.n(h),f=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.set.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.from.js"),r("../node_modules/react/index.js")),y=r("../node_modules/lodash/flatten.js"),b=r.n(y),j=r("./app/actionCreators/prompts.tsx"),Z=r("./app/components/acl/feature.tsx"),v=r("./app/components/alert.tsx"),x=r("./app/components/asyncComponent.tsx"),w=r("./app/components/button.tsx"),_=r("./app/components/createAlertButton.tsx"),k=r("./app/components/layouts/thirds.tsx"),z=r("./app/components/links/externalLink.tsx"),S=r("./app/components/organizations/globalSelectionHeader/index.tsx"),O=r("./app/components/pagination/index.tsx"),P=r("./app/components/panels/index.tsx"),A=r("./app/components/searchBar.tsx"),L=r("./app/components/sentryDocumentTitle.tsx"),B=r("./app/icons/index.tsx"),q=r("./app/locale.tsx"),C=r("./app/styles/space.tsx"),R=r("./app/utils/analytics.tsx"),T=r("./app/utils/projects.tsx"),N=r("./app/utils/withOrganization.tsx"),X=r("./app/utils/withTeams.tsx"),D=r("./app/views/alerts/rules/teamFilter.tsx"),I=r("./app/views/alerts/list/header.tsx"),F=r("./images/spot/alerts-empty-state.svg"),V=r("./app/components/buttonBar.tsx"),E=r("./app/components/onboardingPanel.tsx"),M=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Q(e){var t=e.actions;return(0,M.BX)(E.Z,{image:(0,M.tZ)(W,{src:F}),children:[(0,M.tZ)("h3",{children:(0,q.t)("More signal, less noise")}),(0,M.tZ)("p",{children:(0,q.t)("Not every error is worth an email. Set your own rules for alerts you need, with information that helps.")}),(0,M.tZ)(G,{gap:1,children:t})]})}Q.displayName="Onboarding";var W=(0,m.Z)("img",{target:"evp2sp81"})("@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){user-select:none;position:absolute;top:0;bottom:0;width:220px;margin-top:auto;margin-bottom:auto;transform:translateX(-50%);left:50%;}@media (min-width: ",(function(e){return e.theme.breakpoints[2]}),"){transform:translateX(-60%);width:280px;}@media (min-width: ",(function(e){return e.theme.breakpoints[3]}),"){transform:translateX(-75%);width:320px;}"),G=(0,m.Z)(V.ZP,{target:"evp2sp80"})({name:"vpj881",styles:"grid-template-columns:repeat(auto-fit, minmax(130px, max-content))"}),K=Q,U=r("./app/views/alerts/list/row.tsx"),H=["cursor","page"],Y=["cursor","page"];function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.Z)(e);if(t){var s=(0,c.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,d.Z)(this,r)}}var te="https://docs.sentry.io/workflow/alerts-notifications/alerts/?_ga=2.21848383.580096147.1592364314-1444595810.1582160976",re=function(e){(0,u.Z)(d,e);var t,r=ee(d);function d(){var e;(0,a.Z)(this,d);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),(0,p.Z)((0,l.Z)(e),"handleChangeSearch",(function(t){var r=e.props,n=r.router,s=r.location,a=s.query,i=(a.cursor,a.page,(0,o.Z)(a,H));n.push({pathname:s.pathname,query:$($({},i),{},{title:t})})})),(0,p.Z)((0,l.Z)(e),"handleChangeFilter",(function(t,r){var n=e.props,a=n.router,i=n.location,l=i.query,u=(l.cursor,l.page,(0,o.Z)(l,Y)),d=u.team;"teams"===t&&(d=r.size?(0,s.Z)(r):"");var c=u.status;"status"===t&&(c=r.size?(0,s.Z)(r):""),a.push({pathname:i.pathname,query:$($({},u),{},{status:c,team:0===d.length?"":d})})})),e}return(0,i.Z)(d,[{key:"getEndpoints",value:function(){var e=this.props,t=e.params,r=e.location,n=e.organization,s=r.query,o=this.getQueryStatus(s.status);return 1===o.length&&(s.status=o),s.team=(0,D.L)(s.team),n.features.includes("alert-details-redesign")&&(s.expand=["original_alert_rule"]),[["incidentList","/organizations/".concat(null==t?void 0:t.orgId,"/incidents/"),{query:s}]]}},{key:"getQueryStatus",value:function(e){return Array.isArray(e)?e:""===e?[]:["open","closed"].includes(e)?[e]:[]}},{key:"onLoadAllEndpointsSuccess",value:(t=(0,n.Z)(g().mark((function e(){var t,r,n,s,o,a,i,l,u;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.state.incidentList)&&0===t.length){e.next=4;break}return this.setState({hasAlertRule:!0,firstVisitShown:!1}),e.abrupt("return");case 4:return this.setState({loading:!0}),r=this.props,n=r.params,s=r.location,o=r.organization,e.next=8,this.api.requestPromise("/organizations/".concat(null==n?void 0:n.orgId,"/alert-rules/"),{method:"GET",query:s.query});case 8:if(a=e.sent,!(i=a.length>0)){e.next=13;break}return this.setState({hasAlertRule:i,firstVisitShown:!1,loading:!1}),e.abrupt("return");case 13:return e.next=15,(0,j.v)(this.api,{organizationId:o.id,feature:"alert_stream"});case 15:l=e.sent,(u=!(null!=l&&l.dismissedTime))&&(0,j.X)(this.api,{feature:"alert_stream",organizationId:o.id,status:"dismissed"}),this.setState({hasAlertRule:i,firstVisitShown:u,loading:!1});case 19:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"renderFilterBar",value:function(){var e,t=this.props,r=t.teams,n=t.location,s=new Set((0,D.L)(n.query.team)),o=new Set(this.getQueryStatus(n.query.status));return(0,M.BX)(oe,{children:[(0,M.tZ)(D.Z,{showStatus:!0,teams:r,selectedStatus:o,selectedTeams:s,handleChangeFilter:this.handleChangeFilter}),(0,M.tZ)(ae,{placeholder:(0,q.t)("Search by name"),query:null===(e=n.query)||void 0===e?void 0:e.name,onSearch:this.handleChangeSearch})]})}},{key:"tryRenderOnboarding",value:function(){var e=this.state.firstVisitShown,t=this.props.organization;if(!e)return null;var r=(0,M.BX)(f.Fragment,{children:[(0,M.tZ)(w.ZP,{size:"small",external:!0,href:te,children:(0,q.t)("View Features")}),(0,M.tZ)(_.Z,{organization:t,iconProps:{size:"xs"},size:"small",priority:"primary",referrer:"alert_stream",children:(0,q.t)("Create Alert Rule")})]});return(0,M.tZ)(K,{actions:r})}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderList",value:function(){var e,t=this.state,r=t.loading,n=t.incidentList,s=t.incidentListPageLinks,o=t.hasAlertRule,a=this.props,i=a.params.orgId,l=a.organization,u=new Set(b()(null==n?void 0:n.map((function(e){return e.projects})))),d=!(!n||0!==n.length||void 0!==o),c=r||d;return(0,M.BX)(f.Fragment,{children:[null!==(e=this.tryRenderOnboarding())&&void 0!==e?e:(0,M.tZ)(P.KB,{isLoading:c,isEmpty:0===(null==n?void 0:n.length),emptyMessage:(0,q.t)("No incidents exist for the current query."),emptyAction:(0,M.tZ)(le,{children:(0,q._N)("Learn more about [link:Metric Alerts]",{link:(0,M.tZ)(z.Z,{href:te})})}),headers:[(0,q.t)("Alert Rule"),(0,q.t)("Triggered"),(0,q.t)("Duration"),(0,q.t)("Project"),(0,q.t)("Alert ID"),(0,q.t)("Team")],children:(0,M.tZ)(T.Z,{orgId:i,slugs:Array.from(u),children:function(e){var t=e.initiallyLoaded,r=e.projects;return n.map((function(e){return(0,M.tZ)(U.Z,{projectsLoaded:t,projects:r,incident:e,orgId:i,organization:l},e.id)}))}})}),(0,M.tZ)(O.Z,{pageLinks:s})]})}},{key:"renderBody",value:function(){var e=this.props,t=e.params,r=e.organization,n=e.router,s=t.orgId;return(0,M.tZ)(L.Z,{title:(0,q.t)("Alerts"),orgSlug:s,children:(0,M.BX)(S.Z,{organization:r,showDateSelector:!1,children:[(0,M.tZ)(I.Z,{organization:r,router:n,activeTab:"stream"}),(0,M.tZ)(ie,{children:(0,M.BX)(k.or,{fullWidth:!0,children:[!this.tryRenderOnboarding()&&(0,M.BX)(f.Fragment,{children:[(0,M.tZ)(Z.Z,{features:["alert-details-redesign"],organization:r,children:(0,M.tZ)(se,{icon:(0,M.tZ)(B.aU,{}),children:(0,q.t)("This page only shows metric alerts.")})}),this.renderFilterBar()]}),this.renderList()]})})]})})}}]),d}(x.Z),ne=function(e){(0,u.Z)(r,e);var t=ee(r);function r(){return(0,a.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){this.trackView()}},{key:"componentDidUpdate",value:function(e){var t,r;(null===(t=e.location.query)||void 0===t?void 0:t.status)!==(null===(r=this.props.location.query)||void 0===r?void 0:r.status)&&this.trackView()}},{key:"trackView",value:function(){var e=this.props.organization;(0,R.ec)({eventKey:"alert_stream.viewed",eventName:"Alert Stream: Viewed",organization_id:e.id})}},{key:"renderNoAccess",value:function(){return(0,M.tZ)(k.uT,{children:(0,M.tZ)(k.or,{fullWidth:!0,children:(0,M.tZ)(v.Z,{type:"warning",children:(0,q.t)("You don't have access to this feature")})})})}},{key:"render",value:function(){var e=this.props.organization;return(0,M.tZ)(Z.Z,{features:["organizations:incidents"],organization:e,hookName:"feature-disabled:alerts-page",renderDisabled:this.renderNoAccess,children:(0,M.tZ)(re,$({},this.props))})}}]),r}(f.Component);ne.displayName="IncidentsListContainer";var se=(0,m.Z)(v.Z,{target:"e12ryirh4"})("margin-bottom:",(0,C.Z)(1.5),";"),oe=(0,m.Z)("div",{target:"e12ryirh3"})("display:flex;margin-bottom:",(0,C.Z)(1.5),";"),ae=(0,m.Z)(A.Z,{target:"e12ryirh2"})("flex-grow:1;margin-left:",(0,C.Z)(1.5),";"),ie=(0,m.Z)(k.uT,{target:"e12ryirh1"})({name:"108qp7n",styles:"margin-bottom:-20px"}),le=(0,m.Z)("p",{target:"e12ryirh0"})("font-size:",(function(e){return e.theme.fontSizeLarge}),";"),ue=(0,N.Z)((0,X.Z)(ne))},"./images/spot/alerts-empty-state.svg":function(e,t,r){"use strict";e.exports=r.p+"assets/alerts-empty-state.4d03bc7c2675b8facd23.svg"}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_list_index_tsx.37639cbca67bdbc3ab4549a05268ee62.js.map