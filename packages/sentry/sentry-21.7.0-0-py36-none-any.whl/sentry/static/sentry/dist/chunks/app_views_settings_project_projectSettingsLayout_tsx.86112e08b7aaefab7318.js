(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_project_projectSettingsLayout_tsx"],{"./app/components/projects/appStoreConnectContext/index.tsx":function(e,t,r){"use strict";r.d(t,{zt:function(){return f}}),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),s=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=r("../node_modules/@babel/runtime/regenerator/index.js"),c=r.n(i),a=(r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/react/index.js")),u=r("./app/utils/withApi.tsx"),p=r("./app/components/projects/appStoreConnectContext/utils.tsx"),l=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=(0,a.createContext)(void 0),f=(0,u.Z)((function(e){var t,r=e.api,o=e.children,i=e.project,u=e.organization,d=(0,a.useState)(),f=(0,s.Z)(d,2),h=f[0],b=f[1],g=(0,a.useState)(void 0),y=(0,s.Z)(g,2),v=y[0],x=y[1],O=u.slug,S=!(null===(t=u.features)||void 0===t||!t.includes("app-store-connect"));function _(){return(_=(0,n.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S&&i&&!h){e.next=2;break}return e.abrupt("return");case 2:if(!i.symbolSources){e.next=5;break}return b(i),e.abrupt("return");case 5:return e.prev=5,e.next=8,r.requestPromise("/projects/".concat(O,"/").concat(i.slug,"/"));case 8:t=e.sent,b(t),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(5);case 14:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}function w(e){var t;return null===(t=(e?JSON.parse(e):[]).find((function(e){return"appstoreconnect"===e.type.toLowerCase()})))||void 0===t?void 0:t.id}function P(){return(P=(0,n.Z)(c().mark((function e(){var t,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return");case 2:if(t=w(h.symbolSources)){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,r.requestPromise("/projects/".concat(O,"/").concat(h.slug,"/appstoreconnect/validate/").concat(t,"/"));case 8:o=e.sent,x(j({id:t},o)),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(5);case 14:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}return(0,a.useEffect)((function(){!function(){_.apply(this,arguments)}()}),[i]),(0,a.useEffect)((function(){!function(){P.apply(this,arguments)}()}),[h]),(0,l.tZ)(m.Provider,{value:v?j(j({},v),{},{updateAlertMessage:(0,p.t)(v)}):void 0,children:o})}));m.Consumer,t.ZP=m},"./app/components/projects/appStoreConnectContext/utils.tsx":function(e,t,r){"use strict";r.d(t,{R:function(){return i},t:function(){return c}});var o=r("../node_modules/moment/moment.js"),n=r.n(o),s=r("./app/locale.tsx"),i={iTunesSessionInvalid:(0,s.t)("The iTunes session of your configured App Store Connect has expired."),appStoreCredentialsInvalid:(0,s.t)("The credentials of your configured App Store Connect are invalid."),isTodayAfterItunesSessionRefreshAt:(0,s.t)("The iTunes session of your configured App Store Connect will likely expire soon.")};function c(e){if(!1===e.itunesSessionValid)return i.iTunesSessionInvalid;if(!1===e.appstoreCredentialsValid)return i.appStoreCredentialsInvalid;var t=e.itunesSessionRefreshAt;return t&&n()().isAfter(n()(t))?i.isTodayAfterItunesSessionRefreshAt:void 0}},"./app/views/settings/project/projectSettingsLayout.tsx":function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return q}}),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var o,n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=r("../node_modules/react/index.js"),c=r("./app/components/projects/appStoreConnectContext/index.tsx"),a=r("./app/utils/withOrganization.tsx"),u=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),p=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),l=r("../node_modules/@babel/runtime/regenerator/index.js"),d=r.n(l),j=(r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/react-document-title/index.js")),m=r.n(j),f=r("../node_modules/create-react-class/index.js"),h=r.n(f),b=r("../node_modules/reflux/src/index.js"),g=r.n(b),y=r("./app/actionCreators/members.tsx"),v=r("./app/actionCreators/projects.tsx"),x=r("./app/components/loadingError.tsx"),O=r("./app/components/loadingIndicator.tsx"),S=r("./app/components/projects/missingProjectMembership.tsx"),_=r("./app/locale.tsx"),w=r("./app/sentryTypes.tsx"),P=r("./app/stores/memberListStore.tsx"),Z=r("./app/stores/projectsStore.tsx"),C=r("./app/styles/space.tsx"),T=r("./app/utils/withApi.tsx"),I=r("./app/utils/withProjects.tsx"),N=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.MISSING_MEMBERSHIP="MISSING_MEMBERSHIP",e.PROJECT_NOT_FOUND="PROJECT_NOT_FOUND",e.UNKNOWN="UNKNOWN"}(o||(o={}));var D=h()({displayName:"ProjectContext",childContextTypes:{project:w.Z.Project},mixins:[g().connect(P.Z,"memberList"),g().listenTo(Z.Z,"onProjectChange")],getInitialState:function(){return{loading:!0,error:!1,errorType:null,memberList:[],project:null}},getChildContext:function(){return{project:this.state.project}},componentWillMount:function(){this.fetchData()},componentWillReceiveProps:function(e){e.projectId!==this.props.projectId&&(e.skipReload||this.remountComponent())},componentDidUpdate:function(e,t){if(e.projectId!==this.props.projectId&&this.fetchData(),e.projects.length!==this.props.projects.length&&this.fetchData(),t.project!==this.state.project){if(!this.docTitle)return;var r=this.docTitleRef.docTitle;r&&r.forceUpdate()}},remountComponent:function(){this.setState(this.getInitialState())},getTitle:function(){var e,t;return null!==(e=null===(t=this.state.project)||void 0===t?void 0:t.slug)&&void 0!==e?e:"Sentry"},onProjectChange:function(e){this.state.project&&e.has(this.state.project.id)&&this.setState({project:E({},Z.Z.getById(this.state.project.id))})},identifyProject:function(){var e=this.props,t=e.projects,r=e.projectId;return t.find((function(e){return e.slug===r}))||null},fetchData:function(){var e=this;return(0,u.Z)(d().mark((function t(){var r,n,s,i,c,a,u,p;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,n=r.orgId,s=r.projectId,i=r.skipReload,c=e.identifyProject(),a=c&&c.hasAccess,e.setState((function(e){return{loading:!i||e.loading,project:c}})),!c||!a){t.next=20;break}return(0,v.pK)(null),u=e.props.api.requestPromise("/projects/".concat(n,"/").concat(s,"/")),t.prev=7,t.next=10,u;case 10:p=t.sent,e.setState({loading:!1,project:p,error:!1,errorType:null}),(0,v.pK)(p),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),e.setState({loading:!1,error:!1,errorType:o.UNKNOWN});case 18:return(0,y.MA)(e.props.api,n,c.id),t.abrupt("return");case 20:if(!c||c.isMember){t.next=23;break}return e.setState({loading:!1,error:!0,errorType:o.MISSING_MEMBERSHIP}),t.abrupt("return");case 23:return t.prev=23,t.next=26,e.props.api.requestPromise("/projects/".concat(n,"/").concat(s,"/"));case 26:t.next=31;break;case 28:t.prev=28,t.t1=t.catch(23),e.setState({loading:!1,error:!0,errorType:o.PROJECT_NOT_FOUND});case 31:case"end":return t.stop()}}),t,null,[[7,15],[23,28]])})))()},renderBody:function(){if(this.state.loading)return(0,N.tZ)("div",{className:"loading-full-layout",children:(0,N.tZ)(O.Z,{})});if(!this.state.error){var e=this.props.children;return"function"==typeof e?e({project:this.state.project}):e}switch(this.state.errorType){case o.PROJECT_NOT_FOUND:return(0,N.tZ)("div",{className:"container",children:(0,N.tZ)("div",{className:"alert alert-block",style:{margin:"30px 0 10px"},children:(0,_.t)("The project you were looking for was not found.")})});case o.MISSING_MEMBERSHIP:return(0,N.tZ)(M,{children:(0,N.tZ)(S.Z,{organization:this.props.organization,projectSlug:this.state.project.slug})});default:return(0,N.tZ)(x.Z,{onRetry:this.remountComponent})}},render:function(){var e=this;return(0,N.tZ)(m(),{ref:function(t){return e.docTitleRef=t},title:this.getTitle(),children:this.renderBody()})}}),R=(0,T.Z)((0,a.Z)((0,I.Z)(D))),M=(0,p.Z)("div",{target:"e1ekcf660"})("width:100%;margin:",(0,C.Z)(2)," ",(0,C.Z)(4),";"),A=r("./app/views/settings/components/settingsLayout.tsx"),z=(r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.set.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./app/utils/withProject.tsx")),U=r("./app/views/settings/components/settingsNavigation.tsx"),L=r("./app/views/settings/project/navigationConfiguration.tsx"),B=function(e){var t=e.organization,r=e.project,o=(0,i.useContext)(c.ZP),n=!(null==o||!o.updateAlertMessage);return(0,N.tZ)(U.Z,{navigationObjects:(0,L.Z)({project:r,organization:t,debugFilesNeedsReview:n}),access:new Set(t.access),features:new Set(t.features),organization:t,project:r})};B.displayName="ProjectSettingsNavigation";var G=(0,z.Z)(B),W=["params","organization","children","routes"];function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e){var t=e.params,r=e.organization,o=e.children,n=e.routes,a=(0,s.Z)(e,W),u=t.orgId,p=t.projectId;return(0,N.tZ)(R,{orgId:u,projectId:p,children:function(e){var s=e.project;return(0,N.tZ)(c.zt,{project:s,organization:r,children:(0,N.tZ)(A.Z,J(J({params:t,routes:n},a),{},{renderNavigation:function(){return(0,N.tZ)(G,{organization:r})},children:o&&i.isValidElement(o)?i.cloneElement(o,{organization:r}):o}))})}})}K.displayName="ProjectSettingsLayout";var q=(0,a.Z)(K)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_projectSettingsLayout_tsx.abfe3fc674751244e9026f0be77f4fd2.js.map