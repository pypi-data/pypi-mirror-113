(self.webpackChunk=self.webpackChunk||[]).push([["app_components_events_searchBar_tsx-app_views_eventsV2_table_queryField_tsx"],{"./app/components/events/searchBar.tsx":function(e,t,n){"use strict";n("../node_modules/core-js/modules/es.reflect.construct.js"),n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var r,o=n("../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),s=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),u=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=(n("../node_modules/core-js/modules/es.regexp.constructor.js"),n("../node_modules/core-js/modules/es.regexp.exec.js"),n("../node_modules/core-js/modules/es.regexp.to-string.js"),n("../node_modules/core-js/modules/es.array.concat.js"),n("../node_modules/core-js/modules/es.array.map.js"),n("../node_modules/core-js/modules/es.object.to-string.js"),n("../node_modules/core-js/modules/es.promise.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.function.name.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/core-js/modules/es.array.iterator.js"),n("../node_modules/core-js/modules/es.object.from-entries.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.string.includes.js"),n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.object.assign.js"),n("../node_modules/react/index.js")),m=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),f=n("../node_modules/lodash/assign.js"),h=n.n(f),b=n("../node_modules/lodash/flatten.js"),j=n.n(b),g=n("../node_modules/lodash/isEqual.js"),v=n.n(g),y=n("../node_modules/lodash/memoize.js"),Z=n.n(y),O=n("../node_modules/lodash/omit.js"),w=n.n(O),k=n("./app/actionCreators/tags.tsx"),_=n("./app/components/smartSearchBar/index.tsx"),x=n("./app/constants/index.tsx"),S=n("./app/types/index.tsx"),C=n("./app/utils.tsx"),P=n("./app/utils/discover/fields.tsx"),T=n("./app/utils/measurements/measurements.tsx"),E=n("./app/utils/withApi.tsx"),F=n("./app/utils/withTags.tsx"),D=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=new RegExp("^".concat(x.c$,"|\\").concat(x.ir),"g"),N=function(e){(0,u.Z)(f,e);var t,n,p=(t=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var o=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function f(){var e;(0,s.Z)(this,f);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=p.call.apply(p,[this].concat(n)),(0,d.Z)((0,a.Z)(e),"getEventFieldValues",Z()((function(t,n,r){var o=e.props,s=o.api,i=o.organization,a=o.projectIds,u=null==a?void 0:a.map(String);return(0,P.h1)(t.key)||(0,P.Xr)(t.key)?Promise.resolve([]):(0,k.Fo)(s,i.slug,t.key,n,u,r,!0).then((function(e){return j()(e.filter((function(e){var t=e.name;return(0,C.ri)(t)})).map((function(e){return e.name})))}),(function(){throw new Error("Unable to fetch event field values")}))}),(function(e,t){var n=e.key;return"".concat(n,"-").concat(t)}))),(0,d.Z)((0,a.Z)(e),"prepareQuery",(function(e){return e.replace(A,"")})),e}return(0,i.Z)(f,[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.getEventFieldValues.cache).clear)||void 0===e||e.call(t)}},{key:"componentDidUpdate",value:function(e){var t,n;v()(this.props.projectIds,e.projectIds)||null===(t=(n=this.getEventFieldValues.cache).clear)||void 0===t||t.call(n)}},{key:"getTagList",value:function(e){var t=this.props,n=t.fields,r=t.organization,o=t.tags,s=t.omitTags,i=n?Object.fromEntries(n.filter((function(e){return!Object.keys(P.wZ).includes(e.field)&&!(0,P.GO)(e.field)})).map((function(e){return[e.field,{key:e.field,name:e.field}]}))):{},a=r.features.includes("performance-view")?Object.assign({},e,P.wZ,i):w()(P.wZ,P.J8),u=r.features.includes("semver")?Object.assign({},P.jg,a):a,l=h()({},o,u);return l.has={key:"has",name:"Has property",values:Object.keys(l),predefined:!0},w()(l,null!=s?s:[])}},{key:"render",value:function(){var e=this,t=this.props.organization;return(0,D.tZ)(T.Z,{organization:t,children:function(t){var n=t.measurements,s=e.getTagList(n);return(0,D.tZ)(m.ms,{children:function(t){var n=t.css;return(0,D.tZ)(_.Z,R(R({},e.props),{},{hasRecentSearches:!0,savedSearchType:S.L4.EVENT,onGetTagValues:e.getEventFieldValues,supportedTags:s,prepareQuery:e.prepareQuery,excludeEnvironment:!0,dropdownClassName:n(r||(r=(0,o.Z)(["\n                    max-height: 300px;\n                    overflow-y: auto;\n                  "])))}))}})}})}}]),f}(p.PureComponent);N.displayName="SearchBar",t.Z=(0,E.Z)((0,F.Z)(N))},"./app/utils/measurements/measurements.tsx":function(e,t,n){"use strict";var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),s=(n("../node_modules/core-js/modules/es.array.iterator.js"),n("../node_modules/core-js/modules/es.object.from-entries.js"),n("../node_modules/core-js/modules/es.array.map.js"),n("../node_modules/core-js/modules/es.object.entries.js"),n("../node_modules/core-js/modules/es.function.name.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.string.includes.js"),n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),n("../node_modules/react/index.js")),i=n("./app/utils/performance/vitals/constants.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=(0,o.Z)(e,2),n=t[0];return[n,{name:t[1].name,key:n}]})))}var d=c(i.T),p=c(i.r);function m(e){var t=e.organization,n=e.children,r=t.features.includes("performance-mobile-vitals")?l(l({},p),d):p;return(0,a.tZ)(s.Fragment,{children:n({measurements:r})})}m.displayName="Measurements",t.Z=m},"./app/utils/withTags.tsx":function(e,t,n){"use strict";n("../node_modules/core-js/modules/es.reflect.construct.js"),n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var r=n("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=(n("../node_modules/core-js/modules/es.array.concat.js"),n("../node_modules/react/index.js")),p=n("./app/stores/tagStore.tsx"),m=n("./app/utils/getDisplayName.tsx"),f=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),h=["tags"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=function(t){(0,a.Z)(b,t);var n,d,m=(n=b,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,l.Z)(n);if(d){var r=(0,l.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function b(){var e;(0,o.Z)(this,b);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=m.call.apply(m,[this].concat(n)),(0,c.Z)((0,i.Z)(e),"state",{tags:p.Z.getAllTags()}),(0,c.Z)((0,i.Z)(e),"unsubscribe",p.Z.listen((function(t){return e.setState({tags:t})}),void 0)),e}return(0,s.Z)(b,[{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var t=this.props,n=t.tags,o=(0,r.Z)(t,h);return(0,f.tZ)(e,j({},j({tags:null!=n?n:this.state.tags},o)))}}]),b}(d.Component);return t.displayName="WithTags",(0,c.Z)(t,"displayName","withTags(".concat((0,m.Z)(e),")")),t}},"./app/views/eventsV2/table/queryField.tsx":function(e,t,n){"use strict";n.d(t,{q:function(){return J}}),n("../node_modules/core-js/modules/es.reflect.construct.js"),n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var r=n("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=(n("../node_modules/core-js/modules/es.array.concat.js"),n("../node_modules/core-js/modules/es.function.name.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.regexp.exec.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/core-js/modules/es.array.map.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.object.values.js"),n("../node_modules/core-js/modules/es.object.assign.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.string.includes.js"),n("../node_modules/react/index.js")),m=n("../node_modules/react-select/dist/chunk-80640036.browser.esm.js"),f=n("../node_modules/lodash/cloneDeep.js"),h=n.n(f),b=n("./app/components/forms/selectControl.tsx"),j=n("./app/components/tag.tsx"),g=n("./app/locale.tsx"),v=n("./app/styles/space.tsx"),y=n("./app/views/settings/components/forms/controls/input.tsx"),Z=(n("../node_modules/core-js/modules/es.object.to-string.js"),n("../node_modules/core-js/modules/es.array.from.js"),n("../node_modules/core-js/modules/es.string.iterator.js"),n("../node_modules/core-js/modules/es.symbol.description.js"),n("../node_modules/core-js/modules/es.symbol.iterator.js"),n("../node_modules/core-js/modules/es.array.iterator.js"),n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js")),O=(n("../node_modules/core-js/modules/es.array.flat.js"),n("../node_modules/core-js/modules/es.string.match-all.js"),n("../node_modules/core-js/modules/es.string.search.js"),n("../node_modules/core-js/modules/es.array.slice.js"),n("../node_modules/lodash/isEqual.js")),w=n.n(O),k=n("./app/styles/overflowEllipsis.tsx"),_=n("./app/utils/discover/fields.tsx"),x=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),S=["onUpdate","options"];function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){(0,a.Z)(m,e);var t,n,d=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(n){var o=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,u.Z)(this,e)});function m(){var e;(0,o.Z)(this,m);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=d.call.apply(d,[this].concat(n)),(0,c.Z)((0,i.Z)(e),"state",{query:e.props.value,partialTerm:null,rawOptions:e.props.options,dropdownVisible:!1,dropdownOptionGroups:N(e.props.options,null),activeSelection:-1}),(0,c.Z)((0,i.Z)(e),"input",(0,p.createRef)()),(0,c.Z)((0,i.Z)(e),"blur",(function(){var t;null===(t=e.input.current)||void 0===t||t.blur()})),(0,c.Z)((0,i.Z)(e),"focus",(function(t){var n,r;null===(n=e.input.current)||void 0===n||n.focus(),null===(r=e.input.current)||void 0===r||r.setSelectionRange(t,t)})),(0,c.Z)((0,i.Z)(e),"handleChange",(function(t){var n=t.target.value.replace("\n","");e.setState({query:n},e.updateAutocompleteOptions)})),(0,c.Z)((0,i.Z)(e),"handleClick",(function(){e.updateAutocompleteOptions()})),(0,c.Z)((0,i.Z)(e),"handleFocus",(function(){e.setState({dropdownVisible:!0})})),(0,c.Z)((0,i.Z)(e),"handleBlur",(function(){e.props.onUpdate(e.state.query),e.setState({dropdownVisible:!1})})),(0,c.Z)((0,i.Z)(e),"handleKeyDown",(function(t){var n=t.key,r=e.props.options,o=e.state,s=o.activeSelection,i=o.partialTerm,a=s>=0;if("ArrowDown"===n||"ArrowUp"===n){t.preventDefault();var u,l=N(r,i),c=l.map((function(e){return e.options})).flat();return c[u=a?"ArrowUp"===n?(s-1+c.length)%c.length:(s+1)%c.length:"ArrowUp"===n?c.length-1:0].active=!0,void e.setState({activeSelection:u,dropdownOptionGroups:l})}if(!a||"Tab"!==n&&"Enter"!==n)"Enter"!==n||e.blur();else{t.preventDefault();var d=e.getSelection(s);d&&e.handleSelect(d)}})),(0,c.Z)((0,i.Z)(e),"handleKeyUp",(function(t){"Escape"===t.key&&(t.preventDefault(),e.state.activeSelection>=0||e.blur())})),(0,c.Z)((0,i.Z)(e),"handleSelect",(function(t){var n=e.splitQuery(),r=n.prefix,o=n.suffix;e.setState({query:"".concat(r).concat(t.value," ").concat(o),activeSelection:-1},(function(){e.focus(r.length+t.value.length+1),e.updateAutocompleteOptions()}))})),e}return(0,s.Z)(m,[{key:"getCursorPosition",value:function(){var e,t;return null!==(e=null===(t=this.input.current)||void 0===t?void 0:t.selectionStart)&&void 0!==e?e:-1}},{key:"splitQuery",value:function(){var e=this.state.query,t=this.getCursorPosition(),n=(0,Z.Z)(e.substring(0,t).matchAll(/\s|^/g)),r=n[n.length-1],o=""===r[0]?0:(r.index||0)+1,s=e.slice(t).search(/\s|$/),i=t+(-1===s?0:s);return{startOfTerm:o,endOfTerm:i,prefix:e.substring(0,o),term:e.substring(o,i),suffix:e.substring(i)}}},{key:"getSelection",value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw s}}}}(this.state.dropdownOptionGroups);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!(e>=r.options.length))return r.options[e];e-=r.options.length}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"updateAutocompleteOptions",value:function(){var e=this.props.options,t=this.splitQuery().term||null;this.setState({dropdownOptionGroups:N(e,t),partialTerm:t})}},{key:"render",value:function(){var e=this.props,t=(e.onUpdate,e.options,(0,r.Z)(e,S)),n=this.state,o=n.dropdownVisible,s=n.dropdownOptionGroups;return(0,x.BX)(F,{isOpen:o,children:[(0,x.tZ)(D,P(P({},t),{},{ref:this.input,autoComplete:"off",className:"form-control",value:this.state.query,onClick:this.handleClick,onChange:this.handleChange,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown})),(0,x.tZ)(L,{isOpen:o,optionGroups:s,handleSelect:this.handleSelect})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return w()(t.rawOptions,e.options)?P({},t):P(P({},t),{},{rawOptions:e.options,dropdownOptionGroups:N(e.options,t.partialTerm),activeSelection:-1})}}]),m}(p.PureComponent);E.displayName="ArithmeticInput",(0,c.Z)(E,"defaultProps",{options:[]});var F=(0,d.Z)("div",{target:"e18r1b6w8"})("border:1px solid ",(function(e){return e.theme.border}),";box-shadow:inset ",(function(e){return e.theme.dropShadowLight}),";background:",(function(e){return e.theme.background}),";position:relative;border-radius:",(function(e){return e.isOpen?"".concat(e.theme.borderRadius," ").concat(e.theme.borderRadius," 0 0"):e.theme.borderRadius}),";.show-sidebar &{background:",(function(e){return e.theme.backgroundSecondary}),";}"),D=(0,d.Z)(y.Z,{target:"e18r1b6w7"})({name:"pv1u47",styles:"height:40px;padding:7px 10px;border:0;box-shadow:none;&:hover,&:focus{border:0;box-shadow:none;}"});function L(e){var t=e.isOpen,n=e.optionGroups,r=e.handleSelect;return(0,x.tZ)(V,{isOpen:t,children:(0,x.tZ)(I,{children:n.map((function(e){var t=e.title,n=e.options;return(0,x.BX)(p.Fragment,{children:[(0,x.tZ)(B,{children:(0,x.tZ)(U,{children:t})}),n.map((function(e){return(0,x.tZ)(q,{className:e.active?"active":void 0,onClick:function(){return r(e)},onMouseDown:function(e){return e.preventDefault()},ref:function(t){var n;return e.active&&(null==t||null===(n=t.scrollIntoView)||void 0===n?void 0:n.call(t,{block:"nearest"}))},children:(0,x.tZ)(z,{children:e.value})},e.value)})),0===n.length&&(0,x.tZ)(M,{children:(0,g.t)("No items found")})]},t)}))})})}function R(e,t){return{title:"Fields",options:e.filter((function(e){return"equation"!==e.kind})).filter((function(e){if("function"===e.kind&&"any"===e.function[0])return!1;var t=(0,_.T$)(e);return"number"===t||"integer"===t||"duration"===t})).map((function(e){return{kind:"field",active:!1,value:(0,_.sN)(e)}})).filter((function(e){var n=e.value;return!t||n.includes(t)}))}}function A(e){return{title:"Operators",options:["+","-","*","/","(",")"].filter((function(t){return!e||t.includes(e)})).map((function(e){return{kind:"operator",active:!1,value:e}}))}}function N(e,t){return[R(e,t),A(t)]}L.displayName="TermDropdown";var V=(0,d.Z)("div",{target:"e18r1b6w6"})("display:",(function(e){return e.isOpen?"block":"none"}),";position:absolute;top:100%;left:-1px;right:-1px;z-index:",(function(e){return e.theme.zIndex.dropdown}),";background:",(function(e){return e.theme.background}),";box-shadow:",(function(e){return e.theme.dropShadowLight}),";border:1px solid ",(function(e){return e.theme.border}),";border-radius:",(function(e){return e.theme.borderRadiusBottom}),";max-height:300px;overflow-y:auto;"),I=(0,d.Z)("ul",{target:"e18r1b6w5"})({name:"nfj5ll",styles:"padding-left:0;list-style:none;margin-bottom:0"}),B=(0,d.Z)("li",{target:"e18r1b6w4"})("&:not(:last-child){border-bottom:1px solid ",(function(e){return e.theme.innerBorder}),";}"),U=(0,d.Z)("header",{target:"e18r1b6w3"})("display:flex;align-items:center;background-color:",(function(e){return e.theme.backgroundSecondary}),";color:",(function(e){return e.theme.gray300}),";font-weight:normal;font-size:",(function(e){return e.theme.fontSizeMedium}),";margin:0;padding:",(0,v.Z)(1)," ",(0,v.Z)(2),";&>svg{margin-right:",(0,v.Z)(1),";}"),q=(0,d.Z)(B,{target:"e18r1b6w2"})("scroll-margin:40px 0;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",(0,v.Z)(1)," ",(0,v.Z)(2),";cursor:pointer;&:hover,&.active{background:",(function(e){return e.theme.focus}),";}"),z=(0,d.Z)("div",{target:"e18r1b6w1"})("color:",(function(e){return e.theme.textColor}),";font-weight:normal;font-size:",(function(e){return e.theme.fontSizeMedium}),";margin:0;line-height:",(function(e){return e.theme.text.lineHeightHeading}),";",k.Z,";"),M=(0,d.Z)("div",{target:"e18r1b6w0"})("display:flex;padding:",(0,v.Z)(1)," ",(0,v.Z)(2),";font-size:",(function(e){return e.theme.fontSizeLarge}),";color:",(function(e){return e.theme.gray300}),";&:not(:last-child){border-bottom:1px solid ",(function(e){return e.theme.innerBorder}),";}"),G=n("./app/views/eventsV2/table/types.tsx"),Q=["label","data"],K=["data"],W=["onUpdate"];function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var o=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var J=function(e){(0,a.Z)(n,e);var t=H(n);function n(){var e;(0,o.Z)(this,n);for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,i.Z)(e),"FieldSelectComponents",{Option:function(t){var n=t.label,o=t.data,s=(0,r.Z)(t,Q);return(0,x.BX)(m.y.Option,$($({label:n,data:o},s),{},{children:[(0,x.tZ)("span",{"data-test-id":"label",children:n}),e.renderTag(o.value.kind)]}))},SingleValue:function(t){var n=t.data,o=(0,r.Z)(t,K);return(0,x.BX)(m.y.SingleValue,$($({data:n},o),{},{children:[(0,x.tZ)("span",{"data-test-id":"label",children:n.label}),e.renderTag(n.value.kind)]}))}}),(0,c.Z)((0,i.Z)(e),"FieldSelectStyles",{singleValue:function(e){return $($({},e),{display:"flex",justifyContent:"space-between",alignItems:"center",width:"calc(100% - 10px)"})},option:function(e){return $($({},e),{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"})}}),(0,c.Z)((0,i.Z)(e),"handleFieldChange",(function(t){if(t){var n=t.value,r=e.props.fieldValue,o=h()(e.props.fieldValue);switch(n.kind){case G.L.TAG:case G.L.MEASUREMENT:case G.L.BREAKDOWN:case G.L.FIELD:o={kind:"field",field:n.meta.name};break;case G.L.FUNCTION:"field"===r.kind?o={kind:"function",function:[n.meta.name,"",void 0,void 0]}:"function"===r.kind&&(o={kind:"function",function:[n.meta.name,r.function[1],r.function[2],r.function[3]]});break;default:throw new Error("Invalid field type found in column picker")}n.kind===G.L.FUNCTION&&(n.meta.parameters.forEach((function(t,n){if("function"===o.kind)if("column"===t.kind){var r=e.getFieldOrTagOrMeasurementValue(o.function[n+1]);null===r?o.function[n+1]=t.defaultValue||"":r.kind!==G.L.FIELD&&r.kind!==G.L.TAG&&r.kind!==G.L.MEASUREMENT&&r.kind!==G.L.BREAKDOWN||!Y(t.columnTypes,r)?(o.function[n+1]=t.defaultValue||"",o.function[n+2]=void 0):o.function[n+1]=r.meta.name}else o.function[n+1]=t.defaultValue||""})),"function"===o.kind&&(0===n.meta.parameters.length?o.function=[o.function[0],"",void 0,void 0]:1===n.meta.parameters.length&&(o.function[2]=void 0))),e.triggerChange(o)}})),(0,c.Z)((0,i.Z)(e),"handleEquationChange",(function(t){var n=h()(e.props.fieldValue);n.kind===G.L.EQUATION&&(n.field=t),e.triggerChange(n)})),(0,c.Z)((0,i.Z)(e),"handleFieldParameterChange",(function(t){var n=t.value,r=h()(e.props.fieldValue);"function"===r.kind&&(r.function[1]=n.meta.name),e.triggerChange(r)})),(0,c.Z)((0,i.Z)(e),"handleDropdownParameterChange",(function(t){return function(n){var r=h()(e.props.fieldValue);"function"===r.kind&&(r.function[t]=n.value),e.triggerChange(r)}})),(0,c.Z)((0,i.Z)(e),"handleScalarParameterChange",(function(t){return function(n){var r=h()(e.props.fieldValue);"function"===r.kind&&(r.function[t]=n),e.triggerChange(r)}})),e}return(0,s.Z)(n,[{key:"triggerChange",value:function(e){this.props.onChange(e)}},{key:"getFieldOrTagOrMeasurementValue",value:function(e){var t=this.props.fieldOptions;if(void 0===e)return null;var n="field:".concat(e);if(t[n])return t[n].value;var r="measurement:".concat(e);if(t[r])return t[r].value;var o="span_op_breakdown:".concat(e);if(t[o])return t[o].value;var s=0===e.indexOf("tags[")?"tag:".concat(e.replace(/tags\[(.*?)\]/,"$1")):"tag:".concat(e);return t[s]?t[s].value:e.length>0?{kind:G.L.TAG,meta:{name:e,dataType:"string",unknown:!0}}:null}},{key:"getFieldData",value:function(){var e=this,t=null,n=this.props.fieldValue,r=this.props.fieldOptions;if("function"===n.kind){var o="function:".concat(n.function[0]);void 0!==r[o]&&(t=r[o].value)}"field"===n.kind&&(t=this.getFieldOrTagOrMeasurementValue(n.field),r=this.appendFieldIfUnknown(r,t));var s=[];return t&&t.kind===G.L.FUNCTION&&t.meta.parameters.length>0&&n.kind===G.L.FUNCTION&&(s=t.meta.parameters.map((function(t,o){if("column"===t.kind){var s=e.getFieldOrTagOrMeasurementValue(n.function[1]);return r=e.appendFieldIfUnknown(r,s),{kind:"column",value:s,required:t.required,options:Object.values(r).filter((function(e){var n=e.value;return(n.kind===G.L.FIELD||n.kind===G.L.TAG||n.kind===G.L.MEASUREMENT||n.kind===G.L.BREAKDOWN)&&Y(t.columnTypes,n)}))}}return"dropdown"===t.kind?{kind:"dropdown",options:t.options,dataType:t.dataType,required:t.required,value:"function"===n.kind&&n.function[o+1]||t.defaultValue||""}:{kind:"value",value:"function"===n.kind&&n.function[o+1]||t.defaultValue||"",dataType:t.dataType,required:t.required,placeholder:t.placeholder}}))),{field:t,fieldOptions:r,parameterDescriptions:s}}},{key:"appendFieldIfUnknown",value:function(e,t){return t?(t&&t.kind===G.L.TAG&&t.meta.unknown&&((e=Object.assign({},e))[t.meta.name]={label:t.meta.name,value:t}),e):e}},{key:"renderParameterInputs",value:function(e){var t=this,n=this.props,r=n.disabled,o=n.inFieldLabels,s=n.filterAggregateParameters,i=n.hideParameterSelector,a=e.map((function(e,n){if("column"===e.kind&&e.options.length>0){if(i)return null;var a=s?e.options.filter(s):e.options;return(0,x.tZ)(b.Z,{name:"parameter",placeholder:(0,g.t)("Select value"),options:a,value:e.value,required:e.required,onChange:t.handleFieldParameterChange,inFieldLabel:o?(0,g.t)("Parameter: "):void 0,disabled:r,styles:o?void 0:t.FieldSelectStyles,components:t.FieldSelectComponents},"select")}if("value"===e.kind){var u={required:e.required,value:e.value,onUpdate:t.handleScalarParameterChange(n+1),placeholder:e.placeholder,disabled:r};switch(e.dataType){case"number":return(0,x.tZ)(te,$({name:"refinement",type:"text",inputMode:"numeric",pattern:"[0-9]*(\\.[0-9]*)?"},u),"parameter:number");case"integer":return(0,x.tZ)(te,$({name:"refinement",type:"text",inputMode:"numeric",pattern:"[0-9]*"},u),"parameter:integer");default:return(0,x.tZ)(te,$({name:"refinement",type:"text"},u),"parameter:text")}}if("dropdown"===e.kind)return(0,x.tZ)(b.Z,{name:"dropdown",placeholder:(0,g.t)("Select value"),options:e.options,value:e.value,required:e.required,onChange:t.handleDropdownParameterChange(n+1),inFieldLabel:o?(0,g.t)("Parameter: "):void 0,disabled:r});throw new Error("Unknown parameter type encountered for ".concat(t.props.fieldValue))})),u=this.props.gridColumns,l=(null!=u?u:a.length+1)-a.length-1;if(void 0!==u&&l>0)for(var c=0;c<l;c++)a.push((0,x.tZ)(re,{},c));return a}},{key:"renderTag",value:function(e){var t,n;if(!1===this.props.shouldRenderTag)return null;switch(e){case G.L.FUNCTION:t="f(x)",n="success";break;case G.L.MEASUREMENT:t="measure",n="info";break;case G.L.BREAKDOWN:t="breakdown",n="error";break;case G.L.TAG:t=e,n="warning";break;case G.L.FIELD:t=e,n="highlight";break;default:t=e}return(0,x.tZ)(j.Z,{type:n,children:t})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.takeFocus,r=e.filterPrimaryOptions,o=e.fieldValue,s=e.inFieldLabels,i=e.disabled,a=e.hidePrimarySelector,u=e.gridColumns,l=e.otherColumns,c=this.getFieldData(),d=c.field,p=c.fieldOptions,m=c.parameterDescriptions,f=r?Object.values(p).filter(r):Object.values(p),h={name:"field",options:Object.values(f),placeholder:(0,g.t)("(Required)"),value:d,onChange:this.handleFieldChange,inFieldLabel:s?(0,g.t)("Function: "):void 0,disabled:i};n&&null===d&&(h.autoFocus=!0);var j=this.renderParameterInputs(m);if(o.kind===G.L.EQUATION)return(0,x.tZ)(ee,{className:t,gridColumns:1,tripleLayout:!1,children:(0,x.tZ)(E,{name:"arithmetic",type:"text",required:!0,value:o.field,onUpdate:this.handleEquationChange,options:l},"parameter:text")});var v=j.length>2?2:u||j.length+1;return(0,x.BX)(ee,{className:t,gridColumns:v,tripleLayout:3===u&&j.length>2,children:[!a&&(0,x.tZ)(b.Z,$($({},h),{},{styles:s?void 0:this.FieldSelectStyles,components:this.FieldSelectComponents})),j]})}}]),n}(p.Component);function Y(e,t){return"function"==typeof e?e({name:t.meta.name,dataType:t.meta.dataType}):e.includes(t.meta.dataType)}J.displayName="QueryField";var ee=(0,d.Z)("div",{target:"eve9joo2"})("display:grid;",(function(e){return e.tripleLayout?"grid-template-columns: 1fr 2fr;":"grid-template-columns: repeat(".concat(e.gridColumns,", 1fr);")})," grid-gap:",(0,v.Z)(1),";align-items:center;flex-grow:1;"),te=function(e){(0,a.Z)(n,e);var t=H(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,c.Z)((0,i.Z)(r),"state",{value:r.props.value}),(0,c.Z)((0,i.Z)(r),"input",void 0),(0,c.Z)((0,i.Z)(r),"handleBlur",(function(){r.isValid?r.props.onUpdate(r.state.value):r.setState({value:r.props.value})})),(0,c.Z)((0,i.Z)(r),"handleChange",(function(e){r.isValid&&r.setState({value:e.target.value})})),r.input=p.createRef(),r}return(0,s.Z)(n,[{key:"isValid",get:function(){return!this.input.current||this.input.current.validity.valid}},{key:"render",value:function(){var e=this.props,t=(e.onUpdate,(0,r.Z)(e,W));return(0,x.tZ)(ne,$($({},t),{},{ref:this.input,className:"form-control",value:this.state.value,onChange:this.handleChange,onBlur:this.handleBlur}))}}]),n}(p.Component);te.displayName="BufferedInput";var ne=(0,d.Z)(y.Z,{target:"eve9joo1"})({name:"9dgk9j",styles:"height:41px;min-width:50px"}),re=(0,d.Z)("div",{target:"eve9joo0"})("height:41px;min-width:50px;background:",(function(e){return e.theme.backgroundSecondary}),";border-radius:",(function(e){return e.theme.borderRadius}),";display:flex;align-items:center;justify-content:center;&:after{font-size:",(function(e){return e.theme.fontSizeMedium}),";content:'",(0,g.t)("No parameter"),"';color:",(function(e){return e.theme.gray300}),";}")}}]);
//# sourceMappingURL=../sourcemaps/app_components_events_searchBar_tsx-app_views_eventsV2_table_queryField_tsx.806d7fb3be8155c7ea28fa135b8d62ce.js.map