{"version":3,"sources":["webpack:///./app/components/activity/author.tsx","webpack:///./app/components/activity/item/avatar.tsx","webpack:///./app/components/activity/item/bubble.tsx","webpack:///./app/components/activity/item/index.tsx"],"names":["ActivityAuthor","p","theme","fontSizeMedium","ActivityAvatar","className","type","user","size","SystemAvatar","StyledIconSentry","width","height","shape","textColor","background","IconSentry","backgroundColor","borderColor","border","borderRadius","ActivityItem","author","avatarSize","bubbleProps","children","date","interval","footer","id","header","hideDate","showTime","showDate","showRange","dateEnded","moment","add","utc","format","undefined","timeOnly","Boolean","ActivityItemWrapper","StyledActivityAvatar","StyledActivityBubble","isRenderFunc","ActivityHeader","ActivityHeaderContent","StyledTimeSince","StyledDateTime","StyledDateTimeWindow","timeAndDate","ActivityBody","ActivityFooter","space","HeaderAndFooter","textStyles","TimeSince","gray300","DateTime","ActivityBubble"],"mappings":"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","file":"chunks/app_components_activity_author_tsx-app_components_activity_item_index_tsx.xxxxxxxxxxxxxxxxxxxx.js","sourcesContent":["import styled from '@emotion/styled';\n\nconst ActivityAuthor = styled('span')`\n  font-weight: 600;\n  font-size: ${p => p.theme.fontSizeMedium};\n`;\n\nexport default ActivityAuthor;\n","import styled from '@emotion/styled';\n\nimport UserAvatar from 'app/components/avatar/userAvatar';\nimport Placeholder from 'app/components/placeholder';\nimport {IconSentry} from 'app/icons';\nimport {AvatarUser} from 'app/types';\n\ntype Props = {\n  type: 'system' | 'user';\n  user?: AvatarUser;\n  className?: string;\n  size?: number;\n};\n\nfunction ActivityAvatar({className, type, user, size = 38}: Props) {\n  if (user) {\n    return <UserAvatar user={user} size={size} className={className} />;\n  }\n\n  if (type === 'system') {\n    // Return Sentry avatar\n    return (\n      <SystemAvatar className={className} size={size}>\n        <StyledIconSentry size=\"md\" />\n      </SystemAvatar>\n    );\n  }\n\n  return (\n    <Placeholder\n      className={className}\n      width={`${size}px`}\n      height={`${size}px`}\n      shape=\"circle\"\n    />\n  );\n}\n\nexport default ActivityAvatar;\n\ntype SystemAvatarProps = {\n  size: number;\n};\n\nconst SystemAvatar = styled('span')<SystemAvatarProps>`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: ${p => p.size}px;\n  height: ${p => p.size}px;\n  background-color: ${p => p.theme.textColor};\n  color: ${p => p.theme.background};\n  border-radius: 50%;\n`;\n\nconst StyledIconSentry = styled(IconSentry)`\n  padding-bottom: 3px;\n`;\n","import styled from '@emotion/styled';\n\ntype Props = {\n  backgroundColor?: string;\n  borderColor?: string;\n};\n\n/**\n * This creates a bordered box that has a left pointing arrow\n * on the left-side at the top.\n */\nconst ActivityBubble = styled('div')<Props>`\n  flex: 1;\n  background-color: ${p => p.backgroundColor || p.theme.background};\n  border: 1px solid ${p => p.borderColor || p.theme.border};\n  border-radius: ${p => p.theme.borderRadius};\n  position: relative;\n  width: 100%; /* this is used in Incidents Details - a chart can cause overflow and won't resize properly */\n\n  &:before {\n    display: block;\n    content: '';\n    width: 0;\n    height: 0;\n    border-top: 7px solid transparent;\n    border-bottom: 7px solid transparent;\n    border-right: 7px solid ${p => p.borderColor || p.theme.border};\n    position: absolute;\n    left: -7px;\n    top: 12px;\n  }\n\n  &:after {\n    display: block;\n    content: '';\n    width: 0;\n    height: 0;\n    border-top: 6px solid transparent;\n    border-bottom: 6px solid transparent;\n    border-right: 6px solid ${p => p.backgroundColor || p.theme.background};\n    position: absolute;\n    left: -6px;\n    top: 13px;\n  }\n`;\n\nexport default ActivityBubble;\n","import * as React from 'react';\nimport styled from '@emotion/styled';\nimport moment from 'moment-timezone';\n\nimport DateTime from 'app/components/dateTime';\nimport TimeSince from 'app/components/timeSince';\nimport space from 'app/styles/space';\nimport textStyles from 'app/styles/text';\nimport {AvatarUser} from 'app/types';\nimport {isRenderFunc} from 'app/utils/isRenderFunc';\n\nimport ActivityAvatar from './avatar';\nimport ActivityBubble from './bubble';\n\nexport type ActivityAuthorType = 'user' | 'system';\n\ntype ChildFunction = () => React.ReactNode;\n\ntype Props = {\n  children?: React.ReactChild | ChildFunction;\n  className?: string;\n  /**\n   * This is used to uniquely identify the activity item for use as an anchor\n   */\n  id?: string;\n\n  /**\n   * If supplied, will show the time that the activity started\n   */\n  date?: string | Date;\n\n  /**\n   * If supplied, will show the interval that the activity occurred in\n   */\n  interval?: number;\n\n  /**\n   * Used to render an avatar for the author. Currently can be a user, otherwise\n   * defaults as a \"system\" avatar (i.e. sentry)\n   *\n   * `user` is required if `type` is \"user\"\n   */\n  author?: {\n    type: ActivityAuthorType;\n    user?: AvatarUser;\n  };\n\n  // Size of the avatar.\n  avatarSize?: number;\n\n  // Hides date in header\n  hideDate?: boolean;\n\n  // Instead of showing a relative time/date, show the time\n  showTime?: boolean;\n\n  /**\n   * Can be a react node or a render function. render function will not include default wrapper\n   */\n  header?: React.ReactNode | ChildFunction;\n\n  /**\n   * Can be a react node or a render function. render function will not include default wrapper\n   */\n  footer?: React.ReactNode | ChildFunction;\n\n  bubbleProps?: React.ComponentProps<typeof ActivityBubble>;\n};\n\nfunction ActivityItem({\n  author,\n  avatarSize,\n  bubbleProps,\n  className,\n  children,\n  date,\n  interval,\n  footer,\n  id,\n  header,\n  hideDate = false,\n  showTime = false,\n}: Props) {\n  const showDate = !hideDate && date && !interval;\n  const showRange = !hideDate && date && interval;\n  const dateEnded = showRange\n    ? moment(date).add(interval, 'minutes').utc().format()\n    : undefined;\n  const timeOnly = Boolean(\n    date && dateEnded && moment(date).date() === moment(dateEnded).date()\n  );\n\n  return (\n    <ActivityItemWrapper data-test-id=\"activity-item\" className={className}>\n      {id && <a id={id} />}\n\n      {author && (\n        <StyledActivityAvatar type={author.type} user={author.user} size={avatarSize} />\n      )}\n\n      <StyledActivityBubble {...bubbleProps}>\n        {header && isRenderFunc<ChildFunction>(header) && header()}\n        {header && !isRenderFunc<ChildFunction>(header) && (\n          <ActivityHeader>\n            <ActivityHeaderContent>{header}</ActivityHeaderContent>\n            {date && showDate && !showTime && <StyledTimeSince date={date} />}\n            {date && showDate && showTime && <StyledDateTime timeOnly date={date} />}\n\n            {showRange && (\n              <StyledDateTimeWindow>\n                <StyledDateTime timeOnly={timeOnly} timeAndDate={!timeOnly} date={date} />\n                {' â€” '}\n                <StyledDateTime\n                  timeOnly={timeOnly}\n                  timeAndDate={!timeOnly}\n                  date={dateEnded}\n                />\n              </StyledDateTimeWindow>\n            )}\n          </ActivityHeader>\n        )}\n\n        {children && isRenderFunc<ChildFunction>(children) && children()}\n        {children && !isRenderFunc<ChildFunction>(children) && (\n          <ActivityBody>{children}</ActivityBody>\n        )}\n\n        {footer && isRenderFunc<ChildFunction>(footer) && footer()}\n        {footer && !isRenderFunc<ChildFunction>(footer) && (\n          <ActivityFooter>{footer}</ActivityFooter>\n        )}\n      </StyledActivityBubble>\n    </ActivityItemWrapper>\n  );\n}\n\nconst ActivityItemWrapper = styled('div')`\n  display: flex;\n  margin-bottom: ${space(2)};\n`;\n\nconst HeaderAndFooter = styled('div')`\n  padding: 6px ${space(2)};\n`;\n\nconst ActivityHeader = styled(HeaderAndFooter)`\n  display: flex;\n  border-bottom: 1px solid ${p => p.theme.border};\n  font-size: ${p => p.theme.fontSizeMedium};\n\n  &:last-child {\n    border-bottom: none;\n  }\n`;\n\nconst ActivityHeaderContent = styled('div')`\n  flex: 1;\n`;\n\nconst ActivityFooter = styled(HeaderAndFooter)`\n  display: flex;\n  border-top: 1px solid ${p => p.theme.border};\n  font-size: ${p => p.theme.fontSizeMedium};\n`;\n\nconst ActivityBody = styled('div')`\n  padding: ${space(2)} ${space(2)};\n  ${textStyles}\n`;\n\nconst StyledActivityAvatar = styled(ActivityAvatar)`\n  margin-right: ${space(1)};\n`;\n\nconst StyledTimeSince = styled(TimeSince)`\n  color: ${p => p.theme.gray300};\n`;\n\nconst StyledDateTime = styled(DateTime)`\n  color: ${p => p.theme.gray300};\n`;\n\nconst StyledDateTimeWindow = styled('div')`\n  color: ${p => p.theme.gray300};\n`;\n\nconst StyledActivityBubble = styled(ActivityBubble)`\n  width: 75%;\n  overflow-wrap: break-word;\n`;\n\nexport default ActivityItem;\n"],"sourceRoot":""}