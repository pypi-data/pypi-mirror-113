{"version":3,"sources":["webpack:///./app/views/settings/organization/organizationSettingsNavigation.tsx","webpack:///./app/views/settings/organization/organizationSettingsLayout.tsx"],"names":["OrganizationSettingsNavigation","getHooks","HookStore","hookName","hooks","handleHooks","undefined","this","setState","unsubscribe","organization","props","hookConfigs","map","cb","name","org","state","access","Set","features","navigationObjects","navigationConfiguration","React","withOrganization","OrganizationSettingsLayout","renderNavigation"],"mappings":"i9DAmBMA,E,wnBACW,EAAKC,a,gCAmBNC,YACZ,SAACC,EAAoBC,GACnB,EAAKC,YAAYF,EAAUC,UAE7BE,I,kDArBF,WAEEC,KAAKC,SAASD,KAAKN,c,kCAGrB,WACEM,KAAKE,gB,sBAkBP,WAEE,IAAOC,EAAgBH,KAAKI,MAArBD,aAEP,MAAO,CACLE,YAAaV,QAAc,2CAA2CW,KAAI,SAAAC,GAAE,OAC1EA,EAAGJ,MAELN,MAAOF,QAAc,oCAAoCW,KAAI,SAAAC,GAAE,OAC7DA,EAAGJ,S,yBAKT,SAAYK,EAAgBX,GAC1B,IAAMY,EAAMT,KAAKI,MAAMD,aACV,4CAATK,GAGJR,KAAKC,SAAS,CAACI,YAAaR,EAAMS,KAAI,SAAAC,GAAE,OAAIA,EAAGE,U,oBAGjD,WACE,MAA6BT,KAAKU,MAA3Bb,EAAP,EAAOA,MAAOQ,EAAd,EAAcA,YACPF,EAAgBH,KAAKI,MAArBD,aACDQ,EAAS,IAAIC,IAAIT,EAAaQ,QAC9BE,EAAW,IAAID,IAAIT,EAAaU,UAEtC,OACE,QAAC,IAAD,CACEC,kBAAmBC,IACnBJ,OAAQA,EACRE,SAAUA,EACVV,aAAcA,EACdN,MAAOA,EACPQ,YAAaA,Q,GA9DwBW,aAAvCvB,E,6CAoEN,OAAewB,OAAiBxB,G,qkBC7EhC,SAASyB,EAA2Bd,GAClC,OACE,QAAC,IAAD,OACMA,GADN,IAEEe,iBAAkB,kBAAM,QAAC,EAAD,QAJrBD,E,yCAST","file":"chunks/app_views_settings_organization_organizationSettingsLayout_tsx.xxxxxxxxxxxxxxxxxxxx.js","sourcesContent":["import * as React from 'react';\n\nimport HookStore from 'app/stores/hookStore';\nimport {Organization} from 'app/types';\nimport {HookName, Hooks} from 'app/types/hooks';\nimport withOrganization from 'app/utils/withOrganization';\nimport SettingsNavigation from 'app/views/settings/components/settingsNavigation';\nimport navigationConfiguration from 'app/views/settings/organization/navigationConfiguration';\nimport {NavigationSection} from 'app/views/settings/types';\n\ntype Props = {\n  organization: Organization;\n};\n\ntype State = {\n  hookConfigs: NavigationSection[];\n  hooks: React.ReactElement[];\n};\n\nclass OrganizationSettingsNavigation extends React.Component<Props, State> {\n  state: State = this.getHooks();\n\n  componentDidMount() {\n    // eslint-disable-next-line react/no-did-mount-set-state\n    this.setState(this.getHooks());\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe();\n  }\n\n  /**\n   * TODO(epurkhiser): Becase the settings organization navigation hooks\n   * do not conform to a normal component style hook, and take a single\n   * parameter 'organization', we cannot use the `Hook` component here,\n   * and must resort to using listening to the HookStore to retrieve hook data.\n   *\n   * We should update the hook interface for the two hooks used here\n   */\n  unsubscribe = HookStore.listen(\n    (hookName: HookName, hooks: Hooks['settings:organization-navigation-config'][]) => {\n      this.handleHooks(hookName, hooks);\n    },\n    undefined\n  );\n\n  getHooks() {\n    // Allow injection via getsentry et all\n    const {organization} = this.props as Props;\n\n    return {\n      hookConfigs: HookStore.get('settings:organization-navigation-config').map(cb =>\n        cb(organization)\n      ),\n      hooks: HookStore.get('settings:organization-navigation').map(cb =>\n        cb(organization)\n      ),\n    };\n  }\n\n  handleHooks(name: HookName, hooks: Hooks['settings:organization-navigation-config'][]) {\n    const org = this.props.organization;\n    if (name !== 'settings:organization-navigation-config') {\n      return;\n    }\n    this.setState({hookConfigs: hooks.map(cb => cb(org))});\n  }\n\n  render() {\n    const {hooks, hookConfigs} = this.state as State;\n    const {organization} = this.props as Props;\n    const access = new Set(organization.access);\n    const features = new Set(organization.features);\n\n    return (\n      <SettingsNavigation\n        navigationObjects={navigationConfiguration}\n        access={access}\n        features={features}\n        organization={organization}\n        hooks={hooks}\n        hookConfigs={hookConfigs}\n      />\n    );\n  }\n}\n\nexport default withOrganization(OrganizationSettingsNavigation);\n","import * as React from 'react';\nimport {RouteComponentProps} from 'react-router';\n\nimport SettingsLayout from 'app/views/settings/components/settingsLayout';\nimport OrganizationSettingsNavigation from 'app/views/settings/organization/organizationSettingsNavigation';\n\ntype Props = RouteComponentProps<{orgId: string}, {}> & {\n  children: React.ReactNode;\n};\n\nfunction OrganizationSettingsLayout(props: Props) {\n  return (\n    <SettingsLayout\n      {...props}\n      renderNavigation={() => <OrganizationSettingsNavigation />}\n    />\n  );\n}\n\nexport default OrganizationSettingsLayout;\n"],"sourceRoot":""}