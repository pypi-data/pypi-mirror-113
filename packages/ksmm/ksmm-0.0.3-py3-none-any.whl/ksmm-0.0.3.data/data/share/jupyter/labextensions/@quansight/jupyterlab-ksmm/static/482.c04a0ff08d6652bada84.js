(self.webpackChunk_quansight_jupyterlab_ksmm=self.webpackChunk_quansight_jupyterlab_ksmm||[]).push([[482],{24321:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>N});var a=n(50138),r=n(90357),l=n(96865),o=n(56271),c=n.n(o),s=n(10682),m=n(73886),i=n(83290);async function u(e="",t={}){const n=i.ServerConnection.makeSettings(),a=m.URLExt.join(n.baseUrl,"ksmm",e);let r;try{r=await i.ServerConnection.makeRequest(a,t,n)}catch(e){throw new i.ServerConnection.NetworkError(e)}let l=await r.text();if(l.length>0)try{l=JSON.parse(l)}catch(e){console.log("Not a JSON response body.",r)}if(!r.ok)throw new i.ServerConnection.ResponseError(r,l.message||l);return l}var d=n(86025),p=n(89583),h=n(56043),y=n.n(h);const f={title:"Kernelspec Card",type:"array",items:{type:"object",properties:{kernel_name:{type:"string"},jupyter_name:{type:"string"}}}},g=e=>{const{cardPayload:t,handleSelectKernelspec:n,handleCopyKernelspec:a,handleDeleteKernelspec:r}=e,l=t,o={"ui:ArrayFieldTemplate":e=>c().createElement(d.Z,{style:{width:"18rem",height:"12rem"}},c().createElement(d.Z.Body,null,c().createElement(d.Z.Title,null,"Kernel: ",l.kernel_name),c().createElement(d.Z.Title,null,l.jupyter_name)),c().createElement(d.Z.Footer,{className:"align-left"},c().createElement("a",{style:{cursor:"pointer"},onClick:()=>n(l.kernel_name)},c().createElement(p.ffH,null)),c().createElement("a",{style:{cursor:"pointer"},onClick:()=>a(l.kernel_name)},c().createElement(p.esY,null)),c().createElement("a",{style:{cursor:"pointer"},onClick:()=>r(l.kernel_name)},c().createElement(p.Xm5,null))))};return c().createElement("div",null,c().createElement(y(),{schema:f,uiSchema:o,children:" "}))};var E=n(45114);const v=e=>c().createElement(E.Z,{variant:"success"},"Success ",c().createElement("a",{style:{textDecoration:"underline"},onClick:()=>e.handleClose()},"Close"));var S=n(72122),k=n(56841),b=n(35005);const C=e=>{const[t,n]=(0,o.useState)(e.value.name),[a,r]=(0,o.useState)(e.formData[e.value.name]);return c().createElement("div",null,c().createElement("input",{type:"string",value:t,onChange:a=>{e.handleKey(t,a.target.value),n(a.target.value)}}),c().createElement("input",{type:"string",value:a,onChange:n=>{e.handleVal(t,n.target.value),r(n.target.value)}}))},w=e=>{const t=(t,n)=>{e.formData[n]=e.formData[t],delete e.formData[t],console.log(e.formData)},n=(t,n)=>{e.formData[t]=n,console.log(e.formData)},a=e.uiSchema["ui:widget"],r=e.formData;return c().createElement("div",null,e.properties.map((l=>a(e={value:l,formData:r,handleKey:t,handleVal:n}))),c().createElement("button",{type:"button",onClick:t=>{alert(e.onAddClick)}},"Add New"))},K=e=>{const t=function(e){const t=[],n=[],a=[],r=[],l=[];return e.forEach((o=>{"display_name"==o.name||"interrupt_mode"==o.name||"language"==o.name?t.push(e.indexOf(o)):"argv"==o.name?n.push(e.indexOf(o)):"env"==o.name?a.push(e.indexOf(o)):"parameters"==o.name?r.push(e.indexOf(o)):"metadata"==o.name?l.push(e.indexOf(o)):console.log("Unknown element name",o.name)})),{"General Settings":t,"Launch Arguments":n,"Environment Variables":a,"Compute Parameters":r,Metadata:l}}(e.properties);return c().createElement("div",null,t[e.selecteditem].map((t=>c().createElement("div",{className:"property-wrapper",key:t},e.properties[t].content))))},_=e=>{const[t,n]=(0,o.useState)("General Settings");var a=["General Settings","Launch Arguments"];return c().createElement(S.Z,{defaultActiveKey:a[0],onSelect:e=>n(e)},a.map((n=>c().createElement(k.Z,{eventKey:n,key:n,title:n},c().createElement(K,{selecteditem:t,properties:e.properties,handleAdditionalProperties:e.onAddClick,mainprops:e})))))},D=e=>{const t={"ui:ObjectFieldTemplate":_,env:{"ui:widget":C,"ui:autofocus":!0,"ui:ObjectFieldTemplate":w,"ui:options":{expandable:!0}}};return c().createElement(c().Fragment,null,c().createElement(y(),{schema:e.schema,uiSchema:t,formData:e.formData,onSubmit:e.onSubmit}),c().createElement(b.Z,{variant:"secondary",onClick:()=>e.onCancel()},"Cancel"))};n(14039);const O=()=>{const[e,t]=(0,o.useState)({}),[n,a]=(0,o.useState)(!1),[r,l]=(0,o.useState)({}),[m,i]=(0,o.useState)(""),[d,p]=(0,o.useState)([]),[h,y]=(0,o.useState)(!1),[f,E]=(0,o.useState)({}),S=t=>{i(t),l(e[t]),a(!0)},k=()=>{a(!1),y(!1)},b=()=>{u("/",{method:"GET"}).then((e=>{t(e),p(K(e))}))},C=e=>{u("/copy",{method:"POST",body:JSON.stringify({name:e})}).then((t=>{alert("A copy of "+e+" has been created."),b()}))},w=e=>{u("/delete",{method:"POST",body:JSON.stringify({name:e})}).then((t=>{alert(e+" has been deleted."),b()}))},K=e=>{var t=new Array;for(const n in e)t.push({kernel_name:`${n}`,jupyter_name:`${e[n].display_name}`});return t};return(0,o.useEffect)((()=>{u("/schema",{method:"GET"}).then((e=>{E(e)})),b()}),[]),c().createElement(s.Z,{fluid:!0},c().createElement("div",null,"Kernelspec Manager"),!n&&c().createElement("div",{style:{display:"flex",flexWrap:"wrap"}},d.map(((e,t)=>c().createElement(g,{handleSelectKernelspec:S.bind(void 0),handleCopyKernelspec:C.bind(void 0),handleDeleteKernelspec:w.bind(void 0),cardPayload:e,key:t})))),h&&c().createElement(v,{handleClose:k}),n&&c().createElement(D,{schema:f,formData:r,onSubmit:(e=>{u("/",{method:"POST",body:JSON.stringify({editedKernelPayload:JSON.stringify(e.formData),originalKernelName:m})}).then((t=>{t.success&&(y(!0),b(),l(e.formData))}))}).bind(void 0),onCancel:k.bind(void 0)}))};class x extends a.ReactWidget{constructor(){super(),this.addClass("jp-Ksmm")}render(){return c().createElement(O,null)}}var A;!function(e){e.create="ksmm:create-kernelspec"}(A||(A={}));const N={id:"jupyterlab-ksmm-plugin",autoStart:!0,optional:[r.ILauncher],activate:(e,t)=>{const{commands:n}=e,r=A.create;n.addCommand(r,{caption:"A way to manage Kernelspecs",label:"Kernelspec Management",icon:e=>e.isPalette?null:l.i8,execute:()=>{const t=new x,n=new a.MainAreaWidget({content:t});n.title.label="Kernelspec Management",e.shell.add(n,"main")}}),t&&t.add({command:r})}}}}]);