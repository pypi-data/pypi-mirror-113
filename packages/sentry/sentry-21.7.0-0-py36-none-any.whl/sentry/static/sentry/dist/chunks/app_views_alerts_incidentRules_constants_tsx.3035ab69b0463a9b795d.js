(self.webpackChunk=self.webpackChunk||[]).push([["app_views_alerts_incidentRules_constants_tsx"],{"./app/views/alerts/incidentRules/constants.tsx":function(e,t,r){"use strict";r.d(t,{Vr:function(){return m},Ng:function(){return f},hh:function(){return R},P1:function(){return j},yq:function(){return y},nM:function(){return T},Yp:function(){return v},W7:function(){return g},ep:function(){return S},H9:function(){return _},Q6:function(){return b}});var n,s,o=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),u=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("./app/utils/performance/vitals/constants.tsx")),i=r("./app/views/alerts/incidentRules/types.tsx"),c=r("./app/views/alerts/utils/index.tsx"),l=["eventTypes"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m="count()",f="p95(transaction.duration)",R=(n={},(0,u.Z)(n,i.qz.ERRORS,"event.type:error"),(0,u.Z)(n,i.qz.TRANSACTIONS,"event.type:transaction"),n),j=(s={},(0,u.Z)(s,i.Yh.ERROR_DEFAULT,"(event.type:error OR event.type:default)"),(0,u.Z)(s,i.Yh.ERROR,"event.type:error"),(0,u.Z)(s,i.Yh.DEFAULT,"event.type:default"),(0,u.Z)(s,i.Yh.TRANSACTION,"event.type:transaction"),s),y={aggregations:["count","count_unique"],fields:["user"]},E=["avg","percentile","p50","p75","p95","p99","p100"],O=[].concat(E,["failure_rate","apdex","count"]);function T(e,t){return"custom"===e&&t===i.qz.ERRORS?y:{aggregations:"apdex"===e||"custom"===e?O:E,fields:["transaction.duration"],measurementKeys:Object.keys(a.r)}}Object.keys(a.r);var v={aggregations:O,fields:["transaction.duration"],measurementKeys:Object.keys(a.r)};function g(e){return{label:e,alertThreshold:"",actions:[]}}function S(){return{dataset:i.qz.ERRORS,eventTypes:[i.GM.ERROR],aggregate:m,query:"",timeWindow:1,triggers:[g("critical"),g("warning")],projects:[],environment:null,resolveThreshold:"",thresholdType:i.lT.ABOVE}}function _(e){var t,r=(0,c.A4)(e.query),n=r?c.Ey[r.source]:c.Ey.error;return p(p(p({},S()),n),{},{query:null!==(t=null==r?void 0:r.query)&&void 0!==t?t:e.query,aggregate:"transactions"===n.dataset?"p95(transaction.duration)":e.getYAxis(),environment:e.environment.length?e.environment[0]:null})}function b(e){var t=e.eventTypes,r=(0,o.Z)(e,l);return p(p({},S()),{},{eventTypes:[t]},r)}},"./app/views/alerts/incidentRules/presets.tsx":function(e,t,r){"use strict";r.d(t,{g:function(){return T},x:function(){return g}}),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var n=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.set.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./app/locale.tsx")),u=r("./app/utils/discover/types.tsx"),a=r("./app/utils/tokenizeSearch.tsx"),i=r("./app/views/alerts/utils/index.tsx"),c=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),l=(r("../node_modules/core-js/modules/es.number.constructor.js"),r("./app/utils/discover/eventView.tsx")),d=r("./app/utils/discover/fields.tsx"),p=r("./app/views/alerts/incidentRules/types.tsx"),m=["query"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e){var t,r=e.orgSlug,n=e.projects,s=e.incident,o=e.stats,u=e.extraQueryParams;if(!(n&&n.length&&s&&o))return"";var a="".concat(s.alertRule.timeWindow,"m"),f=(0,i.Eq)(o),j=f.start,y=f.end,E=R({id:void 0,name:s&&s.title||"",orderby:"-".concat((0,d.LY)(s.alertRule.aggregate)),yAxis:s.alertRule.aggregate,query:null!==(t=null==s?void 0:s.discoverQuery)&&void 0!==t?t:"",projects:n.filter((function(e){var t=e.slug;return s.projects.includes(t)})).map((function(e){var t=e.id;return Number(t)})),version:2,fields:s.alertRule.dataset===p.qz.ERRORS?["issue","count()","count_unique(user)"]:["transaction",s.alertRule.aggregate],start:j,end:y},u),O=l.ZP.fromSavedQuery(E).getResultsViewUrlTarget(r),T=O.query,v=(0,c.Z)(O,m);return R({query:R(R({},T),{},{interval:a})},v)}var y=r("./app/views/performance/transactionSummary/utils.tsx");function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T=[{name:(0,o.t)("Error count"),match:/^count\(\)/,validDataset:[p.qz.ERRORS],default:"count()",makeCtaParams:g},{name:(0,o.t)("Users affected"),match:/^count_unique\(tags\[sentry:user\]\)/,validDataset:[p.qz.ERRORS],default:"count_unique(tags[sentry:user])",makeCtaParams:g},{name:(0,o.t)("Latency"),match:/^(p[0-9]{2,3}|percentile\(transaction\.duration,[^)]+\)|avg\([^)]+\))/,validDataset:[p.qz.TRANSACTIONS],default:"percentile(transaction.duration, 0.95)",makeCtaParams:function(e){return v({opts:e,tooltip:(0,o.t)("Latency by Transaction")})}},{name:(0,o.t)("Apdex"),match:/^apdex\([0-9.]+\)/,validDataset:[p.qz.TRANSACTIONS],default:"apdex(300)",makeCtaParams:function(e){return v({opts:e,tooltip:(0,o.t)("Apdex by Transaction")})}},{name:(0,o.t)("Transaction Count"),match:/^count\(\)/,validDataset:[p.qz.TRANSACTIONS],default:"count()",makeCtaParams:function(e){return v({opts:e})}},{name:(0,o.t)("Failure rate"),match:/^failure_rate\(\)/,validDataset:[p.qz.TRANSACTIONS],default:"failure_rate()",makeCtaParams:function(e){var t,r,n=e.orgSlug,s=e.incident,i=e.projects,c=e.stats;if(!s||!c)return{to:"",buttonText:(0,o.t)("Incident details")};var l=null===(r=(0,a.aI)(null!==(t=s.discoverQuery)&&void 0!==t?t:"").getTagValues("transaction"))||void 0===r?void 0:r.find((function(e){return!e.includes("*")}));return{to:j({orgSlug:n,projects:i,incident:s,stats:c,extraQueryParams:void 0!==l?{fields:["transaction.status","count()"],orderby:"-count",display:u.DC.TOP5}:{fields:["transaction","failure_rate()"],orderby:"-failure_rate",display:u.DC.TOP5}}),buttonText:(0,o.t)("Open in Discover"),title:void 0===l?(0,o.t)("Failure rate by transaction"):void 0}}}];function v(e){var t,r,s=e.opts,c=s.orgSlug,l=s.projects,d=s.incident,p=s.stats,m=e.tooltip;if(!d||!p)return{to:"",buttonText:(0,o.t)("Incident details")};var f=null===(r=(0,a.aI)(null!==(t=d.discoverQuery)&&void 0!==t?t:"").getTagValues("transaction"))||void 0===r?void 0:r.find((function(e){return!e.includes("*")}));if(void 0!==f){var R=(0,i.Eq)(p);return{to:(0,y.e1)({orgSlug:c,transaction:f,projectID:l.filter((function(e){var t=e.slug;return d.projects.includes(t)})).map((function(e){return e.id})),query:O({},R)}),buttonText:(0,o.t)("View Transaction Summary"),title:f}}var E={fields:(0,n.Z)(new Set(["transaction","count()",d.alertRule.aggregate])),orderby:"-count",display:u.DC.TOP5};return{to:j({orgSlug:c,projects:l,incident:d,stats:p,extraQueryParams:E}),buttonText:(0,o.t)("Open in Discover"),title:m}}function g(e){var t=e.orgSlug,r=e.projects,n=e.incident,s=e.stats;if(!n)return{buttonText:(0,o.t)("Open in Discover"),to:""};var a={display:u.DC.TOP5};return{buttonText:(0,o.t)("Open in Discover"),to:j({orgSlug:t,projects:r,incident:n,stats:s,extraQueryParams:a})}}},"./app/views/alerts/incidentRules/types.tsx":function(e,t,r){"use strict";r.d(t,{lT:function(){return o},qz:function(){return u},GM:function(){return a},Yh:function(){return i},XH:function(){return c},Tb:function(){return l},Us:function(){return d},LO:function(){return R},Lm:function(){return f},hd:function(){return j}});var n,s,o,u,a,i,c,l,d,p=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),m=r("./app/locale.tsx");!function(e){e[e.ABOVE=0]="ABOVE",e[e.BELOW=1]="BELOW"}(o||(o={})),function(e){e.ERRORS="events",e.TRANSACTIONS="transactions"}(u||(u={})),function(e){e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction"}(a||(a={})),function(e){e.ERROR_DEFAULT="error_default",e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction"}(i||(i={})),function(e){e.SIX_HOURS="6h",e.ONE_DAY="1d",e.THREE_DAYS="3d",e.SEVEN_DAYS="10000m",e.FOURTEEN_DAYS="14d",e.THIRTY_DAYS="30d"}(c||(c={})),function(e){e[e.ONE_MINUTE=1]="ONE_MINUTE",e[e.FIVE_MINUTES=5]="FIVE_MINUTES",e[e.TEN_MINUTES=10]="TEN_MINUTES",e[e.FIFTEEN_MINUTES=15]="FIFTEEN_MINUTES",e[e.THIRTY_MINUTES=30]="THIRTY_MINUTES",e[e.ONE_HOUR=60]="ONE_HOUR",e[e.TWO_HOURS=120]="TWO_HOURS",e[e.FOUR_HOURS=240]="FOUR_HOURS",e[e.ONE_DAY=1440]="ONE_DAY"}(l||(l={})),function(e){e.EMAIL="email",e.SLACK="slack",e.PAGERDUTY="pagerduty",e.MSTEAMS="msteams",e.SENTRY_APP="sentry_app"}(d||(d={}));var f,R=(n={},(0,p.Z)(n,d.EMAIL,(0,m.t)("Email")),(0,p.Z)(n,d.SLACK,(0,m.t)("Slack")),(0,p.Z)(n,d.PAGERDUTY,(0,m.t)("Pagerduty")),(0,p.Z)(n,d.MSTEAMS,(0,m.t)("MS Teams")),(0,p.Z)(n,d.SENTRY_APP,(0,m.t)("Notification")),n);!function(e){e.SPECIFIC="specific",e.USER="user",e.TEAM="team",e.SENTRY_APP="sentry_app"}(f||(f={}));var j=(s={},(0,p.Z)(s,f.USER,(0,m.t)("Member")),(0,p.Z)(s,f.TEAM,(0,m.t)("Team")),s)},"./app/views/alerts/types.tsx":function(e,t,r){"use strict";var n,s,o,u;r.d(t,{lm:function(){return n},vt:function(){return s},Xn:function(){return o},Gb:function(){return u}}),function(e){e[e.CREATED=0]="CREATED",e[e.DETECTED=1]="DETECTED",e[e.STATUS_CHANGE=2]="STATUS_CHANGE",e[e.COMMENT=3]="COMMENT",e[e.STARTED=4]="STARTED"}(n||(n={})),function(e){e[e.OPENED=1]="OPENED",e[e.CLOSED=2]="CLOSED",e[e.WARNING=10]="WARNING",e[e.CRITICAL=20]="CRITICAL"}(s||(s={})),function(e){e[e.MANUAL=1]="MANUAL",e[e.RULE_UPDATED=2]="RULE_UPDATED",e[e.RULE_TRIGGERED=3]="RULE_TRIGGERED"}(o||(o={})),function(e){e[e.PENDING=0]="PENDING",e[e.SNAPSHOT=4]="SNAPSHOT",e[e.DISABLED=5]="DISABLED"}(u||(u={}))},"./app/views/alerts/utils/index.tsx":function(e,t,r){"use strict";r.d(t,{dX:function(){return m},hl:function(){return f},yN:function(){return R},KL:function(){return j},Mg:function(){return y},Nf:function(){return E},FJ:function(){return O},Un:function(){return T},Eq:function(){return v},Gm:function(){return g},CM:function(){return S},Ey:function(){return _},KC:function(){return b},A4:function(){return A}}),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var n,s,o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),u=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.string.match.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.number.constructor.js"),r("../node_modules/core-js/modules/es.array.join.js"),r("../node_modules/core-js/modules/es.array.sort.js"),r("../node_modules/core-js/modules/es.array.slice.js"),r("../node_modules/core-js/modules/es.string.trim.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("./app/api.tsx")),a=r("./app/locale.tsx"),i=r("./app/utils/dates.tsx"),c=(r("./app/utils/discover/eventView.tsx"),r("./app/utils/discover/fields.tsx"),r("./app/views/alerts/incidentRules/presets.tsx")),l=r("./app/views/alerts/incidentRules/types.tsx"),d=r("./app/views/alerts/types.tsx"),p=new u.KU;function m(e,t){return p.requestPromise("/organizations/".concat(e,"/alert-rules/").concat(t,"/"))}function f(e,t,r,n){return p.requestPromise("/organizations/".concat(e,"/incidents/"),{query:{alertRule:t,includeSnapshots:!0,start:r,end:n,expand:["activities","seen_by","original_alert_rule"]}})}function R(e,t,r){return e.requestPromise("/organizations/".concat(t,"/incidents/").concat(r,"/"))}function j(e,t,r){return e.requestPromise("/organizations/".concat(t,"/incidents/").concat(r,"/stats/"))}function y(e,t,r,n){var s=n?"POST":"DELETE";return e.requestPromise("/organizations/".concat(t,"/incidents/").concat(r,"/subscriptions/"),{method:s})}function E(e,t,r,n){return e.requestPromise("/organizations/".concat(t,"/incidents/").concat(r,"/"),{method:"PUT",data:{status:n}})}function O(e){switch(e.status){case d.vt.CLOSED:return!1;default:return!0}}function T(e){var t,r,n=null==e?void 0:e.alertRule,s=null!==(t=null==n?void 0:n.aggregate)&&void 0!==t?t:"",o=null!==(r=null==n?void 0:n.dataset)&&void 0!==r?r:l.qz.ERRORS;return c.g.find((function(e){return e.validDataset.includes(o)&&e.match.test(s)}))}function v(e){return{start:(0,i.v5)(1e3*e.eventStats.data[0][0]),end:(0,i.v5)(1e3*e.eventStats.data[e.eventStats.data.length-1][0])}}function g(e){return!e.hasOwnProperty("triggers")}var S=(n={},(0,o.Z)(n,l.qz.ERRORS,(0,a.t)("Errors")),(0,o.Z)(n,l.qz.TRANSACTIONS,(0,a.t)("Transactions")),(0,o.Z)(n,l.Yh.ERROR_DEFAULT,(0,a.t)("event.type:error OR event.type:default")),(0,o.Z)(n,l.Yh.ERROR,(0,a.t)("event.type:error")),(0,o.Z)(n,l.Yh.DEFAULT,(0,a.t)("event.type:default")),(0,o.Z)(n,l.Yh.TRANSACTION,(0,a.t)("event.type:transaction")),n),_=(s={},(0,o.Z)(s,l.Yh.ERROR_DEFAULT,{dataset:l.qz.ERRORS,eventTypes:[l.GM.ERROR,l.GM.DEFAULT]}),(0,o.Z)(s,l.Yh.ERROR,{dataset:l.qz.ERRORS,eventTypes:[l.GM.ERROR]}),(0,o.Z)(s,l.Yh.DEFAULT,{dataset:l.qz.ERRORS,eventTypes:[l.GM.DEFAULT]}),(0,o.Z)(s,l.Yh.TRANSACTION,{dataset:l.qz.TRANSACTIONS,eventTypes:[l.GM.TRANSACTION]}),s);function b(e,t){return e===l.qz.TRANSACTIONS?l.Yh.TRANSACTION:t?t.includes(l.GM.DEFAULT)&&t.includes(l.GM.ERROR)?l.Yh.ERROR_DEFAULT:t.includes(l.GM.DEFAULT)?l.Yh.DEFAULT:l.Yh.ERROR:l.Yh.ERROR}function A(e){var t=e.match(/\(?\bevent\.type:(error|default|transaction)\)?\WOR\W\(?event\.type:(error|default|transaction)\)?/i);return t?"default,error"!==t.slice(1,3).sort().join(",")?null:{source:l.Yh.ERROR_DEFAULT,query:e.replace(t[0],"").trim()}:(t=e.match(/(^|\s)event\.type:(error|default|transaction)/i))&&l.Yh[t[2].toUpperCase()]?{source:l.Yh[t[2].toUpperCase()],query:e.replace(t[0],"").trim()}:null}}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_incidentRules_constants_tsx.efa8b99291eb7691eeaf1809dde41da3.js.map