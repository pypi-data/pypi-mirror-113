(self.webpackChunk=self.webpackChunk||[]).push([["app_views_organizationGroupDetails_grouping_index_tsx"],{"./app/views/organizationGroupDetails/grouping/index.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return oe}});var r=n("./app/components/acl/feature.tsx"),o=n("./app/components/alert.tsx"),s=n("./app/locale.tsx"),i=n("./app/styles/organization.tsx"),a=n("./app/utils/withOrganization.tsx"),u=(n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js")),l=n("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),c=n("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),d=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=n("../node_modules/@babel/runtime/regenerator/index.js"),m=n.n(p),g=(n("../node_modules/core-js/modules/es.number.constructor.js"),n("../node_modules/core-js/modules/es.regexp.exec.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/core-js/modules/es.array.map.js"),n("../node_modules/core-js/modules/es.array.concat.js"),n("../node_modules/react/index.js")),f=n("../node_modules/lodash/debounce.js"),h=n.n(f),v=n("./app/components/loadingIndicator.tsx"),b=n("./app/components/pagination/index.tsx"),Z=n("./app/styles/space.tsx"),x=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function y(e){var t=e.caption;return(0,x.tZ)(j,{children:t})}y.displayName="PaginationCaption";var w=y,j=(0,d.Z)("span",{target:"e1apkaoh0"})("color:",(function(e){return e.theme.subText}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";margin-right:",(0,Z.Z)(2),";"),_=n("./app/components/panels/index.tsx"),k=n("./app/constants/index.tsx"),z=n("./app/utils.tsx"),O=n("./app/utils/parseLinkHeader.tsx"),S=n("./app/utils/withApi.tsx"),T=n("./app/views/settings/components/forms/controls/rangeSlider.tsx"),E=(n("../node_modules/core-js/modules/es.string.search.js"),n("./app/components/button.tsx")),N=n("./app/components/loadingError.tsx"),P=n("./app/views/settings/components/emptyMessage.tsx");function C(e){var t,n=e.error,r=e.groupId,i=e.onRetry;if("string"==typeof n)return(0,x.tZ)(o.Z,{type:"warning",children:n});if(403===n.status&&null!==(t=n.responseJSON)&&void 0!==t&&t.detail){var a,u=n.responseJSON.detail,l=u.code,c=u.message,d=function(e){switch(e){case"merged_issues":return{title:(0,s.t)("An issue can only contain one fingerprint"),subTitle:(0,s.t)("This issue needs to be fully unmerged before grouping levels can be shown")};case"missing_feature":return{title:(0,s.t)("This project does not have the grouping tree feature")};case"no_events":return{title:(0,s.t)("This issue has no events")};case"not_hierarchical":return{title:(0,s.t)("This issue does not have hierarchical grouping")};default:return}}(l);return(0,x.tZ)(_.s_,{children:(0,x.tZ)(P.Z,{size:"large",title:null!==(a=null==d?void 0:d.title)&&void 0!==a?a:c,description:null==d?void 0:d.subTitle,action:"merged_issues"===l?(0,x.tZ)(E.ZP,{priority:"primary",to:"/organizations/sentry/issues/".concat(r,"/merged/?").concat(location.search),children:(0,s.t)("Unmerge issue")}):void 0})})}return(0,x.tZ)(N.Z,{message:(0,s.t)("Unable to load grouping levels, please try again later"),onRetry:i})}C.displayName="ErrorMessage";var B=C,D=n("./app/components/eventOrGroupHeader.tsx"),I=n("./app/components/timeSince.tsx"),q=n("./app/icons/index.tsx");function A(e){var t=e.sampleEvent,n=e.eventCount,r=e.organization;return(0,x.BX)(g.Fragment,{children:[(0,x.BX)(X,{children:[(0,x.tZ)(D.Z,{data:t,organization:r,hideIcons:!0,hideLevel:!0}),(0,x.tZ)(R,{children:(0,x.BX)(L,{children:[(0,x.tZ)(H,{size:"11px"}),(0,x.tZ)(I.Z,{date:t.dateCreated,suffix:(0,s.t)("old")})]})})]}),(0,x.tZ)(M,{children:n})]})}A.displayName="NewIssue";var G=A,X=(0,d.Z)("div",{target:"ebu51d34"})({name:"1eiwmge",styles:"overflow:hidden;line-height:1.1"}),R=(0,d.Z)("div",{target:"ebu51d33"})("display:grid;grid-auto-flow:column;grid-gap:",(0,Z.Z)(2),";justify-content:flex-start;"),L=(0,d.Z)("div",{target:"ebu51d32"})("display:grid;grid-gap:",(0,Z.Z)(.5),";grid-template-columns:max-content 1fr;align-items:center;font-size:",(function(e){return e.theme.fontSizeSmall}),";"),M=(0,d.Z)("div",{target:"ebu51d31"})({name:"ygmdwl",styles:"align-items:center;line-height:1.1"}),H=(0,d.Z)(q.jo,{target:"ebu51d30"})("color:",(function(e){return e.theme.subText}),";");function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e){var t,n,r=e.api,o=e.groupId,i=e.location,a=e.organization,u=e.router,d=i.query,p=d.cursor,f=d.level,b=(0,g.useState)(!1),Z=(0,c.Z)(b,2),y=Z[0],j=Z[1],_=(0,g.useState)(!1),S=(0,c.Z)(_,2),T=S[0],E=S[1],N=(0,g.useState)(void 0),P=(0,c.Z)(N,2),C=P[0],D=P[1],I=(0,g.useState)([]),q=(0,c.Z)(I,2),A=q[0],X=q[1],R=(0,g.useState)(void 0),L=(0,c.Z)(R,2),M=L[0],H=L[1],J=(0,g.useState)([]),F=(0,c.Z)(J,2),K=F[0],re=F[1],oe=(0,g.useState)(""),se=(0,c.Z)(oe,2),ie=se[0],ae=se[1];(0,g.useEffect)((function(){le()}),[]),(0,g.useEffect)((function(){!function(){if(A.length)if((0,z.ri)(f)){if(!(0,z.ri)(A[f]))return void D((0,s.t)("The level you were looking for was not found."));if(f===M)return;H(f)}else A.length>1?H(Number(A[1].id)):H(Number(A[0].id))}()}),[A]),(0,g.useEffect)((function(){(0,z.ri)(M)&&f!==M&&u.replace({pathname:i.pathname,query:U(U({},i.query),{},{cursor:void 0,level:M})})}),[M]),(0,g.useEffect)((function(){!function(){de.apply(this,arguments)}()}),[M,p]);var ue=h()((function(e){H(Number(e))}),k.Dk);function le(){return ce.apply(this,arguments)}function ce(){return(ce=(0,l.Z)(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),D(void 0),e.prev=2,e.next=5,r.requestPromise("/issues/".concat(o,"/grouping/levels/"));case 5:t=e.sent,j(!1),X(t.levels),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),j(!1),D(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function de(){return(de=(0,l.Z)(m().mark((function e(){var t,n,s,a,u,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A.length&&(0,z.ri)(M)){e.next=2;break}return e.abrupt("return");case 2:return E(!0),D(void 0),e.prev=4,e.next=7,r.requestPromise("/issues/".concat(o,"/grouping/levels/").concat(M,"/new-issues/"),{method:"GET",includeAllArgs:!0,query:U(U({},i.query),{},{per_page:10})});case 7:n=e.sent,s=(0,c.Z)(n,3),a=s[0],u=s[2],l=u&&(null===(t=u.getResponseHeader)||void 0===t?void 0:t.call(u,"Link")),ae(null!=l?l:""),re(Array.isArray(a)?a:[a]),E(!1),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),E(!1),D(e.t0);case 21:case"end":return e.stop()}}),e,null,[[4,17]])})))).apply(this,arguments)}if(y)return(0,x.tZ)(v.Z,{});if(C)return(0,x.tZ)(B,{onRetry:le,groupId:o,error:C});if(!K.length)return(0,x.tZ)(v.Z,{});var pe=(0,O.Z)(ie),me=(null===(t=pe.previous)||void 0===t?void 0:t.results)||(null===(n=pe.next)||void 0===n?void 0:n.results),ge=K.length;return(0,x.BX)(V,{children:[(0,x.tZ)(Y,{children:(0,s.t)("This issue is an aggregate of multiple events that sentry determined originate from the same root-cause. Use this page to explore more detailed groupings that exist within this issue.")}),(0,x.BX)(Q,{children:[(0,x.BX)(te,{children:[(0,s.t)("Fewer issues"),(0,x.tZ)(ne,{name:"grouping-level",allowedValues:A.map((function(e){return Number(e.id)})),value:null!=M?M:0,onChange:ue,showLabel:!1}),(0,s.t)("More issues")]}),(0,x.BX)(ee,{isReloading:T,children:[(0,x.tZ)(W,{headers:["",(0,s.t)("Events")],children:K.map((function(e){var t=e.hash,n=e.title,r=e.metadata,o=e.latestEvent,s=e.eventCount;return(0,x.tZ)(G,{sampleEvent:U(U({},o),{},{metadata:r||o.metadata,title:n||o.title}),eventCount:s,organization:a},t)}))}),(0,x.tZ)($,{pageLinks:ie,disabled:T,caption:(0,x.tZ)(w,{caption:(0,s._N)("Showing [current] of [total] [result]",{result:me?(0,s.t)("results"):(0,s.tn)("result","results",ge),current:ge,total:me?"".concat(ge,"+"):ge})})})]})]})]})}F.displayName="Grouping";var K=(0,S.Z)(F),V=(0,d.Z)("div",{target:"e1m7ctwt7"})("flex:1;display:grid;align-content:flex-start;margin:-",(0,Z.Z)(3)," -",(0,Z.Z)(4),";padding:",(0,Z.Z)(3)," ",(0,Z.Z)(4),";"),Y=(0,d.Z)("p",{target:"e1m7ctwt6"})("&&{margin-bottom:",(0,Z.Z)(2),";}"),Q=(0,d.Z)("div",{target:"e1m7ctwt5"})("display:grid;grid-gap:",(0,Z.Z)(3),";"),W=(0,d.Z)(_.KB,{target:"e1m7ctwt4"})("grid-template-columns:1fr minmax(60px, auto);>*{padding:",(0,Z.Z)(1.5)," ",(0,Z.Z)(2),";:nth-child(-n + 2){padding:",(0,Z.Z)(2),";}:nth-child(2n){display:flex;text-align:right;justify-content:flex-end;}}@media (min-width: ",(function(e){return e.theme.breakpoints[3]}),"){grid-template-columns:1fr minmax(80px, auto);}"),$=(0,d.Z)(b.Z,{target:"e1m7ctwt3"})({name:"1i9vogi",styles:"margin-top:0"}),ee=(0,d.Z)("div",{target:"e1m7ctwt2"})((function(e){return e.isReloading&&"\n      ".concat(W,", ").concat($," {\n        opacity: 0.5;\n        pointer-events: none;\n      }\n    ")}),";"),te=(0,d.Z)("div",{target:"e1m7ctwt1"})("display:grid;grid-gap:",(0,Z.Z)(1.5),";grid-template-columns:max-content max-content;justify-content:space-between;align-items:flex-start;position:relative;font-size:",(function(e){return e.theme.fontSizeMedium}),";color:",(function(e){return e.theme.subText}),";padding-bottom:",(0,Z.Z)(2),";@media (min-width: 700px){grid-template-columns:max-content minmax(270px, auto) max-content;align-items:center;justify-content:flex-start;padding-bottom:0;}"),ne=(0,d.Z)(T.Z,{target:"e1m7ctwt0"})(T.i,"{background:transparent;margin-top:0;margin-bottom:0;::-ms-thumb{box-shadow:0 0 0 3px ",(function(e){return e.theme.backgroundSecondary}),";}::-moz-range-thumb{box-shadow:0 0 0 3px ",(function(e){return e.theme.backgroundSecondary}),";}::-webkit-slider-thumb{box-shadow:0 0 0 3px ",(function(e){return e.theme.backgroundSecondary}),";}}position:absolute;bottom:0;left:",(0,Z.Z)(1.5),";right:",(0,Z.Z)(1.5),";@media (min-width: 700px){position:static;left:auto;right:auto;}");function re(e){var t=e.organization,n=e.params,a=e.location,u=e.router;return(0,x.tZ)(r.Z,{features:["grouping-tree-ui"],organization:t,renderDisabled:function(){return(0,x.tZ)(i.JH,{children:(0,x.tZ)(o.Z,{type:"warning",children:(0,s.t)("You don't have access to this feature")})})},children:(0,x.tZ)(K,{location:a,groupId:n.groupId,organization:t,router:u})})}re.displayName="GroupingContainer";var oe=(0,a.Z)(re)}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_grouping_index_tsx.e773da689963d70a06775ce0345918bc.js.map