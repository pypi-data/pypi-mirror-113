(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_organizationRelay_index_tsx"],{"./app/components/confirmDelete.tsx":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=r("../node_modules/react/index.js"),i=r("./app/components/alert.tsx"),a=r("./app/components/confirm.tsx"),l=r("./app/locale.tsx"),c=r("./app/views/settings/components/forms/controls/input.tsx"),u=r("./app/views/settings/components/forms/field/index.tsx"),d=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),p=["message","confirmInput"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=function(e){var t=e.message,r=e.confirmInput,n=(0,s.Z)(e,p);return(0,d.tZ)(a.Z,y(y({},n),{},{bypass:!1,disableConfirmButton:!0,renderMessage:function(e){var n=e.disableConfirmButton;return(0,d.BX)(o.Fragment,{children:[(0,d.tZ)(i.Z,{type:"error",children:t}),(0,d.tZ)(u.Z,{flexibleControlStateSize:!0,inline:!1,label:(0,l.t)("Please enter %s to confirm the deletion",(0,d.tZ)("code",{children:r})),children:(0,d.tZ)(c.Z,{type:"text",placeholder:r,onChange:function(e){return n(e.target.value!==r)}})})]})}}))};f.displayName="ConfirmDelete",t.Z=f},"./app/views/asyncView.tsx":function(e,t,r){"use strict";r.d(t,{Z:function(){return p}}),r("../node_modules/core-js/modules/es.reflect.construct.js");var n=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=(r("../node_modules/react/index.js"),r("../node_modules/react-document-title/index.js")),c=r.n(l),u=r("./app/components/asyncComponent.tsx"),d=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var p=function(e){(0,o.Z)(u,e);var t,r,l=(t=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,a.Z)(t);if(r){var s=(0,a.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function u(){return(0,n.Z)(this,u),l.apply(this,arguments)}return(0,s.Z)(u,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return(0,d.tZ)(c(),{title:"".concat(e?"".concat(e," - "):"","Sentry"),children:this.renderComponent()})}}]),u}(u.Z);p.displayName="AsyncView"},"./app/views/settings/components/forms/controls/textarea.tsx":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/react/index.js")),a=r("../node_modules/react-autosize-textarea/lib/index.js"),l=r("../node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js"),c=r("./app/styles/input.tsx"),u=r("./app/styles/space.tsx"),d=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),p=["autosize","rows","maxRows"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=i.forwardRef((function(e,t){var r=e.autosize,n=e.rows,o=e.maxRows,i=(0,s.Z)(e,p);return r?(0,d.tZ)(a.Z,y(y({},i),{},{async:!0,ref:t,rows:n||2,maxRows:o})):(0,d.tZ)("textarea",y({ref:t},i))}));f.displayName="TextAreaControl";var h=(0,o.Z)(f,{shouldForwardProp:function(e){return["autosize","rows","maxRows"].includes(e)||(0,l.Z)(e)},target:"elxy32p0"})(c.T,";min-height:40px;padding:calc(",(0,u.Z)(1)," - 1px) ",(0,u.Z)(1),";line-height:1.5em;",(function(e){return e.autosize&&"\n      height: auto;\n      padding: calc(".concat((0,u.Z)(1)," - 2px) ").concat((0,u.Z)(1),";\n      line-height: 1.6em;\n    ")}),";");t.Z=h},"./app/views/settings/organization/permissionAlert.tsx":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=(r("../node_modules/react/index.js"),r("./app/components/acl/access.tsx")),i=r("./app/components/alert.tsx"),a=r("./app/icons/index.tsx"),l=r("./app/locale.tsx"),c=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),u=["access"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=function(e){var t=e.access,r=void 0===t?["org:write"]:t,n=(0,s.Z)(e,u);return(0,c.tZ)(o.Z,{access:r,children:function(e){return!e.hasAccess&&(0,c.tZ)(i.Z,p(p({type:"warning",icon:(0,c.tZ)(a.FC,{size:"sm"})},n),{},{children:(0,l.t)("These settings can only be edited by users with the organization owner or manager role.")}))}})};m.displayName="PermissionAlert",t.Z=m},"./app/views/settings/organizationRelay/index.tsx":function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Ge}}),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=r("./app/components/acl/feature.tsx"),i=r("./app/components/acl/featureDisabled.tsx"),a=r("./app/components/panels/index.tsx"),l=r("./app/locale.tsx"),c=r("./app/utils/withOrganization.tsx"),u=(r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js")),d=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),p=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),m=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),y=r("../node_modules/@babel/runtime/helpers/esm/get.js"),f=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),h=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),b=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),g=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),v=r("../node_modules/@babel/runtime/regenerator/index.js"),j=r.n(v),Z=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/react/index.js")),w=r("../node_modules/lodash/isEqual.js"),O=r.n(w),x=r("../node_modules/lodash/omit.js"),k=r.n(x),_=r("./app/actionCreators/indicator.tsx"),P=r("./app/actionCreators/modal.tsx"),R=r("./app/actionCreators/organizations.tsx"),S=r("./app/components/button.tsx"),D=r("./app/components/links/externalLink.tsx"),C=r("./app/icons/index.tsx"),z=r("./app/views/asyncView.tsx"),K=r("./app/views/settings/components/settingsPageHeader.tsx"),B=r("./app/views/settings/components/text/textBlock.tsx"),F=r("./app/views/settings/organization/permissionAlert.tsx"),E=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),N=(r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./app/components/list/index.tsx")),V=r("./app/styles/space.tsx"),A=(r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/core-js/modules/es.symbol.description.js"),r("./app/views/settings/components/forms/controls/input.tsx")),T=r("./app/views/settings/components/forms/controls/textarea.tsx"),X=r("./app/views/settings/components/forms/field/index.tsx"),M=r("./app/views/settings/components/forms/field/fieldHelp.tsx"),L=r("./app/views/settings/components/forms/textCopyInput.tsx"),q=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),I=function(e){var t,r=e.values,n=e.onChange,s=e.errors,o=e.onValidate,i=e.isFormValid,a=e.disables,c=e.onValidateKey,d=e.onSave,p=function(e){return function(t){n(e,t.target.value)}};return(0,q.BX)("form",{onSubmit:function(){i&&d()},id:"relay-form",children:[(0,q.tZ)(X.Z,{flexibleControlStateSize:!0,label:(0,l.t)("Display Name"),error:s.name,inline:!1,stacked:!0,required:!0,children:(0,q.tZ)(A.Z,{type:"text",name:"name",placeholder:(0,l.t)("Display Name"),onChange:p("name"),value:r.name,onBlur:o("name"),disabled:a.name})}),a.publicKey?(0,q.tZ)(X.Z,{flexibleControlStateSize:!0,label:(0,l.t)("Public Key"),inline:!1,stacked:!0,children:(0,q.tZ)(L.Z,{onCopy:(t=r.publicKey,(0,u.Z)(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),children:r.publicKey})}):(0,q.BX)(U,{children:[(0,q.tZ)(H,{label:(0,l.t)("Public Key"),error:s.publicKey,flexibleControlStateSize:!0,inline:!1,stacked:!0,required:!0,children:(0,q.tZ)(A.Z,{type:"text",name:"publicKey",placeholder:(0,l.t)("Public Key"),onChange:p("publicKey"),value:r.publicKey,onBlur:c})}),(0,q.tZ)(M.Z,{children:(0,l.t)("Only enter the Public Key value from your credentials file. Never share the Secret key with Sentry or any third party")})]}),(0,q.tZ)(X.Z,{flexibleControlStateSize:!0,label:(0,l.t)("Description"),inline:!1,stacked:!0,children:(0,q.tZ)(T.Z,{name:"description",placeholder:(0,l.t)("Description"),onChange:p("description"),value:r.description,disabled:a.description,autosize:!0})})]})};I.displayName="Form";var W=I,U=(0,g.Z)("div",{target:"e1v36iaq1"})("padding-bottom:",(0,V.Z)(2),";"),H=(0,g.Z)(X.Z,{target:"e1v36iaq0"})({name:"18g08sj",styles:"padding-bottom:0"});r("../node_modules/core-js/modules/es.string.starts-with.js");var G=function(e){var t,r=null===(t=e.responseJSON)||void 0===t?void 0:t.trustedRelays[0];return r?"Bad structure received for Trusted Relays"===r?{type:"bad-structure",message:(0,l.t)("An invalid structure was sent.")}:"Relay key info with missing name in Trusted Relays"===r?{type:"missing-name",message:(0,l.t)("Field Required")}:"Relay key info with empty name in Trusted Relays"===r?{type:"empty-name",message:(0,l.t)("Invalid Field")}:r.startsWith("Missing public key for Relay key info with name:")?{type:"missing-key",message:(0,l.t)("Field Required")}:r.startsWith("Invalid public key for relay key info with name:")?{type:"invalid-key",message:(0,l.t)("Invalid Relay key")}:r.startsWith("Duplicated key in Trusted Relays:")?{type:"duplicated-key",message:(0,l.t)("Relay key already taken")}:{type:"unknown",message:(0,l.t)("An unknown error occurred while saving Relay public key.")}:{type:"unknown",message:(0,l.t)("An unknown error occurred while saving Relay public key.")}},Y=r("./app/components/buttonBar.tsx"),J=function(e){var t=e.title,r=e.onSave,n=e.content,s=e.disabled,o=e.Header,i=e.Body,a=e.Footer,c=e.closeModal,u=e.btnSaveLabel,d=void 0===u?(0,l.t)("Save"):u;return(0,q.BX)(Z.Fragment,{children:[(0,q.tZ)(o,{closeButton:!0,children:t}),(0,q.tZ)(i,{children:n}),(0,q.tZ)(a,{children:(0,q.BX)(Y.ZP,{gap:1.5,children:[(0,q.tZ)(S.ZP,{onClick:c,children:(0,l.t)("Cancel")}),(0,q.tZ)(S.ZP,{onClick:function(e){e.preventDefault(),r()},disabled:s,type:"submit",priority:"primary",form:"relay-form",children:d})]})})]})};J.displayName="Modal";var $=J;function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te=function(e){(0,f.Z)(o,e);var t,r,s=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,b.Z)(t);if(r){var s=(0,b.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,h.Z)(this,e)});function o(){var e;(0,d.Z)(this,o);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=s.call.apply(s,[this].concat(r)),(0,n.Z)((0,m.Z)(e),"state",e.getDefaultState()),(0,n.Z)((0,m.Z)(e),"handleChange",(function(t,r){e.setState((function(e){return{values:ee(ee({},e.values),{},(0,n.Z)({},t,r)),errors:k()(e.errors,t)}}))})),(0,n.Z)((0,m.Z)(e),"handleSave",(0,u.Z)(j().mark((function t(){var r,n,s,o,i,a,l;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.onSubmitSuccess,s=r.closeModal,o=r.orgSlug,i=r.api,a=e.getData().trustedRelays.map((function(e){return k()(e,["created","lastModified"])})),t.prev=2,t.next=5,i.requestPromise("/organizations/".concat(o,"/"),{method:"PUT",data:{trustedRelays:a}});case 5:l=t.sent,n(l),s(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),e.convertErrorXhrResponse(G(t.t0));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))),(0,n.Z)((0,m.Z)(e),"handleValidate",(function(t){return function(){var r=!e.state.values[t].replace(/\s/g,""),s=e.state.errors[t];r&&s||(!r||s?!r&&s&&e.clearError(t):e.setState((function(e){return{errors:ee(ee({},e.errors),{},(0,n.Z)({},t,(0,l.t)("Field Required")))}})))}})),(0,n.Z)((0,m.Z)(e),"handleValidateKey",(function(){var t=e.props.savedRelays,r=e.state,n=r.values,s=r.errors;!t.find((function(e){return e.publicKey===n.publicKey}))||s.publicKey?(s.publicKey&&e.setState({errors:k()(s,"publicKey")}),e.handleValidate("publicKey")()):e.setState({errors:ee(ee({},s),{},{publicKey:(0,l.t)("Relay key already taken")})})})),e}return(0,p.Z)(o,[{key:"componentDidMount",value:function(){this.validateForm()}},{key:"componentDidUpdate",value:function(e,t){O()(t.values,this.state.values)||this.validateForm(),!O()(t.errors,this.state.errors)&&Object.keys(this.state.errors).length>0&&this.setValidForm(!1)}},{key:"getDefaultState",value:function(){return{values:{name:"",publicKey:"",description:""},requiredValues:["name","publicKey"],errors:{},disables:{},isFormValid:!1,title:this.getTitle()}}},{key:"getTitle",value:function(){return""}},{key:"getData",value:function(){throw new Error("Not implemented")}},{key:"getBtnSaveLabel",value:function(){}},{key:"setValidForm",value:function(e){this.setState({isFormValid:e})}},{key:"validateForm",value:function(){var e=this.state,t=e.values,r=e.requiredValues,n=e.errors,s=r.every((function(e){return!!t[e].replace(/\s/g,"")&&!n[e]}));this.setValidForm(s)}},{key:"clearError",value:function(e){this.setState((function(t){return{errors:k()(t.errors,e)}}))}},{key:"convertErrorXhrResponse",value:function(e){switch(e.type){case"invalid-key":case"missing-key":this.setState((function(t){return{errors:ee(ee({},t.errors),{},{publicKey:e.message})}}));break;case"empty-name":case"missing-name":this.setState((function(t){return{errors:ee(ee({},t.errors),{},{name:e.message})}}));break;default:(0,_.Iw)(e.message)}}},{key:"getForm",value:function(){var e=this.state,t=e.values,r=e.errors,n=e.disables,s=e.isFormValid;return(0,q.tZ)(W,{isFormValid:s,onSave:this.handleSave,onChange:this.handleChange,onValidate:this.handleValidate,onValidateKey:this.handleValidateKey,errors:r,values:t,disables:n})}},{key:"getContent",value:function(){return this.getForm()}},{key:"render",value:function(){var e=this.state,t=e.title,r=e.isFormValid,n=this.getBtnSaveLabel(),s=this.getContent();return(0,q.tZ)($,ee(ee({},this.props),{},{title:t,onSave:this.handleSave,btnSaveLabel:n,disabled:!r,content:s}))}}]),o}(Z.Component);te.displayName="DialogManager";var re=te,ne=r("./app/components/list/listItem.tsx"),se=(0,g.Z)((function(e){var t=e.title,r=e.subtitle,n=e.children,s=e.className;return(0,q.BX)(ne.Z,{className:s,children:[t,r&&(0,q.tZ)("small",{children:r}),(0,q.tZ)("div",{children:n})]})}),{target:"e1jgkchl0"})("display:grid;grid-gap:",(0,V.Z)(1.5),";"),oe=function(e){var t=e.command;return(0,q.BX)(ae,{children:[(0,q.tZ)(le,{children:"$"}),t]})};oe.displayName="Terminal";var ie=oe,ae=(0,g.Z)("div",{target:"e15plznr1"})("background:",(function(e){return e.theme.gray500}),";padding:",(0,V.Z)(1.5)," ",(0,V.Z)(3),";font-family:",(function(e){return e.theme.text.familyMono}),";color:",(function(e){return e.theme.white}),";border-radius:",(function(e){return e.theme.borderRadius}),";display:grid;grid-template-columns:max-content 1fr;grid-gap:",(0,V.Z)(.75),";"),le=(0,g.Z)("div",{target:"e15plznr0"})("color:",(function(e){return e.theme.gray300}),";");var ce=function(e){(0,f.Z)(s,e);var t,r,n=(t=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,b.Z)(t);if(r){var s=(0,b.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,h.Z)(this,e)});function s(){return(0,d.Z)(this,s),n.apply(this,arguments)}return(0,p.Z)(s,[{key:"getTitle",value:function(){return(0,l.t)("Register Key")}},{key:"getBtnSaveLabel",value:function(){return(0,l.t)("Register")}},{key:"getData",value:function(){var e=this.props.savedRelays;return{trustedRelays:[].concat((0,E.Z)(e),[this.state.values])}}},{key:"getContent",value:function(){return(0,q.BX)(ue,{symbol:"colored-numeric",children:[(0,q.tZ)(se,{title:(0,l._N)("Initialize the configuration. [link: Learn how]",{link:(0,q.tZ)(D.Z,{href:"https://docs.sentry.io/product/relay/getting-started/#initializing-configuration"})}),subtitle:(0,l.t)("Within your terminal:"),children:(0,q.tZ)(ie,{command:"relay config init"})}),(0,q.tZ)(se,{title:(0,l._N)("Go to the file [jsonFile: credentials.json] to find the public key and enter it below.",{jsonFile:(0,q.tZ)(D.Z,{href:"https://docs.sentry.io/product/relay/getting-started/#registering-relay-with-sentry"})}),children:(0,y.Z)((0,b.Z)(s.prototype),"getForm",this).call(this)})]})}}]),s}(re),ue=(0,g.Z)(N.Z,{target:"e1d8ehcl0"})("display:grid;grid-gap:",(0,V.Z)(3),";");function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me=function(e){(0,f.Z)(s,e);var t,r,n=(t=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,b.Z)(t);if(r){var s=(0,b.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,h.Z)(this,e)});function s(){return(0,d.Z)(this,s),n.apply(this,arguments)}return(0,p.Z)(s,[{key:"getDefaultState",value:function(){return pe(pe({},(0,y.Z)((0,b.Z)(s.prototype),"getDefaultState",this).call(this)),{},{values:{name:this.props.relay.name,publicKey:this.props.relay.publicKey,description:this.props.relay.description||""},disables:{publicKey:!0}})}},{key:"getTitle",value:function(){return(0,l.t)("Edit Key")}},{key:"getData",value:function(){var e=this.props.savedRelays,t=this.state.values;return{trustedRelays:e.map((function(e){return e.publicKey===t.publicKey?t:e}))}}}]),s}(re),ye=r("./app/views/settings/components/emptyMessage.tsx"),fe=function(){return(0,q.tZ)(a.s_,{children:(0,q.tZ)(ye.Z,{children:(0,l.t)("No Keys Registered.")})})};fe.displayName="EmptyState";var he=fe,be=r("../node_modules/lodash/orderBy.js"),ge=r.n(be),ve=r("./app/components/dateTime.tsx"),je=function(e){var t=e.activities;return(0,q.tZ)(we,{headers:[(0,l.t)("Version"),(0,l.t)("First Used"),(0,l.t)("Last Used")],children:t.map((function(e){var t=e.relayId,r=e.version,n=e.firstSeen,s=e.lastSeen;return(0,q.BX)(Z.Fragment,{children:[(0,q.tZ)("div",{children:r}),(0,q.tZ)(ve.Z,{date:n,seconds:!1}),(0,q.tZ)(ve.Z,{date:s,seconds:!1})]},t)}))})};je.displayName="ActivityList";var Ze=je,we=(0,g.Z)(a.KB,{target:"e1rub0300"})("grid-template-columns:repeat(3, 2fr);@media (min-width: ",(function(e){return e.theme.breakpoints[2]}),"){grid-template-columns:2fr repeat(2, 1fr);}"),Oe=r("./app/components/clipboard.tsx"),xe=r("./app/components/confirmDelete.tsx"),ke=r("./app/components/questionTooltip.tsx"),_e=function(e){var t=e.publicKey,r=e.name,n=e.description,s=e.created,o=e.disabled,i=e.onEdit,a=e.onDelete,c=(0,q.tZ)(S.ZP,{size:"small",icon:(0,q.tZ)(C.Fz,{}),label:(0,l.t)("Delete Key"),disabled:o,title:o?(0,l.t)("You do not have permission to delete keys"):void 0});return(0,q.BX)(Ce,{children:[(0,q.BX)(Se,{children:[(0,q.BX)(Re,{children:[(0,q.tZ)("div",{children:r}),n&&(0,q.tZ)(ke.Z,{position:"top",size:"sm",title:n})]}),(0,q.tZ)(De,{children:(0,l._N)("Created on [date]",{date:(0,q.tZ)(ve.Z,{date:s,timeAndDate:!0})})})]}),(0,q.BX)(Y.ZP,{gap:1,children:[(0,q.tZ)(Oe.Z,{value:t,children:(0,q.tZ)(S.ZP,{size:"small",icon:(0,q.tZ)(C.vU,{}),children:(0,l.t)("Copy Key")})}),(0,q.tZ)(S.ZP,{size:"small",onClick:i(t),icon:(0,q.tZ)(C.yl,{}),label:(0,l.t)("Edit Key"),disabled:o,title:o?(0,l.t)("You do not have permission to edit keys"):void 0}),o?c:(0,q.tZ)(xe.Z,{message:(0,l.t)("After removing this Public Key, your Relay will no longer be able to communicate with Sentry and events will be dropped."),onConfirm:a(t),confirmInput:r,children:c})]})]})};_e.displayName="CardHeader";var Pe=_e,Re=(0,g.Z)("div",{target:"e2k0mun3"})("display:grid;grid-template-columns:max-content 1fr;grid-gap:",(0,V.Z)(.5),";"),Se=(0,g.Z)("div",{target:"e2k0mun2"})("color:",(function(e){return e.theme.textColor}),";display:grid;grid-gap:",(0,V.Z)(1),";"),De=(0,g.Z)("small",{target:"e2k0mun1"})("color:",(function(e){return e.theme.gray300}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";"),Ce=(0,g.Z)("div",{target:"e2k0mun0"})("display:grid;grid-gap:",(0,V.Z)(1),";align-items:flex-start;@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){grid-template-columns:1fr max-content;}"),ze=function(e){var t=e.children;return(0,q.tZ)(Be,{children:t})};ze.displayName="CommandLine";var Ke=ze,Be=(0,g.Z)("code",{target:"e16w4sj70"})("padding:",(0,V.Z)(.5)," ",(0,V.Z)(1),";color:",(function(e){return e.theme.pink300}),";background:",(function(e){return e.theme.pink100}),";border:1px solid ",(function(e){return e.theme.pink200}),";font-family:",(function(e){return e.theme.text.familyMono}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";white-space:nowrap;"),Fe=function(e){var t=e.onRefresh,r=e.disabled;return(0,q.tZ)(a.s_,{children:(0,q.tZ)(ye.Z,{title:(0,l.t)("Waiting on Activity!"),description:r?void 0:(0,l._N)("Run relay in your terminal with [commandLine]",{commandLine:(0,q.tZ)(Ke,{children:"relay run"})}),action:(0,q.tZ)(S.ZP,{icon:(0,q.tZ)(C.tr,{}),onClick:t,children:(0,l.t)("Refresh")})})})};Fe.displayName="WaitingActivity";var Ee=Fe,Ne=function(e){var t=e.relays,r=e.relayActivities,n=e.onRefresh,s=e.onDelete,o=e.onEdit,i=e.disabled,a=function(e,t){return e.reduce((function(e,r){var n=r.name,s=r.description,o=r.created,i=r.publicKey;return e.hasOwnProperty(i)||(e[i]={name:n,description:s,created:o,activities:[]}),e[i].activities.length||(e[i].activities=t.filter((function(e){return e.publicKey===i}))),e}),{})}(ge()(t,(function(e){return e.created}),["desc"]),r),l=function(e){return e.length?(0,q.tZ)(Ze,{activities:e}):(0,q.tZ)(Ee,{onRefresh:n,disabled:i})};return(0,q.tZ)(Ae,{children:Object.keys(a).map((function(e){var t=a[e],r=t.name,n=t.description,c=t.created,u=t.activities;return(0,q.BX)(Te,{children:[(0,q.tZ)(Pe,{publicKey:e,name:r,description:n,created:c,onEdit:o,onDelete:s,disabled:i}),l(u)]},e)}))})};Ne.displayName="List";var Ve=Ne,Ae=(0,g.Z)("div",{target:"e19nryos1"})("display:grid;grid-gap:",(0,V.Z)(3),";"),Te=(0,g.Z)("div",{target:"e19nryos0"})("display:grid;grid-gap:",(0,V.Z)(1),";");function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Le=function(e){(0,f.Z)(o,e);var t,r,s=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,b.Z)(t);if(r){var s=(0,b.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,h.Z)(this,e)});function o(){var e;(0,d.Z)(this,o);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=s.call.apply(s,[this].concat(r)),(0,n.Z)((0,m.Z)(e),"handleDelete",(function(t){return(0,u.Z)(j().mark((function r(){var n,s,o;return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.state.relays,s=n.filter((function(e){return e.publicKey!==t})).map((function(e){return k()(e,["created","lastModified"])})),r.prev=2,r.next=5,e.api.requestPromise("/organizations/".concat(e.props.organization.slug,"/"),{method:"PUT",data:{trustedRelays:s}});case 5:o=r.sent,(0,_.S9)((0,l.t)("Successfully deleted Relay public key")),e.setRelays(o.trustedRelays),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),(0,_.Iw)((0,l.t)("An unknown error occurred while deleting Relay public key"));case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))})),(0,n.Z)((0,m.Z)(e),"handleOpenEditDialog",(function(t){return function(){var r=e.state.relays.find((function(e){return e.publicKey===t}));r&&(0,P.openModal)((function(t){return(0,q.tZ)(me,Me(Me({},t),{},{savedRelays:e.state.relays,api:e.api,orgSlug:e.props.organization.slug,relay:r,onSubmitSuccess:function(t){e.successfullySaved(t,(0,l.t)("Successfully updated Relay public key"))}}))}))}})),(0,n.Z)((0,m.Z)(e),"handleOpenAddDialog",(function(){(0,P.openModal)((function(t){return(0,q.tZ)(ce,Me(Me({},t),{},{savedRelays:e.state.relays,api:e.api,orgSlug:e.props.organization.slug,onSubmitSuccess:function(t){e.successfullySaved(t,(0,l.t)("Successfully added Relay public key"))}}))}))})),(0,n.Z)((0,m.Z)(e),"handleRefresh",(function(){e.fetchData()})),e}return(0,p.Z)(o,[{key:"componentDidUpdate",value:function(e,t){O()(t.relays,this.state.relays)||(this.fetchData(),(0,R.FV)(Me(Me({},e.organization),{},{trustedRelays:this.state.relays}))),(0,y.Z)((0,b.Z)(o.prototype),"componentDidUpdate",this).call(this,e,t)}},{key:"getTitle",value:function(){return(0,l.t)("Relay")}},{key:"getDefaultState",value:function(){return Me(Me({},(0,y.Z)((0,b.Z)(o.prototype),"getDefaultState",this).call(this)),{},{relays:this.props.organization.trustedRelays})}},{key:"getEndpoints",value:function(){var e=this.props.organization;return[["relayActivities","/organizations/".concat(e.slug,"/relay_usage/")]]}},{key:"setRelays",value:function(e){this.setState({relays:e})}},{key:"successfullySaved",value:function(e,t){(0,_.S9)(t),this.setRelays(e.trustedRelays)}},{key:"renderContent",value:function(e){var t=this.state,r=t.relays,n=t.relayActivities;return t.loading?this.renderLoading():r.length?(0,q.tZ)(Ve,{relays:r,relayActivities:n,onEdit:this.handleOpenEditDialog,onRefresh:this.handleRefresh,onDelete:this.handleDelete,disabled:e}):(0,q.tZ)(he,{})}},{key:"renderBody",value:function(){var e=!this.props.organization.access.includes("org:write");return(0,q.BX)(Z.Fragment,{children:[(0,q.tZ)(K.Z,{title:(0,l.t)("Relay"),action:(0,q.tZ)(S.ZP,{title:e?(0,l.t)("You do not have permission to register keys"):void 0,priority:"primary",size:"small",icon:(0,q.tZ)(C.N_,{size:"xs",isCircled:!0}),onClick:this.handleOpenAddDialog,disabled:e,children:(0,l.t)("Register Key")})}),(0,q.tZ)(F.Z,{}),(0,q.tZ)(qe,{children:(0,l.t)("Sentry Relay offers enterprise-grade data security by providing a standalone service that acts as a middle layer between your application and sentry.io.")}),(0,q.tZ)(B.Z,{children:(0,l._N)("Go to [link:Relay Documentation] for setup and details.",{link:(0,q.tZ)(D.Z,{href:"https://getsentry.github.io/relay/"})})}),this.renderContent(e)]})}}]),o}(z.Z),qe=(0,g.Z)(B.Z,{target:"e1jy1xfo0"})({name:"xvginl",styles:"max-width:600px"}),Ie=["organization"];function We(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?We(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var He=function(e){var t=e.organization,r=(0,s.Z)(e,Ie);return(0,q.tZ)(o.Z,{features:["relay"],organization:t,renderDisabled:function(){return(0,q.tZ)(i.Z,{alert:a.aU,features:t.features,featureName:(0,l.t)("Relay")})},children:(0,q.tZ)(Le,Ue({organization:t},r))})};He.displayName="OrganizationRelay";var Ge=(0,c.Z)(He)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationRelay_index_tsx.328c38b9e78cf2c20de873c5b26428da.js.map