(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b4e4790"],{"06cd":function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"cl-resource-content"},[e("div",{staticClass:"dashboard-item"},[e("div",{staticClass:"title-item"},[e("div",{staticClass:"title-text"},[t._v(" "+t._s(t.$t("profiling.structuralCpuUtil"))+" ")]),e("div",{staticClass:"detail-link",class:{disabled:!t.cpuInfo.initOver||t.cpuInfo.noData}},[e("button",{attrs:{disabled:!t.cpuInfo.initOver||t.cpuInfo.noData},on:{click:t.jumpToCpuDetail}},[t._v(" "+t._s(t.$t("profiling.viewDetail"))+" "),e("i",{staticClass:"el-icon-d-arrow-right"})])])]),e("div",{staticClass:"content-item"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.cpuInfo.noData,expression:"!cpuInfo.noData"}],staticClass:"cpu-info"},[e("div",{ref:"deviceCpuChart",staticClass:"cpu-chart",attrs:{id:"deviceCpuChart"}}),e("div",{staticClass:"cpu-chart-info"},[e("div",{staticClass:"info-line"},[e("span",[t._v(t._s(t.$t("profiling.logicCores")))]),e("span",[t._v(t._s(t.deviceCpuChart.logicCores))])]),e("div",{staticClass:"info-line"},[e("span",[t._v(t._s(t.$t("profiling.avgUserUtilization")))]),e("span",[t._v(t._s(t.addPercentSign(t.deviceCpuChart.cpuAvgUser)))])]),e("div",{staticClass:"info-line"},[e("span",[t._v(t._s(t.$t("profiling.avgSysUtilization")))]),e("span",[t._v(t._s(t.addPercentSign(t.deviceCpuChart.cpuAvgSystem)))])]),e("div",{staticClass:"info-line"},[e("span",[t._v(t._s(t.$t("profiling.avgIOUtilization")))]),e("span",[t._v(t._s(t.addPercentSign(t.deviceCpuChart.cpuAvgIO)))])]),e("div",{staticClass:"info-line"},[e("span",[t._v(t._s(t.$t("profiling.avgIdleUtilization")))]),e("span",[t._v(t._s(t.addPercentSign(t.deviceCpuChart.cpuAvgFree)))])]),e("div",{staticClass:"info-line"},[e("span",[t._v(t._s(t.$t("profiling.avgWaitingProcess")))]),e("span",[t._v(t._s(t.deviceCpuChart.cpuAvgProcess))])]),e("div",{staticClass:"info-line"},[e("span",[t._v(t._s(t.$t("profiling.avgSwitchCount")))]),e("span",[t._v(t._s(t.deviceCpuChart.cpuAvgSwitch))])])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.cpuInfo.noData,expression:"cpuInfo.noData"}],staticClass:"noData-content"},[e("img",{attrs:{src:a("9485"),alt:""}}),e("p",[t._v(t._s(t.cpuInfo.initOver?t.$t("public.noData"):t.$t("public.dataLoading")))])])])])])},n=[],r=(a("159b"),a("99af"),a("b64b"),a("b0c0"),a("d81d"),a("3778")),s=a("9fac"),c={data:function(){return{queryData:{dir:"",id:"",path:"",activePane:""},summaryPath:"",curCardNum:"",pageResizeTimer:null,firstInit:!0,deviceCpuChart:{id:"deviceCpuChart",chartDom:null,option:{color:["#c23531","#2f4554","#61a0a8","#d48265"],tooltip:{trigger:"axis",formatter:null,confine:!0,backgroundColor:"rgba(50, 50, 50, 0.7)",borderWidth:0,textStyle:{color:"#fff"}},legend:{right:70,top:8,data:[]},xAxis:{name:"",data:[]},yAxis:{name:this.$t("profiling.utilizationTitle"),type:"value"},dataZoom:[{start:0,end:100,bottom:0},{start:0,end:100,type:"inside",bottom:0}],grid:{left:60,top:40,right:70,bottom:60},series:[]},logicCores:0,cpuAvgUser:0,cpuAvgSystem:0,cpuAvgIO:0,cpuAvgFree:0,cpuAvgProcess:0,cpuAvgSwitch:0},cpuInfo:{initOver:!1,noData:!0,stepArray:[],cpuInfoStr:{user_utilization:this.$t("profiling.userUtilization"),sys_utilization:this.$t("profiling.sysUtilization"),io_utilization:this.$t("profiling.ioUtilization"),idle_utilization:this.$t("profiling.idleUtilization")},samplingInterval:0}}},watch:{"$parent.curDashboardInfo.curCardNum":{handler:function(t){isNaN(t)||t===this.curCardNum||this.firstInit||(this.curCardNum=t,this.noGraphicsDataFlag=!1,this.graphicsInitOver=!1,this.init())},deep:!0,immediate:!0}},mounted:function(){window.addEventListener("resize",this.resizeCallback,!1),this.$bus.$on("collapse",this.resizeCallback),this.queryData={dir:this.$route.query.dir,id:this.$route.query.id,path:this.$route.query.path,activePane:this.$route.query.activePane},this.$route.query&&this.$route.query.path&&!isNaN(this.$route.query.cardNum)&&(this.summaryPath=this.$route.query.path,this.curCardNum=this.$route.query.cardNum,this.init()),this.firstInit=!1},methods:{init:function(){this.queryCpuInfo()},resizeCallback:function(){var t=this;this.pageResizeTimer&&(clearTimeout(this.pageResizeTimer),this.pageResizeTimer=null),this.pageResizeTimer=setTimeout((function(){t.deviceCpuChart.chartDom&&t.deviceCpuChart.chartDom.resize()}),300)},addPercentSign:function(t){return 0===t||"0"===t?"0":"".concat(t,"%")},queryCpuInfo:function(){var t=this,i={params:{profile:this.queryData.dir,train_id:this.queryData.id},body:{device_id:this.curCardNum,filter_condition:{}}};this.cpuInfo.noData=!0,this.cpuInfo.initOver=!1,r["a"].getCpuUtilization(i).then((function(i){if(t.cpuInfo.initOver=!0,i&&i.data){t.cpuInfo.noData=!i.data.step_total_num,t.cpuInfo.stepArray=i.data.step_info,t.samplingInterval=i.data.sampling_interval,t.deviceCpuChart.logicCores=i.data.cpu_processor_num;var a=i.data.device_info;a&&t.samplingInterval?t.initDeviceCpu(a):(t.clearCpuChart(),t.cpuInfo.noData=!0)}else t.clearCpuChart()}),(function(){t.clearCpuChart(),t.cpuInfo.initOver=!0}))},clearCpuChart:function(){this.deviceCpuChart.chartDom&&this.deviceCpuChart.chartDom.clear()},formatCpuChartTip:function(t,i){var a=t,e="";if(a&&a.length){var n=["#c23531","#2f4554","#61a0a8","#d48265"],r=a[0].dataIndex;e+="step: ".concat(i[r]),a.forEach((function(t,i){e+='<br><span class="cpu-chart-tip" style="background-color:'.concat(n[i],';"></span>')+"".concat(t.seriesName,": ").concat(t.data)})),e+="</div>"}return e},initDeviceCpu:function(t){var i=this,a=[],e=[];Object.keys(this.cpuInfo.cpuInfoStr).forEach((function(n){var r=t[n];if(r&&r.metrics){var s={type:"line",name:i.cpuInfo.cpuInfoStr[n],data:r.metrics,showSymbol:!1};a.push(s),e.push(s.name)}})),this.deviceCpuChart.cpuAvgUser=t.user_utilization.avg_value,this.deviceCpuChart.cpuAvgSystem=t.sys_utilization.avg_value,this.deviceCpuChart.cpuAvgIO=t.io_utilization.avg_value,this.deviceCpuChart.cpuAvgFree=t.idle_utilization.avg_value,this.deviceCpuChart.cpuAvgProcess=t.runable_processes.avg_value,this.deviceCpuChart.cpuAvgSwitch=t.context_switch_count.avg_value,this.deviceCpuChart.option.series=a,this.deviceCpuChart.option.xAxis.name="".concat(this.$t("profiling.sampleInterval"),"\n").concat(this.$t("symbols.leftbracket")).concat(this.samplingInterval,"ms").concat(this.$t("symbols.rightbracket")),this.deviceCpuChart.option.xAxis.data=t[Object.keys(t)[0]].metrics.map((function(t,i){return i+1})),this.deviceCpuChart.option.legend.data=e,this.deviceCpuChart.option.tooltip.formatter=function(t){return i.formatCpuChartTip(t,i.cpuInfo.stepArray)},this.$nextTick((function(){i.deviceCpuChart.chartDom||i.$refs.deviceCpuChart&&(i.deviceCpuChart.chartDom=s["a"].init(i.$refs.deviceCpuChart)),i.deviceCpuChart.chartDom.setOption(i.deviceCpuChart.option)}))},jumpToCpuDetail:function(){"/profiling-gpu/cpu-detail"!==this.$route.path&&this.$router.push({path:"/profiling-gpu/cpu-detail",query:{dir:this.queryData.dir,id:this.queryData.id,cardNum:this.curCardNum,path:this.queryData.path,activePane:this.queryData.activePane}})}},destroyed:function(){window.removeEventListener("resize",this.resizeCallback),this.pageResizeTimer&&(clearTimeout(this.pageResizeTimer),this.pageResizeTimer=null),this.$bus.$off("collapse")}},o=c,u=(a("366e"),a("2877")),p=Object(u["a"])(o,e,n,!1,null,null,null);i["default"]=p.exports},1755:function(t,i,a){},"366e":function(t,i,a){"use strict";a("1755")},9485:function(t,i,a){t.exports=a.p+"static/img/nodata.8290bed9.png"},b0c0:function(t,i,a){var e=a("83ab"),n=a("9bf2").f,r=Function.prototype,s=r.toString,c=/^\s*function ([^ (]*)/,o="name";e&&!(o in r)&&n(r,o,{configurable:!0,get:function(){try{return s.call(this).match(c)[1]}catch(t){return""}}})},b64b:function(t,i,a){var e=a("23e7"),n=a("7b0b"),r=a("df75"),s=a("d039"),c=s((function(){r(1)}));e({target:"Object",stat:!0,forced:c},{keys:function(t){return r(n(t))}})},d81d:function(t,i,a){"use strict";var e=a("23e7"),n=a("b727").map,r=a("1dde"),s=a("ae40"),c=r("map"),o=s("map");e({target:"Array",proto:!0,forced:!c||!o},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);