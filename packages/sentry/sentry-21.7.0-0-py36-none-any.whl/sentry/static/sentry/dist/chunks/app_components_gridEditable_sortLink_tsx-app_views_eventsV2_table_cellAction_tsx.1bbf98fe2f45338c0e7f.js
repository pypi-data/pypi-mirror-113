(self.webpackChunk=self.webpackChunk||[]).push([["app_components_gridEditable_sortLink_tsx-app_views_eventsV2_table_cellAction_tsx"],{"./app/components/gridEditable/sortLink.tsx":function(e,t,n){"use strict";n("../node_modules/core-js/modules/es.reflect.construct.js"),n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),u=n("../node_modules/react/index.js"),d=n("../node_modules/lodash/omit.js"),m=n.n(d),p=n("./app/components/links/link.tsx"),h=n("./app/icons/index.tsx"),f=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var g=function(e){(0,i.Z)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,a.Z)(t);if(n){var o=(0,a.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function c(){return(0,o.Z)(this,c),r.apply(this,arguments)}return(0,s.Z)(c,[{key:"renderArrow",value:function(){var e=this.props.direction;return e?"desc"===e?(0,f.tZ)(v,{size:"xs",direction:"down"}):(0,f.tZ)(v,{size:"xs",direction:"up"}):null}},{key:"render",value:function(){var e=this.props,t=e.align,n=e.title,r=e.canSort,o=e.generateSortLink,s=e.onClick,i=o();return i&&r?(0,f.BX)(j,{align:t,to:i,onClick:s,children:[n," ",this.renderArrow()]}):(0,f.tZ)(y,{align:t,children:n})}}]),c}(u.Component);g.displayName="SortLink";var j=(0,c.Z)((function(e){var t=m()(e,["align"]);return(0,f.tZ)(p.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))}),{target:"e1xb2te62"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(function(e){return e.align?"text-align: ".concat(e.align,";"):""}),";"),y=(0,c.Z)("div",{target:"e1xb2te61"})("display:block;width:100%;white-space:nowrap;",(function(e){return e.align?"text-align: ".concat(e.align,";"):""}),";"),v=(0,c.Z)(h.CC,{target:"e1xb2te60"})({name:"40f4ru",styles:"vertical-align:top"});t.Z=g},"./app/views/eventsV2/table/cellAction.tsx":function(e,t,n){"use strict";n.d(t,{eX:function(){return r},rh:function(){return A}}),n("../node_modules/core-js/modules/es.reflect.construct.js"),n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var r,o=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=n("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),m=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=(n("../node_modules/core-js/modules/es.function.name.js"),n("../node_modules/core-js/modules/es.array.iterator.js"),n("../node_modules/core-js/modules/es.object.to-string.js"),n("../node_modules/core-js/modules/es.set.js"),n("../node_modules/core-js/modules/es.string.iterator.js"),n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.array.concat.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.string.includes.js"),n("../node_modules/react/index.js")),h=n("../node_modules/react-dom/index.js"),f=n("../node_modules/react-popper/lib/esm/Popper.js"),b=n("../node_modules/react-popper/lib/esm/Manager.js"),g=n("../node_modules/react-popper/lib/esm/Reference.js"),j=n("../node_modules/color/index.js"),y=n.n(j),v=n("./app/icons/index.tsx"),_=n("./app/locale.tsx"),Z=n("./app/styles/space.tsx"),w=n("./app/utils.tsx"),O=n("./app/utils/discover/fields.tsx"),k=n("./app/utils/formatters.tsx"),x=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n,o){var s=n.name;switch("duration"===n.type&&"number"==typeof o&&(o=(0,k.g9)(o/1e3,2,!0)),Array.isArray(o)&&1===(o=(0,d.Z)(new Set(o))).length&&(o=o[0]),t){case r.ADD:if(null==o)e.removeTagValue("has",s),e.addTagValues("!has",[s]);else{if(e.removeTag("!".concat(s)),Array.isArray(o)){var i=e.getTagValues(s);o=(0,d.Z)(new Set([].concat((0,d.Z)(i),(0,d.Z)(o))))}else o=[String(o)];e.setTagValues(s,o)}break;case r.EXCLUDE:if(null==o)e.removeTagValue("!has",s),e.addTagValues("has",[s]);else{e.removeTag(s);var l="!".concat(s);o=Array.isArray(o)?o:[String(o)];var a=e.getTagValues(l);o=(0,d.Z)(new Set([].concat((0,d.Z)(a),(0,d.Z)(o)))),e.setTagValues(l,o)}break;case r.SHOW_GREATER_THAN:e.setTagValues(s,[">".concat(o)]);break;case r.SHOW_LESS_THAN:e.setTagValues(s,["<".concat(o)]);break;case r.TRANSACTION:case r.RELEASE:case r.DRILLDOWN:break;default:throw new Error("Unknown action type. ".concat(t))}}!function(e){e.ADD="add",e.EXCLUDE="exclude",e.SHOW_GREATER_THAN="show_greater_than",e.SHOW_LESS_THAN="show_less_than",e.TRANSACTION="transaction",e.RELEASE="release",e.DRILLDOWN="drilldown",e.EDIT_THRESHOLD="edit_threshold"}(r||(r={}));var C=function(e){(0,l.Z)(m,e);var t,n,d=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var o=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,a.Z)(this,e)});function m(e){var t;(0,o.Z)(this,m),t=d.call(this,e),(0,u.Z)((0,i.Z)(t),"state",{isHovering:!1,isOpen:!1}),(0,u.Z)((0,i.Z)(t),"portalEl",void 0),(0,u.Z)((0,i.Z)(t),"menuEl",void 0),(0,u.Z)((0,i.Z)(t),"handleClickOutside",(function(e){t.menuEl&&e.target instanceof Element&&(t.menuEl.contains(e.target)||t.setState({isOpen:!1,isHovering:!1}))})),(0,u.Z)((0,i.Z)(t),"handleMouseEnter",(function(){t.setState({isHovering:!0})})),(0,u.Z)((0,i.Z)(t),"handleMouseLeave",(function(){t.setState((function(e){return e.isOpen?e:S(S({},e),{},{isHovering:!1})}))})),(0,u.Z)((0,i.Z)(t),"handleMenuToggle",(function(e){e.preventDefault(),t.setState({isOpen:!t.state.isOpen})}));var n=document.getElementById("cell-action-portal");return n||((n=document.createElement("div")).setAttribute("id","cell-action-portal"),document.body.appendChild(n)),t.portalEl=n,t.menuEl=null,t}return(0,s.Z)(m,[{key:"componentDidUpdate",value:function(e,t){this.state.isOpen&&!1===t.isOpen&&document.addEventListener("click",this.handleClickOutside,!0),!1===this.state.isOpen&&t.isOpen&&document.removeEventListener("click",this.handleClickOutside,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside,!0)}},{key:"renderMenuButtons",value:function(){var e=this.props,t=e.dataRow,n=e.column,o=e.handleCellAction,s=e.allowActions;if((0,O.sU)(n.name))return null;if((0,O.uI)(n.name))return null;var i=t[(0,O.LY)(n.name)];Array.isArray(i)&&null===i[0]&&"field"===n.column.kind&&"error.handled"===n.column.field&&(i=1);var l=[];function a(e,t){(Array.isArray(s)&&s.includes(e)||!s)&&l.push(t)}return(!["duration","number","percentage"].includes(n.type)||null===i&&"field"===n.column.kind)&&(a(r.ADD,(0,x.tZ)(H,{"data-test-id":"add-to-filter",onClick:function(){return o(r.ADD,i)},children:(0,_.t)("Add to filter")},"add-to-filter")),"date"!==n.type&&a(r.EXCLUDE,(0,x.tZ)(H,{"data-test-id":"exclude-from-filter",onClick:function(){return o(r.EXCLUDE,i)},children:(0,_.t)("Exclude from filter")},"exclude-from-filter"))),["date","duration","integer","number","percentage"].includes(n.type)&&null!==i&&(a(r.SHOW_GREATER_THAN,(0,x.tZ)(H,{"data-test-id":"show-values-greater-than",onClick:function(){return o(r.SHOW_GREATER_THAN,i)},children:(0,_.t)("Show values greater than")},"show-values-greater-than")),a(r.SHOW_LESS_THAN,(0,x.tZ)(H,{"data-test-id":"show-values-less-than",onClick:function(){return o(r.SHOW_LESS_THAN,i)},children:(0,_.t)("Show values less than")},"show-values-less-than"))),"field"===n.column.kind&&"transaction"===n.column.field&&a(r.TRANSACTION,(0,x.tZ)(H,{"data-test-id":"transaction-summary",onClick:function(){return o(r.TRANSACTION,i)},children:(0,_.t)("Go to summary")},"transaction-summary")),"field"===n.column.kind&&"release"===n.column.field&&i&&a(r.RELEASE,(0,x.tZ)(H,{"data-test-id":"release",onClick:function(){return o(r.RELEASE,i)},children:(0,_.t)("Go to release")},"release")),"function"===n.column.kind&&"count_unique"===n.column.function[0]&&a(r.DRILLDOWN,(0,x.tZ)(H,{"data-test-id":"per-cell-drilldown",onClick:function(){return o(r.DRILLDOWN,i)},children:(0,_.t)("View Stacks")},"drilldown")),"function"===n.column.kind&&"user_misery"===n.column.function[0]&&(0,w.ri)(t.project_threshold_config)&&a(r.EDIT_THRESHOLD,(0,x.tZ)(H,{"data-test-id":"edit-threshold",onClick:function(){return o(r.EDIT_THRESHOLD,i)},children:(0,_._N)("Edit threshold ([threshold]ms)",{threshold:t.project_threshold_config[1]})},"edit_threshold")),0===l.length?null:(0,x.tZ)(L,{onClick:function(e){e.stopPropagation()},children:l})}},{key:"renderMenu",value:function(){var e=this,t=this.state.isOpen,n=this.renderMenuButtons();if(null===n)return null;var r=null;return t&&(r=h.createPortal((0,x.tZ)(f.ZP,{placement:"top",modifiers:{hide:{enabled:!1},preventOverflow:{padding:10,enabled:!0,boundariesElement:"viewport"}},children:function(t){var r=t.ref,o=t.style,s=t.placement,i=t.arrowProps;return(0,x.BX)(D,{ref:function(t){r(t),e.menuEl=t},style:o,children:[(0,x.tZ)(P,{ref:i.ref,"data-placement":s,style:i.style}),n]})}}),this.portalEl)),(0,x.tZ)(R,{children:(0,x.BX)(b.ZP,{children:[(0,x.tZ)(g.Z,{children:function(t){var n=t.ref;return(0,x.tZ)(N,{ref:n,onClick:e.handleMenuToggle,children:(0,x.tZ)(v.YR,{size:"sm","data-test-id":"cell-action",color:"blue300"})})}}),r]})})}},{key:"render",value:function(){var e=this.props.children,t=this.state.isHovering;return(0,x.BX)(T,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[e,t&&this.renderMenu()]})}}]),m}(p.Component);C.displayName="CellAction",t.ZP=C;var T=(0,m.Z)("div",{target:"e18g1e9m6"})({name:"zxsb69",styles:"position:relative;width:100%;height:100%"}),R=(0,m.Z)("div",{target:"e18g1e9m5"})({name:"1lby940",styles:"position:absolute;top:0;right:0"}),D=(0,m.Z)("div",{target:"e18g1e9m4"})("margin:",(0,Z.Z)(1)," 0;z-index:",(function(e){return e.theme.zIndex.tooltip}),";"),L=(0,m.Z)("div",{target:"e18g1e9m3"})("background:",(function(e){return e.theme.background}),";border:1px solid ",(function(e){return e.theme.border}),";border-radius:",(function(e){return e.theme.borderRadius}),";box-shadow:",(function(e){return e.theme.dropShadowHeavy}),";overflow:hidden;"),P=(0,m.Z)("span",{target:"e18g1e9m2"})("position:absolute;width:18px;height:9px;&[data-placement*='bottom']{margin-top:-9px;&::before{border-width:0 9px 9px 9px;border-color:transparent transparent ",(function(e){return e.theme.border})," transparent;}&::after{top:1px;left:1px;border-width:0 8px 8px 8px;border-color:transparent transparent ",(function(e){return e.theme.background})," transparent;}}&[data-placement*='top']{margin-bottom:-8px;bottom:0;&::before{border-width:9px 9px 0 9px;border-color:",(function(e){return e.theme.border})," transparent transparent transparent;}&::after{bottom:1px;left:1px;border-width:8px 8px 0 8px;border-color:",(function(e){return e.theme.background})," transparent transparent transparent;}}&::before,&::after{width:0;height:0;content:'';display:block;position:absolute;border-style:solid;}"),H=(0,m.Z)("button",{target:"e18g1e9m1"})("display:block;width:100%;padding:",(0,Z.Z)(1)," ",(0,Z.Z)(2),";background:transparent;outline:none;border:0;border-bottom:1px solid ",(function(e){return e.theme.innerBorder}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";text-align:left;line-height:1.2;&:hover{background:",(function(e){return e.theme.backgroundSecondary}),";}&:last-child{border-bottom:0;}"),N=(0,m.Z)("button",{target:"e18g1e9m0"})("display:flex;width:24px;height:24px;padding:0;justify-content:center;align-items:center;background:",(function(e){return y()(e.theme.background).alpha(.85).string()}),";border-radius:",(function(e){return e.theme.borderRadius}),";border:1px solid ",(function(e){return e.theme.border}),";cursor:pointer;outline:none;")}}]);
//# sourceMappingURL=../sourcemaps/app_components_gridEditable_sortLink_tsx-app_views_eventsV2_table_cellAction_tsx.aa5f531080450d4b362b322c7c8f813e.js.map