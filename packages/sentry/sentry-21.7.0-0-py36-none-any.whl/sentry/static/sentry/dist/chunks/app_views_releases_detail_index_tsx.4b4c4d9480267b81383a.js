(self.webpackChunk=self.webpackChunk||[]).push([["app_views_releases_detail_index_tsx"],{"./app/actionCreators/release.tsx":function(e,t,r){"use strict";r.d(t,{o7:function(){return c},dF:function(){return d},VE:function(){return p},aQ:function(){return m}}),r("../node_modules/core-js/modules/es.array.concat.js");var o=r("../node_modules/@sentry/minimal/esm/index.js"),s=r("../node_modules/@sentry/types/esm/severity.js"),n=r("./app/actionCreators/indicator.tsx"),a=r("./app/actions/releaseActions.tsx"),i=r("./app/locale.tsx"),l=r("./app/stores/releaseStore.tsx"),u=r("./app/types/index.tsx");function c(e,t){var r=t.orgSlug,n=t.projectSlug,i=t.releaseVersion,u="/projects/".concat(r,"/").concat(n,"/releases/").concat(encodeURIComponent(i),"/");return l.Z.state.releaseLoading[(0,l.p)(n,i)]=!0,a.Z.loadRelease(r,n,i),e.requestPromise(u,{method:"GET"}).then((function(e){a.Z.loadReleaseSuccess(n,i,e)})).catch((function(e){404!==e.status?(a.Z.loadReleaseError(n,i,e),o.$e((function(t){t.setLevel(s.z.Warning),t.setFingerprint(["getRelease-action-creator"]),o.Tb(e)}))):a.Z.loadReleaseSuccess(n,i,null)}))}function d(e,t){var r=t.orgSlug,n=t.projectSlug,i=t.releaseVersion,u="/organizations/".concat(r,"/releases/").concat(encodeURIComponent(i),"/deploys/");return l.Z.state.deploysLoading[(0,l.p)(n,i)]=!0,a.Z.loadDeploys(r,n,i),e.requestPromise(u,{method:"GET"}).then((function(e){a.Z.loadDeploysSuccess(n,i,e)})).catch((function(e){404!==e.status?(a.Z.loadDeploysError(n,i,e),o.$e((function(t){t.setLevel(s.z.Warning),t.setFingerprint(["getReleaseDeploys-action-creator"]),o.Tb(e)}))):a.Z.loadDeploysSuccess(n,i,null)}))}function p(e,t){var r=t.orgSlug,o=t.projectSlug,s=t.releaseVersion;return a.Z.loadRelease(r,o,s),(0,n.E3)((0,i.t)("Archiving Release…")),e.requestPromise("/organizations/".concat(r,"/releases/"),{method:"POST",data:{status:u.dE.Archived,projects:[],version:s}}).then((function(e){a.Z.loadReleaseSuccess(o,s,e),(0,n.S9)((0,i.t)("Release was successfully archived."))})).catch((function(e){var t,r;throw a.Z.loadReleaseError(o,s,e),(0,n.Iw)(null!==(t=null===(r=e.responseJSON)||void 0===r?void 0:r.detail)&&void 0!==t?t:(0,i.t)("Release could not be be archived.")),e}))}function m(e,t){var r=t.orgSlug,o=t.projectSlug,s=t.releaseVersion;return a.Z.loadRelease(r,o,s),(0,n.E3)((0,i.t)("Restoring Release…")),e.requestPromise("/organizations/".concat(r,"/releases/"),{method:"POST",data:{status:u.dE.Active,projects:[],version:s}}).then((function(e){a.Z.loadReleaseSuccess(o,s,e),(0,n.S9)((0,i.t)("Release was successfully restored."))})).catch((function(e){var t,r;throw a.Z.loadReleaseError(o,s,e),(0,n.Iw)(null!==(t=null===(r=e.responseJSON)||void 0===r?void 0:r.detail)&&void 0!==t?t:(0,i.t)("Release could not be be restored.")),e}))}},"./app/actions/releaseActions.tsx":function(e,t,r){"use strict";var o=r("../node_modules/reflux/src/index.js"),s=r.n(o);t.Z=s().createActions(["loadRelease","loadReleaseError","loadReleaseSuccess","loadDeploys","loadDeploysError","loadDeploysSuccess"])},"./app/components/navigationButtonGroup.tsx":function(e,t,r){"use strict";var o=r("./app/components/button.tsx"),s=r("./app/components/buttonBar.tsx"),n=r("./app/icons/index.tsx"),a=r("./app/locale.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),l=function(e){var t=e.links,r=e.hasNext,l=void 0!==r&&r,u=e.hasPrevious,c=void 0!==u&&u,d=e.className,p=e.size,m=e.onOldestClick,h=e.onOlderClick,f=e.onNewerClick,g=e.onNewestClick;return(0,i.BX)(s.ZP,{className:d,merged:!0,children:[(0,i.tZ)(o.ZP,{size:p,to:t[0],disabled:!c,label:(0,a.t)("Oldest"),icon:(0,i.tZ)(n.sm,{size:"xs"}),onClick:m}),(0,i.tZ)(o.ZP,{size:p,to:t[1],disabled:!c,onClick:h,children:(0,a.t)("Older")}),(0,i.tZ)(o.ZP,{size:p,to:t[2],disabled:!l,onClick:f,children:(0,a.t)("Newer")}),(0,i.tZ)(o.ZP,{size:p,to:t[3],disabled:!l,label:(0,a.t)("Newest"),icon:(0,i.tZ)(n.pi,{size:"xs"}),onClick:g})]})};l.displayName="NavigationButtonGroup",t.Z=l},"./app/components/pickProjectToContinue.tsx":function(e,t,r){"use strict";var o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),n=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),a=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.entries.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.join.js"),r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("./app/actionCreators/modal.tsx")),l=r("./app/components/contextPickerModal.tsx"),u=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e){var t=e.noProjectRedirectPath,r=e.nextPath,o=e.router,a=e.projects,c=r.query,p=!1,h="".concat(r.pathname,"?project=");if(c){var f=Object.entries(c).filter((function(e){var t=(0,n.Z)(e,2),r=t[0];return t[1],"project"!==r})).map((function(e){var t=(0,n.Z)(e,2),r=t[0],o=t[1];return"".concat(r,"=").concat(o)})),g=[].concat((0,s.Z)(f),["project="]).join("&");h="".concat(r.pathname,"?").concat(g)}return 1===a.length?(o.replace(h+a[0].id),null):((0,i.openModal)((function(e){return(0,u.tZ)(l.Z,d(d({},e),{},{needOrg:!1,needProject:!0,nextPath:"".concat(h,":project"),onFinish:function(e){p=!0,o.replace(e)},projectSlugs:a.map((function(e){return e.slug}))}))}),{onClose:function(){p||o.push(t)}}),(0,u.tZ)(m,{}))}p.displayName="PickProjectToContinue";var m=(0,a.Z)("div",{target:"e1sj8doz0"})({name:"4wiox3",styles:"height:100vh;width:100%"});t.Z=p},"./app/stores/releaseStore.tsx":function(e,t,r){"use strict";r.d(t,{p:function(){return j}});var o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),n=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.map.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/reflux/src/index.js")),a=r.n(n),i=r("./app/actions/organizationActions.tsx"),l=r("./app/actions/releaseActions.tsx"),u=["releaseLoading","releaseError"],c=["releaseLoading","releaseError"],d=["release","releaseLoading","releaseError"],p=["deploysLoading","deploysError"],m=["deploysLoading","deploysError"],h=["deploys","deploysLoading","deploysError"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=function(e,t){return"".concat(e).concat(t)},y={state:{orgSlug:void 0,release:new Map,releaseLoading:new Map,releaseError:new Map,deploys:new Map,deploysLoading:new Map,deploysError:new Map},listenables:l.Z,init:function(){this.listenTo(i.Z.update,this.updateOrganization),this.reset()},reset:function(){this.state={orgSlug:void 0,release:new Map,releaseLoading:new Map,releaseError:new Map,deploys:new Map,deploysLoading:new Map,deploysError:new Map},this.trigger(this.state)},updateOrganization:function(e){this.reset(),this.state.orgSlug=e.slug,this.trigger(this.state)},loadRelease:function(e,t,r){this.orgSlug&&this.orgSlug===e||(this.reset(),this.orgSlug=e);var n=j(t,r),a=this.state,i=a.releaseLoading,l=a.releaseError,c=(0,s.Z)(a,u);this.state=g(g({},c),{},{releaseLoading:g(g({},i),{},(0,o.Z)({},n,!0)),releaseError:g(g({},l),{},(0,o.Z)({},n,void 0))}),this.trigger(this.state)},loadReleaseError:function(e,t,r){var n=j(e,t),a=this.state,i=a.releaseLoading,l=a.releaseError,u=(0,s.Z)(a,c);this.state=g(g({},u),{},{releaseLoading:g(g({},i),{},(0,o.Z)({},n,!1)),releaseError:g(g({},l),{},(0,o.Z)({},n,r))}),this.trigger(this.state)},loadReleaseSuccess:function(e,t,r){var n=j(e,t),a=this.state,i=a.release,l=a.releaseLoading,u=a.releaseError,c=(0,s.Z)(a,d);this.state=g(g({},c),{},{release:g(g({},i),{},(0,o.Z)({},n,r)),releaseLoading:g(g({},l),{},(0,o.Z)({},n,!1)),releaseError:g(g({},u),{},(0,o.Z)({},n,void 0))}),this.trigger(this.state)},loadDeploys:function(e,t,r){this.orgSlug&&this.orgSlug===e||(this.reset(),this.orgSlug=e);var n=j(t,r),a=this.state,i=a.deploysLoading,l=a.deploysError,u=(0,s.Z)(a,p);this.state=g(g({},u),{},{deploysLoading:g(g({},i),{},(0,o.Z)({},n,!0)),deploysError:g(g({},l),{},(0,o.Z)({},n,void 0))}),this.trigger(this.state)},loadDeploysError:function(e,t,r){var n=j(e,t),a=this.state,i=a.deploysLoading,l=a.deploysError,u=(0,s.Z)(a,m);this.state=g(g({},u),{},{deploysLoading:g(g({},i),{},(0,o.Z)({},n,!1)),deploysError:g(g({},l),{},(0,o.Z)({},n,r))}),this.trigger(this.state)},loadDeploysSuccess:function(e,t,r){var n=j(e,t),a=this.state,i=a.deploys,l=a.deploysLoading,u=a.deploysError,c=(0,s.Z)(a,h);this.state=g(g({},c),{},{deploys:g(g({},i),{},(0,o.Z)({},n,r)),deploysLoading:g(g({},l),{},(0,o.Z)({},n,!1)),deploysError:g(g({},u),{},(0,o.Z)({},n,void 0))}),this.trigger(this.state)},get:function(e,t){var r=j(e,t);return{release:this.state.release[r],releaseLoading:this.state.releaseLoading[r],releaseError:this.state.releaseError[r],deploys:this.state.deploys[r],deploysLoading:this.state.deploysLoading[r],deploysError:this.state.deploysError[r]}}},v=a().createStore(y);t.Z=v},"./app/utils/routeTitle.tsx":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.array.concat.js"),t.Z=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3?arguments[3]:void 0,s="".concat(e," - ").concat(t),n=o?"".concat(s," - ").concat(o):s;return r?"".concat(n," - Sentry"):n}},"./app/views/asyncView.tsx":function(e,t,r){"use strict";r.d(t,{Z:function(){return p}}),r("../node_modules/core-js/modules/es.reflect.construct.js");var o=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),n=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),i=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=(r("../node_modules/react/index.js"),r("../node_modules/react-document-title/index.js")),u=r.n(l),c=r("./app/components/asyncComponent.tsx"),d=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var p=function(e){(0,n.Z)(c,e);var t,r,l=(t=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,i.Z)(t);if(r){var s=(0,i.Z)(this).constructor;e=Reflect.construct(o,arguments,s)}else e=o.apply(this,arguments);return(0,a.Z)(this,e)});function c(){return(0,o.Z)(this,c),l.apply(this,arguments)}return(0,s.Z)(c,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return(0,d.tZ)(u(),{title:"".concat(e?"".concat(e," - "):"","Sentry"),children:this.renderComponent()})}}]),c}(c.Z);p.displayName="AsyncView"},"./app/views/releases/detail/index.tsx":function(e,t,r){"use strict";r.r(t),r.d(t,{ReleaseContext:function(){return Ee},ReleasesDetailContainer:function(){return Be},default:function(){return Ie}}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var o=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),s=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),n=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=r("../node_modules/@babel/runtime/helpers/esm/get.js"),u=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),c=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),d=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),p=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),m=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),h=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/core-js/modules/es.object.values.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/react/index.js")),f=r("../node_modules/lodash/pick.js"),g=r.n(f),j=r("../node_modules/moment/moment.js"),y=r.n(j),v=r("./app/components/alert.tsx"),b=r("./app/components/asyncComponent.tsx"),Z=r("./app/components/lightWeightNoProjectMessage.tsx"),x=r("./app/components/loadingIndicator.tsx"),P=r("./app/components/organizations/globalSelectionHeader/index.tsx"),S=r("./app/components/organizations/globalSelectionHeader/getParams.tsx"),w=r("./app/components/pickProjectToContinue.tsx"),_=r("./app/constants/index.tsx"),O=r("./app/constants/globalSelectionHeader.tsx"),R=r("./app/icons/index.tsx"),C=r("./app/locale.tsx"),E=r("./app/styles/organization.tsx"),k=r("./app/styles/space.tsx"),B=r("./app/utils/formatters.tsx"),D=r("./app/utils/routeTitle.tsx"),z=r("./app/utils/withGlobalSelection.tsx"),I=r("./app/utils/withOrganization.tsx"),T=r("./app/views/asyncView.tsx"),q=r("./app/views/releases/list/utils.tsx"),A=r("./app/views/releases/utils/index.tsx"),L=r("./app/views/releases/utils/releaseHealthRequest.tsx"),N=(r("../node_modules/core-js/modules/es.string.ends-with.js"),r("./app/components/badge.tsx")),M=r("./app/components/breadcrumbs.tsx"),F=r("./app/components/clipboard.tsx"),H=r("./app/components/idBadge/index.tsx"),U=r("./app/components/layouts/thirds.tsx"),V=r("./app/components/links/externalLink.tsx"),G=r("./app/components/links/listLink.tsx"),Q=r("./app/components/navTabs.tsx"),Y=r("./app/components/tooltip.tsx"),X=r("./app/components/version.tsx"),J=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),W=r("../node_modules/@babel/runtime/regenerator/index.js"),$=r.n(W),K=(r("../node_modules/core-js/modules/es.array.slice.js"),r("../node_modules/core-js/modules/es.array.join.js"),r("../node_modules/react-router/es/index.js")),ee=r("./app/actionCreators/release.tsx"),te=r("./app/api.tsx"),re=r("./app/components/button.tsx"),oe=r("./app/components/buttonBar.tsx"),se=r("./app/components/confirm.tsx"),ne=r("./app/components/dropdownLink.tsx"),ae=r("./app/components/idBadge/projectBadge.tsx"),ie=r("./app/components/menuItem.tsx"),le=r("./app/components/navigationButtonGroup.tsx"),ue=r("./app/components/textOverflow.tsx"),ce=r("./app/utils/analytics.tsx"),de=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function he(e){var t=e.location,r=e.organization,o=e.projectSlug,s=e.release,n=e.releaseMeta,a=e.refetchData;function i(){return(i=(0,J.Z)($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,ee.VE)(new te.KU,{orgSlug:r.slug,projectSlug:o,releaseVersion:s.version});case 3:K.browserHistory.push("/organizations/".concat(r.slug,"/releases/")),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function l(){return(l=(0,J.Z)($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,ee.aQ)(new te.KU,{orgSlug:r.slug,projectSlug:o,releaseVersion:s.version});case 3:a(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function u(e){return(0,de.tZ)("h4",{children:(0,de.tZ)(ue.Z,{children:e})})}function c(e){return(0,de.BX)(h.Fragment,{children:[e,(0,de.tZ)(je,{children:(t=n.projects.slice(0,5),r=n.projects.length-t.length,(0,de.BX)(h.Fragment,{children:[t.map((function(e){return(0,de.tZ)(ae.Z,{project:e,avatarSize:18},e.slug)})),r>0&&(0,de.tZ)("span",{children:(0,de.BX)(Y.Z,{title:s.projects.slice(5).map((function(e){return e.slug})).join(", "),children:["+ ",(0,C.tn)("%s other project","%s other projects",r)]})})]}))}),(0,C.t)("Are you sure you want to do this?")]});var t,r}function d(e){return e?{pathname:t.pathname.replace(encodeURIComponent(s.version),e).replace(s.version,e),query:me(me({},t.query),{},{activeRepo:void 0})}:""}function p(e){(0,ce.ec)({eventKey:"release_detail.pagination",eventName:"Release Detail: Pagination",organization_id:parseInt(r.id,10),direction:e})}var m=s.currentProjectMeta,f=m.nextReleaseVersion,g=m.prevReleaseVersion,j=m.firstReleaseVersion,y=m.lastReleaseVersion;return(0,de.BX)(oe.ZP,{gap:1,children:[(0,de.tZ)(le.Z,{hasPrevious:!!g,hasNext:!!f,links:[d(j),d(g),d(f),d(y)],onOldestClick:function(){return p("oldest")},onOlderClick:function(){return p("older")},onNewerClick:function(){return p("newer")},onNewestClick:function(){return p("newest")}}),(0,de.tZ)(ge,{caret:!1,anchorRight:window.innerWidth>992,title:(0,de.tZ)(fe,{icon:(0,de.tZ)(R.YR,{}),label:(0,C.t)("Actions")}),children:(0,A.rF)(s)?(0,de.tZ)(se.Z,{onConfirm:function(){return l.apply(this,arguments)},header:u((0,C._N)("Restore Release [release]",{release:(0,B.ko)(s.version)})),message:c((0,C.tn)("You are restoring this release for the following project:","By restoring this release, you are also restoring it for the following projects:",n.projects.length)),cancelText:(0,C.t)("Nevermind"),confirmText:(0,C.t)("Restore"),children:(0,de.tZ)(ie.Z,{children:(0,C.t)("Restore")})}):(0,de.tZ)(se.Z,{onConfirm:function(){return i.apply(this,arguments)},header:u((0,C._N)("Archive Release [release]",{release:(0,B.ko)(s.version)})),message:c((0,C.tn)("You are archiving this release for the following project:","By archiving this release, you are also archiving it for the following projects:",n.projects.length)),cancelText:(0,C.t)("Nevermind"),confirmText:(0,C.t)("Archive"),children:(0,de.tZ)(ie.Z,{children:(0,C.t)("Archive")})})})]})}he.displayName="ReleaseActions";var fe=(0,m.Z)(re.ZP,{target:"e13w85ly2"})({name:"1hdaf3v",styles:"width:40px;height:40px;padding:0"}),ge=(0,m.Z)(ne.Z,{target:"e13w85ly1"})({name:"1lgqri0",styles:"&+.dropdown-menu{top:50px!important;}"}),je=(0,m.Z)("div",{target:"e13w85ly0"})("margin:",(0,k.Z)(2)," 0 ",(0,k.Z)(2)," ",(0,k.Z)(2),";display:grid;gap:",(0,k.Z)(.5),";img{border:none!important;box-shadow:none!important;}"),ye=he,ve=function(e){var t=e.location,r=e.organization,o=e.release,s=e.project,n=e.releaseMeta,a=e.refetchData,i=o.version,l=o.url,u=n.commitCount,c=n.commitFilesChanged,d="/organizations/".concat(r.slug,"/releases/").concat(encodeURIComponent(i),"/"),p=[{title:(0,C.t)("Overview"),to:""},{title:(0,de.BX)(h.Fragment,{children:[(0,C.t)("Commits")," ",(0,de.tZ)(Se,{text:(0,B.Du)(u)})]}),to:"commits/"},{title:(0,de.BX)(h.Fragment,{children:[(0,C.t)("Files Changed"),(0,de.tZ)(Se,{text:(0,B.Du)(c)})]}),to:"files-changed/"}];return(0,de.BX)(U.h4,{children:[(0,de.BX)(U.oB,{children:[(0,de.tZ)(M.Z,{crumbs:[{to:"/organizations/".concat(r.slug,"/releases/"),label:(0,C.t)("Releases"),preserveGlobalSelection:!0},{label:(0,C.t)("Release Details")}]}),(0,de.tZ)(U.Dx,{children:(0,de.BX)(be,{children:[(0,de.tZ)(H.Z,{project:s,avatarSize:28,hideName:!0}),(0,de.tZ)(Ze,{version:i,anchor:!1,truncate:!0}),(0,de.tZ)(xe,{children:(0,de.tZ)(F.Z,{value:i,children:(0,de.tZ)(Y.Z,{title:i,containerDisplayMode:"flex",children:(0,de.tZ)(R.vU,{})})})}),!!l&&(0,de.tZ)(xe,{children:(0,de.tZ)(Y.Z,{title:l,children:(0,de.tZ)(V.Z,{href:l,children:(0,de.tZ)(R.V$,{})})})})]})})]}),(0,de.tZ)(U.kP,{children:(0,de.tZ)(ye,{organization:r,projectSlug:s.slug,release:o,releaseMeta:n,refetchData:a,location:t})}),(0,de.tZ)(h.Fragment,{children:(0,de.tZ)(Pe,{children:p.map((function(e){return(0,de.tZ)(G.Z,{to:(r=e.to,{pathname:d+r,query:g()(t.query,Object.values(O.nF))}),isActive:function(){return((r=p.filter((function(e){return e.to.length})).find((function(e){return t.pathname.endsWith(e.to)})))?r.to:p[0].to)===e.to;var r},children:e.title},e.to);var r}))})})]})};ve.displayName="ReleaseHeader";var be=(0,m.Z)("div",{target:"e4tsdqb4"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Ze=(0,m.Z)(X.Z,{target:"e4tsdqb3"})("margin-left:",(0,k.Z)(1),";"),xe=(0,m.Z)("span",{target:"e4tsdqb2"})("transition:color 0.3s ease-in-out;margin-left:",(0,k.Z)(1),";&,a{color:",(function(e){return e.theme.gray300}),";display:flex;&:hover{cursor:pointer;color:",(function(e){return e.theme.textColor}),";}}"),Pe=(0,m.Z)(Q.Z,{target:"e4tsdqb1"})({name:"13jhhqe",styles:"margin-bottom:0;width:100%"}),Se=(0,m.Z)(N.Z,{target:"e4tsdqb0"})("@media (max-width: ",(function(e){return e.theme.breakpoints[0]}),"){display:none;}"),we=ve,_e=["start","end","statsPeriod","utc"];function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=(0,d.Z)(e);if(t){var s=(0,d.Z)(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return(0,c.Z)(this,r)}}var Ee=(0,h.createContext)({}),ke=function(e){(0,u.Z)(r,e);var t=Ce(r);function r(){var e;(0,n.Z)(this,r);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s)),(0,p.Z)((0,i.Z)(e),"shouldReload",!0),e}return(0,a.Z)(r,[{key:"getTitle",value:function(){var e=this.props,t=e.params,r=e.organization,o=e.selection,s=this.state.release,n=null==s?void 0:s.projects.find((function(e){return e.id===o.projects[0]}));return(0,D.Z)((0,C.t)("Release %s",(0,B.ko)(t.release)),r.slug,!1,null==n?void 0:n.slug)}},{key:"getDefaultState",value:function(){return Re(Re({},(0,l.Z)((0,d.Z)(r.prototype),"getDefaultState",this).call(this)),{},{deploys:[],sessions:null})}},{key:"getEndpoints",value:function(){var e,t=this.props,r=t.organization,o=t.location,n=t.params,a=t.releaseMeta,i=t.defaultStatsPeriod,l="/organizations/".concat(r.slug,"/releases/").concat(encodeURIComponent(n.release),"/"),u=[["release",l,{query:Re({adoptionStages:1},(0,S.Q)(g()(o.query,(0,s.Z)(Object.values(O.nF))),{defaultStatsPeriod:i}))}]];return a.deployCount>0&&u.push(["deploys","".concat(l,"deploys/")]),u.push(["sessions","/organizations/".concat(r.slug,"/sessions/"),{query:{project:o.query.project,environment:null!==(e=o.query.environment)&&void 0!==e?e:[],query:'release:"'.concat(n.release,'"'),field:"sum(session)",statsPeriod:"90d",interval:"1d"}}]),u}},{key:"renderError",value:function(){var e,t=Object.values(this.state.errors).find((function(e){return 404===(null==e?void 0:e.status)||403===(null==e?void 0:e.status)}));if(t)return(0,de.tZ)(E.JH,{children:(0,de.tZ)(v.Z,{type:"error",icon:(0,de.tZ)(R.FC,{}),children:(0,C.t)("This release may not be in your selected project.")})});for(var o=arguments.length,s=new Array(o),n=0;n<o;n++)s[n]=arguments[n];return(e=(0,l.Z)((0,d.Z)(r.prototype),"renderError",this)).call.apply(e,[this].concat(s))}},{key:"renderLoading",value:function(){return(0,de.tZ)(E.JH,{children:(0,de.tZ)(x.Z,{})})}},{key:"renderBody",value:function(){var e=this.props,t=e.organization,r=e.location,o=e.selection,s=e.releaseMeta,n=e.defaultStatsPeriod,a=e.getHealthData,i=e.isHealthLoading,l=this.state,u=l.release,c=l.deploys,d=l.sessions,p=l.reloading,m=null==u?void 0:u.projects.find((function(e){return e.id===o.projects[0]})),h=(0,A.C8)(u);return m&&u?(0,de.tZ)(Z.Z,{organization:t,children:(0,de.BX)(De,{children:[(0,de.tZ)(we,{location:r,organization:t,release:u,project:m,releaseMeta:s,refetchData:this.fetchData}),(0,de.tZ)(Ee.Provider,{value:{release:u,project:m,deploys:c,releaseMeta:s,refetchData:this.fetchData,defaultStatsPeriod:n,getHealthData:a,isHealthLoading:i,hasHealthData:!(null==d||!d.groups[0].totals["sum(session)"]),releaseBounds:h},children:this.props.children})]})}):p?(0,de.tZ)(x.Z,{}):null}}]),r}(T.Z),Be=function(e){(0,u.Z)(r,e);var t=Ce(r);function r(){var e;(0,n.Z)(this,r);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s)),(0,p.Z)((0,i.Z)(e),"shouldReload",!0),e}return(0,a.Z)(r,[{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,r=e.params;return[["releaseMeta","/organizations/".concat(t.slug,"/releases/").concat(encodeURIComponent(r.release),"/meta/")]]}},{key:"hasReleaseComparison",get:function(){return this.props.organization.features.includes("release-comparison")}},{key:"componentDidMount",value:function(){this.removeGlobalDateTimeFromUrl()}},{key:"componentDidUpdate",value:function(e,t){(0,l.Z)((0,d.Z)(r.prototype),"componentDidUpdate",this).call(this,e,t),this.removeGlobalDateTimeFromUrl()}},{key:"removeGlobalDateTimeFromUrl",value:function(){var e=this.props,t=e.router,r=e.location,s=r.query,n=s.start,a=s.end,i=s.statsPeriod,l=s.utc,u=(0,o.Z)(s,_e);this.hasReleaseComparison&&(n||a||i||l)&&t.replace(Re(Re({},r),{},{query:u}))}},{key:"renderError",value:function(){var e,t=Object.values(this.state.errors).find((function(e){return 404===(null==e?void 0:e.status)}));if(t)return(0,de.tZ)(E.JH,{children:(0,de.tZ)(v.Z,{type:"error",icon:(0,de.tZ)(R.FC,{}),children:(0,C.t)("This release could not be found.")})});for(var o=arguments.length,s=new Array(o),n=0;n<o;n++)s[n]=arguments[n];return(e=(0,l.Z)((0,d.Z)(r.prototype),"renderError",this)).call.apply(e,[this].concat(s))}},{key:"isProjectMissingInUrl",value:function(){var e=this.props.location.query.project;return!e||"string"!=typeof e}},{key:"renderLoading",value:function(){return(0,de.tZ)(E.JH,{children:(0,de.tZ)(x.Z,{})})}},{key:"renderProjectsFooterMessage",value:function(){return(0,de.BX)(ze,{children:[(0,de.tZ)(R.aU,{size:"xs"})," ",(0,C.t)("Only projects with this release are visible.")]})}},{key:"renderBody",value:function(){var e=this,t=this.props,r=t.organization,o=t.params,s=t.router,n=t.location,a=t.selection,i=this.state.releaseMeta;if(!i)return null;var l=i.projects,u=y()(i.released).isAfter(y()().subtract(24,"hours"))?"24h":_.GY;return this.isProjectMissingInUrl()?(0,de.tZ)(w.Z,{projects:l.map((function(e){var t=e.id,r=e.slug;return{id:String(t),slug:r}})),router:s,nextPath:{pathname:"/organizations/".concat(r.slug,"/releases/").concat(encodeURIComponent(o.release),"/")},noProjectRedirectPath:"/organizations/".concat(r.slug,"/releases/")}):(0,de.tZ)(P.Z,{lockedMessageSubject:(0,C.t)("release"),shouldForceProject:1===l.length,forceProject:1===l.length?Re(Re({},l[0]),{},{id:String(l[0].id)}):void 0,specificProjectSlugs:l.map((function(e){return e.slug})),disableMultipleProjectSelection:!0,showProjectSettingsLink:!0,projectsFooterMessage:this.renderProjectsFooterMessage(),defaultSelection:{datetime:{start:null,end:null,utc:!1,period:u}},showDateSelector:!this.hasReleaseComparison,children:(0,de.tZ)(L.ZP,{releases:[o.release],organization:r,selection:a,location:n,display:[q.zY.SESSIONS,q.zY.USERS],defaultStatsPeriod:u,disable:this.hasReleaseComparison,children:function(t){var r=t.isHealthLoading,o=t.getHealthData;return(0,de.tZ)(ke,Re(Re({},e.props),{},{releaseMeta:i,defaultStatsPeriod:u,getHealthData:o,isHealthLoading:r}))}})})}}]),r}(b.Z),De=(0,m.Z)(E.JH,{target:"eii7qn31"})({name:"1hcx8jb",styles:"padding:0"}),ze=(0,m.Z)("div",{target:"eii7qn30"})("display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-gap:",(0,k.Z)(1),";"),Ie=(0,z.Z)((0,I.Z)(Be))},"./app/views/releases/list/utils.tsx":function(e,t,r){"use strict";var o,s,n;r.d(t,{Y7:function(){return o},zY:function(){return s},L4:function(){return n}}),function(e){e.CRASH_FREE_USERS="crash_free_users",e.CRASH_FREE_SESSIONS="crash_free_sessions",e.USERS_24_HOURS="users_24h",e.SESSIONS_24_HOURS="sessions_24h",e.SESSIONS="sessions",e.DATE="date",e.BUILD="build",e.SEMVER="semver",e.ADOPTION="adoption"}(o||(o={})),function(e){e.USERS="users",e.SESSIONS="sessions"}(s||(s={})),function(e){e.ACTIVE="active",e.ARCHIVED="archived"}(n||(n={}))},"./app/views/releases/utils/index.tsx":function(e,t,r){"use strict";r.d(t,{hf:function(){return j},G5:function(){return y},Mf:function(){return v},zB:function(){return b},G$:function(){return Z},xP:function(){return x},PS:function(){return P},eY:function(){return S},rF:function(){return w},gs:function(){return _},C8:function(){return O},O7:function(){return R}});var o=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),s=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.object.values.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/lodash/pick.js")),n=r.n(s),a=r("../node_modules/lodash/round.js"),i=r.n(a),l=r("../node_modules/moment/moment.js"),u=r.n(l),c=r("./app/components/organizations/globalSelectionHeader/getParams.tsx"),d=r("./app/constants/globalSelectionHeader.tsx"),p=r("./app/locale.tsx"),m=r("./app/types/index.tsx"),h=r("./app/utils/tokenizeSearch.tsx"),f=r("./app/views/issueList/utils.tsx"),g=r("./app/views/releases/list/utils.tsx"),j=95,y=function(e){return i()(e,e>60?0:3)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return i()(e,e>t?r:0)},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(isNaN(e))return"―";if(e<1&&e>0)return"<1%";var o=v(e,t,r).toLocaleString();return"".concat(o,"%")},Z=function(e){return"".concat(function(e){return i()(e,3)}(e).toLocaleString(),"%")},x=function(e,t){return"".concat(Math.abs(i()(e,t&&t>j?3:0)).toLocaleString(),"%")},P=function(e,t,r){return{pathname:"/organizations/".concat(e,"/issues/"),query:{project:t,statsPeriod:void 0,start:void 0,end:void 0,query:new h.an(["firstRelease:".concat(r)]).formatString(),sort:f.qh.FREQ}}},S=function(e,t,r){return{pathname:"/organizations/".concat(e,"/issues/"),query:{project:t,query:new h.an(["release:".concat(r),"error.unhandled:true"]).formatString(),sort:f.qh.FREQ}}},w=function(e){return e.status===m.dE.Archived};function _(e,t){return e===g.zY.USERS?(0,p.tn)("user","users",t):(0,p.tn)("session","sessions",t)}function O(e){var t,r=e||{},o=r.lastEvent,s=r.currentProjectMeta,n=r.dateCreated,a=(s||{}).sessionsUpperBound;return{releaseStart:n,releaseEnd:null!==(t=u()(a).isAfter(o)?a:o)&&void 0!==t?t:u()().utc().format()}}function R(e){var t=e.location,r=e.releaseBounds,s=e.defaultStatsPeriod,a=e.allowEmptyPeriod,i=(0,c.Q)(n()(t.query,[].concat((0,o.Z)(Object.values(d.nF)),(0,o.Z)(Object.values(d.V)),["cursor"])),{allowAbsolutePageDatetime:!0,defaultStatsPeriod:s,allowEmptyPeriod:a});return Object.keys(i).some((function(e){return[d.nF.START,d.nF.END,d.nF.UTC,d.nF.PERIOD].includes(e)}))||(i[d.nF.START]=r.releaseStart,i[d.nF.END]=r.releaseEnd),i}},"./app/views/releases/utils/releaseHealthRequest.tsx":function(e,t,r){"use strict";r.d(t,{Yr:function(){return A},pE:function(){return L}}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var o=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),s=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),n=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),a=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),l=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),u=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),c=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),d=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),p=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),m=r("../node_modules/@babel/runtime/regenerator/index.js"),h=r.n(m),f=(r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.promise.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.object.values.js"),r("../node_modules/core-js/modules/es.set.js"),r("../node_modules/react/index.js")),g=r("../node_modules/lodash/isEqual.js"),j=r.n(g),y=r("../node_modules/lodash/omit.js"),v=r.n(y),b=r("../node_modules/lodash/pick.js"),Z=r.n(b),x=r("../node_modules/moment/moment.js"),P=r.n(x),S=r("./app/actionCreators/indicator.tsx"),w=r("./app/components/charts/utils.tsx"),_=r("./app/components/organizations/globalSelectionHeader/getParams.tsx"),O=r("./app/constants/globalSelectionHeader.tsx"),R=r("./app/locale.tsx"),C=r("./app/types/index.tsx"),E=r("./app/utils.tsx"),k=r("./app/utils/tokenizeSearch.tsx"),B=r("./app/utils/withApi.tsx"),D=r("./app/views/releases/list/utils.tsx"),z=r("./app/views/releases/utils/index.tsx");function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e){return v()(e,["api","organization","children","selection.datetime.utc","location"])}function A(e,t,r){var o;return null===(o=t.series[r])||void 0===o||o.forEach((function(t,r){var o;return e[r]=(null!==(o=e[r])&&void 0!==o?o:0)+t})),e}function L(e){switch(e){case D.zY.USERS:return"count_unique(user)";case D.zY.SESSIONS:default:return"sum(session)"}}var N=function(e){(0,u.Z)(b,e);var t,r,m,f,g,y,v=(g=b,y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,d.Z)(g);if(y){var r=(0,d.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function b(){var e;(0,a.Z)(this,b);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=v.call.apply(v,[this].concat(r)),(0,p.Z)((0,l.Z)(e),"state",{loading:!1,errored:!1,statusCountByReleaseInPeriod:null,totalCountByReleaseIn24h:null,totalCountByProjectIn24h:null,statusCountByProjectInPeriod:null}),(0,p.Z)((0,l.Z)(e),"fetchData",(0,n.Z)(h().mark((function t(){var r,o,n,a,i,l,u,c,d,p,m,f;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,o=r.api,n=r.healthStatsPeriod,!r.disable){t.next=3;break}return t.abrupt("return");case 3:return o.clear(),e.setState({loading:!0,errored:!1,statusCountByReleaseInPeriod:null,totalCountByReleaseIn24h:null,totalCountByProjectIn24h:null}),a=[e.fetchStatusCountByReleaseInPeriod(),e.fetchTotalCountByReleaseIn24h(),e.fetchTotalCountByProjectIn24h()],n===C.$A.AUTO&&a.push(e.fetchStatusCountByProjectInPeriod()),t.prev=7,t.next=10,Promise.all(a);case 10:i=t.sent,l=(0,s.Z)(i,4),u=l[0],c=l[1],d=l[2],p=l[3],e.setState({loading:!1,statusCountByReleaseInPeriod:u,totalCountByReleaseIn24h:c,totalCountByProjectIn24h:d,statusCountByProjectInPeriod:p}),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(7),(0,S.Iw)(null!==(m=null===(f=t.t0.responseJSON)||void 0===f?void 0:f.detail)&&void 0!==m?m:(0,R.t)("Error loading health data")),e.setState({loading:!1,errored:!0});case 23:case"end":return t.stop()}}),t,null,[[7,19]])})))),(0,p.Z)((0,l.Z)(e),"getHealthData",(function(){return{getCrashCount:e.getCrashCount,getCrashFreeRate:e.getCrashFreeRate,get24hCountByRelease:e.get24hCountByRelease,get24hCountByProject:e.get24hCountByProject,getTimeSeries:e.getTimeSeries,getAdoption:e.getAdoption}})),(0,p.Z)((0,l.Z)(e),"getCrashCount",(function(t,r,o){var s,n=e.state.statusCountByReleaseInPeriod,a=L(o);return null==n||null===(s=n.groups.find((function(e){var o=e.by;return o.release===t&&o.project===r&&"crashed"===o["session.status"]})))||void 0===s?void 0:s.totals[a]})),(0,p.Z)((0,l.Z)(e),"getCrashFreeRate",(function(t,r,o){var s,n=e.state.statusCountByReleaseInPeriod,a=L(o),i=null==n||null===(s=n.groups.filter((function(e){var o=e.by;return o.release===t&&o.project===r})))||void 0===s?void 0:s.reduce((function(e,t){return e+t.totals[a]}),0),l=e.getCrashCount(t,r,o);return(0,E.ri)(i)&&0!==i?(0,z.Mf)(100-(0,E.aQ)(null!=l?l:0,null!=i?i:0)):null})),(0,p.Z)((0,l.Z)(e),"get24hCountByRelease",(function(t,r,o){var s,n=e.state.totalCountByReleaseIn24h,a=L(o);return null==n||null===(s=n.groups.filter((function(e){var o=e.by;return o.release===t&&o.project===r})))||void 0===s?void 0:s.reduce((function(e,t){return e+t.totals[a]}),0)})),(0,p.Z)((0,l.Z)(e),"get24hCountByProject",(function(t,r){var o,s=e.state.totalCountByProjectIn24h,n=L(r);return null==s||null===(o=s.groups.filter((function(e){return e.by.project===t})))||void 0===o?void 0:o.reduce((function(e,t){return e+t.totals[n]}),0)})),(0,p.Z)((0,l.Z)(e),"getTimeSeries",(function(t,r,o){return e.props.healthStatsPeriod===C.$A.AUTO?e.getPeriodTimeSeries(t,r,o):e.get24hTimeSeries(t,r,o)})),(0,p.Z)((0,l.Z)(e),"get24hTimeSeries",(function(t,r,o){var s,n,a,i=e.state,l=i.totalCountByReleaseIn24h,u=i.totalCountByProjectIn24h,c=L(o),d=null!==(s=null==u?void 0:u.intervals)&&void 0!==s?s:[],p=null==u||null===(n=u.groups.find((function(e){return e.by.project===r})))||void 0===n?void 0:n.series[c],m=null==l||null===(a=l.groups.find((function(e){var o=e.by;return o.project===r&&o.release===t})))||void 0===a?void 0:a.series[c];return[{seriesName:(0,R.t)("This Release"),data:null==d?void 0:d.map((function(e,t){var r;return{name:P()(e).valueOf(),value:null!==(r=null==m?void 0:m[t])&&void 0!==r?r:0}}))},{seriesName:(0,R.t)("Total Project"),data:null==d?void 0:d.map((function(e,t){var r;return{name:P()(e).valueOf(),value:null!==(r=null==p?void 0:p[t])&&void 0!==r?r:0}})),z:0}]})),(0,p.Z)((0,l.Z)(e),"getPeriodTimeSeries",(function(t,r,o){var s,n,a,i=e.state,l=i.statusCountByReleaseInPeriod,u=i.statusCountByProjectInPeriod,c=L(o),d=null!==(s=null==u?void 0:u.intervals)&&void 0!==s?s:[],p=null==u||null===(n=u.groups.filter((function(e){return e.by.project===r})))||void 0===n?void 0:n.reduce((function(e,t){return A(e,t,c)}),[]),m=null==l||null===(a=l.groups.filter((function(e){var o=e.by;return o.project===r&&o.release===t})))||void 0===a?void 0:a.reduce((function(e,t){return A(e,t,c)}),[]);return[{seriesName:(0,R.t)("This Release"),data:null==d?void 0:d.map((function(e,t){var r;return{name:P()(e).valueOf(),value:null!==(r=null==m?void 0:m[t])&&void 0!==r?r:0}}))},{seriesName:(0,R.t)("Total Project"),data:null==d?void 0:d.map((function(e,t){var r;return{name:P()(e).valueOf(),value:null!==(r=null==p?void 0:p[t])&&void 0!==r?r:0}})),z:0}]})),(0,p.Z)((0,l.Z)(e),"getAdoption",(function(t,r,o){var s=e.get24hCountByRelease(t,r,o),n=e.get24hCountByProject(r,o);return(0,E.ri)(s)&&(0,E.ri)(n)?(0,E.aQ)(s,n):void 0})),e}return(0,i.Z)(b,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){this.props.releasesReloading||j()(q(e),q(this.props))||this.fetchData()}},{key:"path",get:function(){var e=this.props.organization;return"/organizations/".concat(e.slug,"/sessions/")}},{key:"baseQueryParams",get:function(){var e,t,r=this.props,o=r.location,s=r.selection,n=r.defaultStatsPeriod,a=r.releases;return T({query:new k.an(a.reduce((function(e,t,r,o){return e.push('release:"'.concat(t,'"')),r<o.length-1&&e.push("OR"),e}),[])).formatString(),interval:(e=s.datetime,t=(0,w.Nm)(e),t>=w.$i?"1d":t>=w.IZ?"6h":t>w.w3?"4h":"1h")},(0,_.Q)(Z()(o.query,Object.values(O.nF)),{defaultStatsPeriod:n}))}},{key:"fetchStatusCountByReleaseInPeriod",value:(f=(0,n.Z)(h().mark((function e(){var t,r,s,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.api,s=t.display,e.next=3,r.requestPromise(this.path,{query:T(T({},this.baseQueryParams),{},{field:(0,o.Z)(new Set([].concat((0,o.Z)(s.map((function(e){return L(e)}))),["sum(session)"]))),groupBy:["project","release","session.status"]})});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"fetchStatusCountByProjectInPeriod",value:(m=(0,n.Z)(h().mark((function e(){var t,r,s,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.api,s=t.display,e.next=3,r.requestPromise(this.path,{query:T(T({},this.baseQueryParams),{},{query:void 0,field:(0,o.Z)(new Set([].concat((0,o.Z)(s.map((function(e){return L(e)}))),["sum(session)"]))),groupBy:["project","session.status"]})});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"fetchTotalCountByReleaseIn24h",value:(r=(0,n.Z)(h().mark((function e(){var t,r,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.api,o=t.display,e.next=3,r.requestPromise(this.path,{query:T(T({},this.baseQueryParams),{},{field:o.map((function(e){return L(e)})),groupBy:["project","release"],interval:"1h",statsPeriod:"24h"})});case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"fetchTotalCountByProjectIn24h",value:(t=(0,n.Z)(h().mark((function e(){var t,r,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.api,o=t.display,e.next=3,r.requestPromise(this.path,{query:T(T({},this.baseQueryParams),{},{query:void 0,field:o.map((function(e){return L(e)})),groupBy:["project"],interval:"1h",statsPeriod:"24h"})});case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.loading,r=e.errored;return(0,this.props.children)({isHealthLoading:t,errored:r,getHealthData:this.getHealthData()})}}]),b}(f.Component);N.displayName="ReleaseHealthRequest",t.ZP=(0,B.Z)(N)}}]);
//# sourceMappingURL=../sourcemaps/app_views_releases_detail_index_tsx.87fc13bb23e8ba04a263c040d170da47.js.map