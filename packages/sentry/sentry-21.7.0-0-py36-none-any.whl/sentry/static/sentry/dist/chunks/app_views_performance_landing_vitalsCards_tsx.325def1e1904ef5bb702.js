(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_landing_vitalsCards_tsx"],{"./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var n=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.object.values.js"),r("../node_modules/react/index.js"),r("../node_modules/lodash/pick.js")),a=r.n(s),l=r("./app/utils/discover/genericDiscoverQuery.tsx"),u=r("./app/utils/performance/constants.tsx"),d=r("./app/utils/withApi.tsx"),c=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),p=["tableData"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e){var t=e.eventView,r=e.vitals,n=null==t?void 0:t.getEventsAPIPayload(e.location);return h({vital:r},a()(n,["query"].concat((0,o.Z)(Object.values(u.s)))))}function f(e){return(0,c.tZ)(l.Z,h(h({getRequestPayload:v,route:"events-vitals"},e),{},{children:function(t){var r=t.tableData,o=(0,n.Z)(t,p);return e.children(h({vitalsData:r},o))}}))}f.displayName="VitalsCardsDiscoverQuery",t.Z=(0,d.Z)(f)},"./app/views/performance/landing/vitalsCards.tsx":function(e,t,r){"use strict";r.d(t,{M9:function(){return J},q7:function(){return T},JO:function(){return ee}});var n=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),o=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.symbol.description.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.number.to-fixed.js"),r("../node_modules/react/index.js")),s=r("./app/components/card.tsx"),a=r("./app/components/charts/eventsRequest.tsx"),l=r("./app/components/charts/styles.tsx"),u=r("./app/components/charts/utils.tsx"),d=r("./app/components/emptyStateWarning.tsx"),c=r("./app/components/links/link.tsx"),p=r("./app/components/placeholder.tsx"),m=r("./app/components/questionTooltip.tsx"),h=(r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),v=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),f=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),g=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),y=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),j=r("../node_modules/react-sparklines/build/index.js"),Z=r("../node_modules/prop-types/index.js"),b=r.n(Z);var x=function(e){(0,v.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,g.Z)(t);if(r){var o=(0,g.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,f.Z)(this,e)});function o(){return(0,h.Z)(this,o),n.apply(this,arguments)}return o}(j.Sparklines);(0,y.Z)(x,"propTypes",{children:b().node,data:b().array,limit:b().number,width:b().number,height:b().number,svgWidth:b().number,svgHeight:b().number,preserveAspectRatio:b().string,margin:b().number,style:b().object,min:b().number,max:b().number,onMouseMove:b().func});var w=r("./app/locale.tsx"),_=r("./app/styles/overflowEllipsis.tsx"),P=r("./app/styles/space.tsx"),k=r("./app/utils/dates.tsx"),O=r("./app/utils/discover/discoverQuery.tsx"),S=r("./app/utils/discover/fields.tsx"),C=r("./app/utils/performance/vitals/constants.tsx"),N=r("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),D=r("./app/utils/queryString.tsx"),A=r("./app/utils/theme.tsx"),B=r("./app/utils/withApi.tsx"),z=(r("../node_modules/core-js/modules/es.array.join.js"),r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js")),E=function(e){return(0,z.tZ)(R,{fractions:e.colorStops.map((function(e){return e.percent})),children:e.colorStops.map((function(e){return(0,z.tZ)(V,{color:e.color},e.color)}))})};E.displayName="ColorBar";var R=(0,o.Z)("div",{target:"etd41501"})("height:16px;width:100%;overflow:hidden;position:relative;background:",(function(e){return e.theme.gray100}),";display:grid;grid-template-columns:",(function(e){return e.fractions.map((function(e){return"".concat(e,"fr")})).join(" ")}),";margin-bottom:",(0,P.Z)(1),";border-radius:2px;"),V=(0,o.Z)("div",{target:"etd41500"})("background-color:",(function(e){return e.theme[e.color]}),";"),q=E,L=r("./app/views/performance/vitalDetail/utils.tsx"),M=r("./app/components/tooltip.tsx"),F=r("./app/utils/formatters.tsx");function H(e,t){switch(t){case L.SP.POOR:return Array.isArray(e)?(0,w.t)("Poor"):(0,w._N)("Poor: >[threshold]ms",{threshold:L.eE[e]});case L.SP.MEH:return Array.isArray(e)?(0,w.t)("Meh"):(0,w._N)("Meh: >[threshold]ms",{threshold:L.MN[e]});case L.SP.GOOD:return Array.isArray(e)?(0,w.t)("Good"):(0,w._N)("Good: <[threshold]ms",{threshold:L.MN[e]});default:return null}}function X(e){return(0,z.tZ)(G,{children:e.percents.map((function(t){return(0,z.tZ)(M.Z,{title:H(e.vital,t.vitalState),children:(0,z.BX)(I,{children:[L.Np[t.vitalState],(0,z.BX)("span",{children:[e.showVitalPercentNames&&(0,w.t)("".concat(t.vitalState))," ",(0,F.rl)(t.percent,0)]})]})},t.vitalState)}))})}X.displayName="VitalPercents";var G=(0,o.Z)("div",{target:"ex3thpn1"})("display:inline-grid;grid-auto-flow:column;gap:",(0,P.Z)(2),";"),I=(0,o.Z)("div",{target:"ex3thpn0"})("display:flex;align-items:center;gap:",(0,P.Z)(.5),";font-size:",(function(e){return e.theme.fontSizeMedium}),";"),Q=r("./app/views/performance/landing/utils.tsx");function T(e){var t=e.eventView,r=e.location,n=e.organization,o=e.projects,i=e.frontendOnly;if(void 0!==i&&i&&(0,Q.Oo)(o,t)!==Q.BY.FRONTEND_PAGELOAD)return null;var s=[S.Zl.FCP,S.Zl.LCP,S.Zl.FID,S.Zl.CLS];return(0,z.tZ)(N.Z,{eventView:t,location:r,orgSlug:n.slug,vitals:s,children:function(e){var o=e.isLoading,i=e.vitalsData;return(0,z.tZ)($,{children:s.map((function(e){var s,a,l,u=(0,L.i4)({orgSlug:n.slug,query:t.generateQueryStringObject(),vitalName:e,projectID:(0,D.qP)(r.query.project)}),d=o?"—":ie(null!==(s=null==i?void 0:i[e])&&void 0!==s?s:null,e),p=(0,z.tZ)(W,{children:(0,z.tZ)(ee,{isLoading:o,vital:e,data:i})});return(0,z.tZ)(c.Z,{to:u,"data-test-id":"vitals-linked-card-".concat(L.a7[e]),children:(0,z.tZ)(re,{title:null!==(a=L.jo[e])&&void 0!==a?a:"",tooltip:null!==(l=C.r[e].description)&&void 0!==l?l:"",value:o?"—":d,chart:p,minHeight:150})},e)}))})}})}T.displayName="FrontendCards";var W=(0,o.Z)("div",{target:"e1he14ku8"})("margin-top:",(0,P.Z)(1.5),";");function Y(e){var t=e.api,r=e.eventView,o=e.location,i=e.organization,s=["p75","tpm","failure_rate","apdex"],l=s.map((function(e){return(0,Q.Fj)(e,i)})),d=r.withColumns(l),c=d.getGlobalSelection(),p=c.datetime.start?(0,k.hC)(c.datetime.start):void 0,m=c.datetime.end?(0,k.hC)(c.datetime.end):void 0,h=d.getEventsAPIPayload(o);return(0,z.tZ)(O.Z,{location:o,eventView:d,orgSlug:i.slug,limit:1,referrer:"api.performance.vitals-cards",children:function(e){var r=e.isLoading,o=e.tableData;return(0,z.tZ)(a.Z,{api:t,organization:i,period:c.datetime.period,project:c.projects,environment:c.environments,team:h.team,start:p,end:m,interval:(0,u.ZS)({start:p||null,end:m||null,period:c.datetime.period}),query:h.query,includePrevious:!1,yAxis:d.getFields(),partial:!0,children:function(e){var t=e.results,a=null==t?void 0:t.reduce((function(e,t){return e[t.seriesName]=t.data.map((function(e){return e.value})),e}),{}),l=d.getFields().map((function(e,t){return[s[t],e,null==a?void 0:a[e]]}));return(0,z.tZ)($,{children:l.map((function(e){var t,s,a=(0,n.Z)(e,3),l=a[0],u=a[1],d=a[2],c=(0,Q.X6)(i)[l],p=c.title,m=c.tooltip,h=c.formatter,v=(0,S.LY)(u),f=null==o||null===(t=o.data)||void 0===t||null===(s=t[0])||void 0===s?void 0:s[v],g=r||void 0===f?"—":h(f),y=(0,z.tZ)(K,{data:d});return(0,z.tZ)(re,{title:p,tooltip:m,value:g,chart:y,horizontal:!0,minHeight:96,isNotInteractive:!0},l)}))})}})}})}Y.displayName="_BackendCards";var J=(0,B.Z)(Y);function K(e){var t=e.data,r=A.ZP.charts.getColorPalette(1)[0];return(0,z.tZ)(U,{"data-test-id":"sparkline",width:150,height:24,children:(0,z.tZ)(x,{data:t,width:150,height:24,children:(0,z.tZ)(j.SparklinesLine,{style:{stroke:r,fill:"none",strokeWidth:3}})})})}K.displayName="SparklineChart";var U=(0,o.Z)("div",{target:"e1he14ku7"})("flex-grow:4;max-height:",(function(e){return e.height}),"px;max-width:",(function(e){return e.width}),"px;margin:",(0,P.Z)(1)," ",(0,P.Z)(0)," ",(0,P.Z)(.5)," ",(0,P.Z)(3),";"),$=(0,o.Z)("div",{target:"e1he14ku6"})("display:grid;grid-template-columns:1fr;grid-column-gap:",(0,P.Z)(2),";@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){grid-template-columns:repeat(2, 1fr);}@media (min-width: ",(function(e){return e.theme.breakpoints[2]}),"){grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));}");function ee(e){var t,r=e.isLoading,n=e.data,o=e.vital,s=e.value,a=e.showBar,l=void 0===a||a,u=e.showStates,d=void 0!==u&&u,c=e.showDurationDetail,m=void 0!==c&&c,h=e.showVitalPercentNames,v=void 0!==h&&h;if(r)return d?(0,z.tZ)(p.Z,{height:"48px"}):null;var f=d?(0,z.tZ)(te,{small:!0,children:(0,w.t)("No vitals found")}):null;if(!n)return f;var g={poor:0,meh:0,good:0,total:0};if((Array.isArray(o)?o:[o]).forEach((function(e){var t,r=null!==(t=null==n?void 0:n[e])&&void 0!==t?t:{};Object.keys(g).forEach((function(e){return g[e]+=r[e]}))})),!g.total)return f;var y,j,Z,b,x,_,P,k,O=Array.isArray(o)?null:null!=s?s:ie(null!==(t=null==n?void 0:n[o])&&void 0!==t?t:null,o),S=(j=(y=g).poor,Z=y.meh,b=y.good,_=j/(x=y.total),P=Z/x,k=b/x,[{vitalState:L.SP.GOOD,percent:k},{vitalState:L.SP.MEH,percent:P},{vitalState:L.SP.POOR,percent:_}]),C=function(e){return e.map((function(e){var t=e.percent,r=e.vitalState;return{percent:t,color:L.fL[r]}}))}(S);return(0,z.BX)(i.Fragment,{children:[l&&(0,z.tZ)(q,{colorStops:C}),(0,z.BX)(se,{children:[m&&O&&(0,z.BX)("div",{"data-test-id":"vital-bar-p75",children:[(0,w.t)("The p75 for all transactions is "),(0,z.tZ)("strong",{children:O})]}),(0,z.tZ)(X,{vital:o,percents:S,showVitalPercentNames:v})]})]})}ee.displayName="VitalBar";var te=(0,o.Z)(d.Z,{target:"e1he14ku5"})("height:48px;padding:",(0,P.Z)(1.5)," 15%;");function re(e){var t=e.chart,r=e.minHeight,n=e.horizontal,o=e.title,i=e.tooltip,s=e.value,a=e.isNotInteractive;return(0,z.BX)(oe,{interactive:!a,minHeight:r,children:[(0,z.BX)(l.Gh,{children:[(0,z.tZ)(le,{children:(0,w.t)(o)}),(0,z.tZ)(m.Z,{size:"sm",position:"top",title:i})]}),(0,z.BX)(ne,{horizontal:n,children:[(0,z.tZ)(ae,{children:s}),t]})]})}re.displayName="VitalCard";var ne=(0,o.Z)("div",{target:"e1he14ku4"})("width:100%;display:flex;flex-direction:",(function(e){return e.horizontal?"row":"column"}),";justify-content:space-between;"),oe=(0,o.Z)(s.Z,{target:"e1he14ku3"})("color:",(function(e){return e.theme.textColor}),";padding:",(0,P.Z)(2)," ",(0,P.Z)(3),";align-items:flex-start;margin-bottom:",(0,P.Z)(2),";",(function(e){return e.minHeight&&"min-height: ".concat(e.minHeight,"px")}),";");function ie(e,t){var r,n=null!==(r=null==e?void 0:e.p75)&&void 0!==r?r:null;return null===n?"—":t===S.Zl.CLS?n.toFixed(2):"".concat(n.toFixed(0),"ms")}var se=(0,o.Z)("div",{target:"e1he14ku2"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){display:flex;justify-content:space-between;}"),ae=(0,o.Z)("div",{target:"e1he14ku1"})("font-size:32px;margin-top:",(0,P.Z)(1),";"),le=(0,o.Z)("div",{target:"e1he14ku0"})(_.Z,";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_landing_vitalsCards_tsx.9d692bf90f50fb2d30c753bfabe59eee.js.map