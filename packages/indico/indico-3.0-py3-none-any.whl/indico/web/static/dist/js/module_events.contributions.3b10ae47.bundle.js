(()=>{"use strict";var t,e,n,i={22737:(t,e,n)=>{var i=n(63025),a=n(95023),r=n.n(a),o=n(95161),s=n.n(o),c=n(53806),l=n.n(c),d=n(32735),u=n(12788),m=(n(95499),n(80445)),b=n(72865),p=n(19306),f=n(59090),h=n(12394),g=n(28995),v=n(60216),y=n.n(v),_=n(13213),D=n(53130),k=n(75723),E=n(67986);function I(t){let{open:e,setModalOpen:n,trigger:i,published:a,onClick:r}=t;return d.createElement(_.Z,{open:e,onClose:()=>n(!1),size:"tiny",trigger:i,closeIcon:!0},d.createElement(D.Z,{content:a?p.vN.string("Set contribution list in draft mode"):p.vN.string("Publish contributions")}),d.createElement(_.Z.Content,null,a?d.createElement(d.Fragment,null,d.createElement("p",null,d.createElement(p.vN,null,"Are you sure you want to change the contribution list back to draft mode?")),d.createElement("p",null,d.createElement(p.vN,null,"By doing so the following menu items won't be accessible:"))):d.createElement(d.Fragment,null,d.createElement("p",null,d.createElement(p.vN,null,"Are you sure you want to publish the contribution list?")),d.createElement("p",null,d.createElement(p.vN,null,"By doing so the following menu items will be accessible:"))),d.createElement(k.Z,{bulleted:!0},d.createElement(k.Z.Item,null,d.createElement(p.vN,null,"Contribution List")),d.createElement(k.Z.Item,null,d.createElement(p.vN,null,"My Contributions")),d.createElement(k.Z.Item,null,d.createElement(p.vN,null,"Author List")),d.createElement(k.Z.Item,null,d.createElement(p.vN,null,"Speaker List")),d.createElement(k.Z.Item,null,d.createElement(p.vN,null,"Timetable")),d.createElement(k.Z.Item,null,d.createElement(p.vN,null,"Book of Abstracts")))),d.createElement(_.Z.Actions,null,d.createElement(E.Z,{onClick:()=>n(!1)},d.createElement(p.vN,null,"No")),d.createElement(E.Z,{primary:!0,onClick:r},d.createElement(p.vN,null,"Yes"))))}I.propTypes={open:y().bool.isRequired,setModalOpen:y().func.isRequired,trigger:y().node.isRequired,published:y().bool.isRequired,onClick:y().func.isRequired};const N=i.ZP.bind(null,{endpoint:"contributions.manage_publication",rules:[{args:["event_id"],converters:{event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"contributions",isDynamic:!1},{data:"/",isDynamic:!1},{data:"published",isDynamic:!1}]}]},"/");function w(t){let{eventId:e,onSuccess:n}=t;const i=N({event_id:e}),[a,r]=(0,d.useState)(!1),o=d.createElement(b.Lp,{onClick:()=>r(!0)},d.createElement(p.vN,null,"Publish now"));return d.createElement(I,{open:a,setModalOpen:r,trigger:o,published:!1,onClick:async()=>{try{await f.l2.put(i)}catch(t){return(0,f.zZ)(t)}n(),r(!1)}})}w.propTypes={eventId:y().string.isRequired,onSuccess:y().func.isRequired};var x=n(41187),C=n(43146);const j=i.ZP.bind(null,{endpoint:"contributions.manage_publication",rules:[{args:["event_id"],converters:{event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"contributions",isDynamic:!1},{data:"/",isDynamic:!1},{data:"published",isDynamic:!1}]}]},"/");function S(t){let{eventId:e}=t;const[n,i]=(0,d.useState)(!1),[a,r,o,s]=(0,C.RF)(j({event_id:e}));if(o)return null;const c=d.createElement(x.Z,{label:a?p.vN.string("Published"):p.vN.string("Draft"),toggle:!0,onClick:()=>i(!0),checked:a,disabled:s});return d.createElement(I,{open:n,setModalOpen:i,trigger:c,published:a,onClick:()=>{r(),i(!1)}})}S.propTypes={eventId:y().string.isRequired};const O=i.ZP.bind(null,{endpoint:"event_editing.api_file_types",rules:[{args:["event_id","type"],converters:{event_id:"IntegerConverter",type:"AnyConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"editing",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"type",isDynamic:!0},{data:"/",isDynamic:!1},{data:"file-types",isDynamic:!1}]}]},"/"),T=i.ZP.bind(null,{endpoint:"papers.api_paper_details",rules:[{args:["contrib_id","event_id"],converters:{contrib_id:"IntegerConverter",event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"papers",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"contrib_id",isDynamic:!0}]}]},"/");document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelector("#contribution-calendar-link");if(!t)return;const{contributionId:e,eventId:n}=t.dataset;u.render(d.createElement(b.Os,{endpoint:"contributions.export_ics",params:{event_id:n,contrib_id:e},renderButton:t=>d.createElement(b.Lp,{icon:"calendar",classes:t}),options:[{key:"contribution",text:p.vN.string("Contribution"),extraParams:{}}]}),t)})),function(t){function e(t){$(t).tablesorter({cssAsc:"header-sort-asc",cssDesc:"header-sort-desc",cssInfoBlock:"avoid-sort",headerTemplate:"",sortList:[[1,0]]})}function n(t,e,n){return $.ajax({url:t,method:e,data:JSON.stringify(n),dataType:"json",contentType:"application/json",error:handleAjaxError,complete:IndicoUI.Dialogs.Util.progress()})}function i(){$(".js-contrib-start-date").each((function(){const t=$(this);t.ajaxqbubble({url:t.data("href"),qBubbleOptions:{style:{classes:"qbubble-contrib-start-date qtip-allow-overflow"}}})}))}function a(){$(".js-contrib-duration").each((function(){const t=$(this);t.ajaxqbubble({url:t.data("href"),qBubbleOptions:{style:{classes:"qbubble-contrib-duration"}}})}))}t.setupEditableSubmissionButton=async function(){const t=document.querySelector("#editable-submission-button");if(!t)return;const e=JSON.parse(t.dataset.availableTypes),{eventId:n,contributionId:i,contributionCode:a}=t.dataset;let r,o,c;try{[r,o]=await Promise.all([Promise.all(e.map((t=>f.l2.get(O({event_id:n,type:t}))))),f.l2.get(T({event_id:n,contrib_id:i}),{validateStatus:t=>t>=200&&t<300||404===t})])}catch(t){return void(0,f.zZ)(t)}const l=s()(r.map(((t,n)=>[e[n],(0,h.k)(t.data)])));if(o){const{isInFinalState:t,lastRevision:e}=(0,h.k)(o.data);t&&e&&(c=e.files)}u.render(d.createElement(m.Z,{fileTypes:l,eventId:+n,contributionId:+i,contributionCode:a,uploadableFiles:c}),t)},t.setupContributionConfig=function(){!function(){const t=document.querySelector("#pub-switch");u.render(d.createElement(S,{eventId:t.dataset.eventId}),t)}()},t.setupContributionList=function(t){t=$.extend({createSessionURL:null,createTrackURL:null,timetableRESTURL:null},t);$(".list-section [data-toggle=dropdown]").closest(".toolbar").dropdown(),e("#contribution-list .tablesorter"),function(t,e){const i=$("#contribution-list");i.on("click",".session-item-picker",(function(){$(this).itempicker({filterPlaceholder:g.$T.gettext("Filter sessions"),containerClasses:"session-item-container",items:i.find("table").data("session-items"),footerElements:[{title:g.$T.gettext("Assign new session"),onClick(e){ajaxDialog({title:g.$T.gettext("Add new session"),url:t,onClose(t){t&&($(".session-item-picker").each((function(){const e=$(this);e.data("indicoItempicker")?e.itempicker("updateItemList",t.sessions):i.find("table").data("session-items",t.sessions)})),e.itempicker("selectItem",t.new_session_id))}})}}],onSelect(t,i){const a=$(this),r=a[0].style,o={session_id:t?t.id:null};return n(a.data("href"),a.data("method"),o).then((function(o){const s=t?t.title:g.$T.gettext("No session");if(a.find(".label").text(s),t?(r.setProperty("color",`#${t.colors.text}`,"important"),r.setProperty("background",`#${t.colors.background}`,"important")):(r.removeProperty("color"),r.removeProperty("background")),o.unscheduled){const t=a.closest("tr"),r=t.find("td.start-date > .vertical-aligner"),s=r.children().detach();r.html($("<em>",{text:g.$T.gettext("Not scheduled")})),showUndoWarning(g.$T.gettext("'{0}' has been unscheduled due to the session change.").format(t.data("title")),g.$T.gettext("Undo successful! Timetable entry and session have been restored."),(function(){return n(e,"POST",o.undo_unschedule).then((function(t){s.filter(".label").text(" "+l().utc(t.start_dt).format("DD/MM/YYYY HH:mm")),r.html(s),a.itempicker("selectItem",i?i.id:null)}))}))}}))}})}))}(t.createSessionURL,t.timetableRESTURL),function(t){const e=$("#contribution-list");e.on("click",".track-item-picker",(function(){$(this).itempicker({filterPlaceholder:g.$T.gettext("Filter tracks"),containerClasses:"track-item-container",uncheckedItemIcon:"",items:e.find("table").data("track-items"),footerElements:[{title:g.$T.gettext("Add new track"),onClick(n){ajaxDialog({title:g.$T.gettext("Add new track"),url:t,onClose(t){t&&($(".track-item-picker").each((function(){const n=$(this);n.data("indicoItempicker")?n.itempicker("updateItemList",t.tracks):e.find("table").data("track-items",t.tracks)})),n.itempicker("selectItem",t.new_track_id))}})}}],onSelect(t){const e=$(this),i={track_id:t?t.id:null};return n(e.data("href"),e.data("method"),i).then((function(){const n=t?t.title:g.$T.gettext("No track");e.find(".label").text(n)}))}})}))}(t.createTrackURL),i(),a(),enableIfChecked("#contribution-list","input[name=contribution_id]",".js-enable-if-checked");const o=setupListGenerator({itemHandle:"tr",listItems:"#contribution-list tbody tr",term:"#search-input",state:"#filtering-state",placeholder:"#filter-placeholder"});$("#contribution-list").on("indico:htmlUpdated",(function(){e("#contribution-list .tablesorter"),i(),a(),r()(o)})).on("attachments:updated",(function(t){const e=$(t.target);reloadManagementAttachmentInfoColumn(e.data("locator"),e.closest("td"))})),$(".js-submit-form").on("click",(function(t){t.preventDefault();const e=$(this);e.hasClass("disabled")||$("#contribution-list form").attr("action",e.data("href")).submit()}))},t.setupSubContributionList=function(){$("#subcontribution-list [data-toggle=dropdown]").closest(".toolbar").dropdown(),e("#subcontribution-list .tablesorter"),enableIfChecked("#subcontribution-list","input[name=subcontribution_id]","#subcontribution-list .js-enable-if-checked"),$("#subcontribution-list td.subcontribution-title").on("mouseenter",(function(){const t=$(this);this.offsetWidth<this.scrollWidth&&!t.attr("title")&&t.attr("title",t.text())})),$("#subcontribution-list").on("attachments:updated",(function(t){const e=$(t.target);reloadManagementAttachmentInfoColumn(e.data("locator"),e.closest("td")),$(this).trigger("ajaxDialog:setData",[!0])})),$("#subcontribution-list").on("indico:htmlUpdated",(function(){$(this).trigger("ajaxDialog:setData",[!0])})),$("#subcontribution-list table").sortable({items:".js-sortable-subcontribution-row",handle:".js-sort-handle",placeholder:"sortable-placeholder",tolerance:"pointer",distance:10,axis:"y",containment:"#subcontribution-list table",start(t,e){e.placeholder.height(e.helper.outerHeight())},update(t,e){const n=$(this);$.ajax({url:e.item.data("sort-url"),method:"POST",data:{subcontrib_ids:n.sortable("toArray")},error:handleAjaxError}),n.trigger("ajaxDialog:setData",[!0])}})},t.setupEventDisplayContributionList=function(){setupListGenerator({itemHandle:"div.contribution-row",listItems:"#display-contribution-list div.contribution-row",term:"#search-input",state:"#filtering-state",placeholder:"#filter-placeholder"})()},t.setupEventDisplayAuthorList=function(){setupSearchBox({itemHandle:".author-list > li",listItems:".author-list > li",term:"#search-input",state:"#filtering-state",placeholder:"#filter-placeholder"})()},t.setupDraftModeWarning=function(){const t=document.querySelector("#draft-mode-warning"),e=document.querySelector("#draft-mode-warning-button");t&&e&&u.render(d.createElement(w,{eventId:e.dataset.eventId,onSuccess:()=>t.classList.add("hidden")}),e)}}(window)},68584:(t,e,n)=>{n.d(e,{xv:()=>a,sV:()=>r,Kl:()=>o});var i=n(19306);const a={none:"none",replaced:"replaced",needs_submitter_confirmation:"needs_submitter_confirmation",needs_submitter_changes:"needs_submitter_changes",accepted:"accepted",rejected:"rejected"},r={ready_for_review:"ready_for_review",needs_submitter_confirmation:"needs_submitter_confirmation",new:"new"},o={paper:i.vN.string("Paper"),slides:i.vN.string("Slides"),poster:i.vN.string("Poster")};i.vN.string("Replaced"),i.vN.string("Needs submitter confirmation"),i.vN.string("Rejected"),i.vN.string("Accepted"),i.vN.string("Assigned"),i.vN.string("Needs submitter changes"),i.vN.string("Not submitted"),i.vN.string("Ready for review"),i.vN.string("Paper Editing"),i.vN.string("Slides Editing"),i.vN.string("Poster Editing"),i.vN.string("Get next paper"),i.vN.string("Get next poster"),i.vN.string("Get next slides")}},a={};function r(t){var e=a[t];if(void 0!==e)return e.exports;var n=a[t]={id:t,loaded:!1,exports:{}};return i[t].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=i,t=[],r.O=(e,n,i,a)=>{if(!n){var o=1/0;for(l=0;l<t.length;l++){for(var[n,i,a]=t[l],s=!0,c=0;c<n.length;c++)(!1&a||o>=a)&&Object.keys(r.O).every((t=>r.O[t](n[c])))?n.splice(c--,1):(s=!1,a<o&&(o=a));s&&(t.splice(l--,1),e=i())}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[n,i,a]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},n=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,r.t=function(t,i){if(1&i&&(t=this(t)),8&i)return t;if("object"==typeof t&&t){if(4&i&&t.__esModule)return t;if(16&i&&"function"==typeof t.then)return t}var a=Object.create(null);r.r(a);var o={};e=e||[null,n({}),n([]),n(n)];for(var s=2&i&&t;"object"==typeof s&&!~e.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>t[e]));return o.default=()=>t,r.d(a,o),a},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.e=()=>Promise.resolve(),r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),r.j=832,(()=>{var t={832:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var i,a,[o,s,c]=n,l=0;for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(c)var d=c(r);for(e&&e(n);l<o.length;l++)a=o[l],r.o(t,a)&&t[a]&&t[a][0](),t[o[l]]=0;return r.O(d)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var o=r.O(void 0,[5514,3044,8592],(()=>r(22737)));o=r.O(o)})();
//# sourceMappingURL=module_events.contributions.3b10ae47.bundle.js.map