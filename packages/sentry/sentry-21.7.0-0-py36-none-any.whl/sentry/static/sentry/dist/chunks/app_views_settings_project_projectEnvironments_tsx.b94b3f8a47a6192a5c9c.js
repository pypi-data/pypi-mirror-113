(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_project_projectEnvironments_tsx"],{"./app/components/sentryDocumentTitle.tsx":function(e,t,n){"use strict";n("../node_modules/core-js/modules/es.array.concat.js"),n("../node_modules/react/index.js");var s=n("../node_modules/react-document-title/index.js"),o=n.n(s),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){var t=e.title,n=e.orgSlug,s=e.projectSlug,i=e.children,a=n||s?n&&s?"".concat(t," - ").concat(n," - ").concat(s):n?"".concat(t," - ").concat(n):"".concat(t," - ").concat(s):t;return(0,r.tZ)(o(),{title:"".concat(a," - Sentry"),children:i})}i.displayName="SentryDocumentTitle",t.Z=i},"./app/utils/environment.tsx":function(e,t,n){"use strict";function s(e){return e.name?encodeURIComponent(e.name):e.displayName?encodeURIComponent(e.displayName):"none"}function o(e){return e.name||e.displayName||"(No Environment)"}n.d(t,{z:function(){return s},G:function(){return o}}),n("../node_modules/core-js/modules/es.function.name.js")},"./app/utils/recreateRoute.tsx":function(e,t,n){"use strict";n.d(t,{Z:function(){return i}}),n("../node_modules/core-js/modules/es.array.map.js"),n("../node_modules/core-js/modules/es.array.slice.js"),n("../node_modules/core-js/modules/es.regexp.exec.js"),n("../node_modules/core-js/modules/es.string.search.js"),n("../node_modules/core-js/modules/es.array.concat.js"),n("../node_modules/core-js/modules/es.array.join.js");var s=n("../node_modules/lodash/findLastIndex.js"),o=n.n(s),r=n("./app/utils/replaceRouterParams.tsx");function i(e,t){var n,s,i,a,c=t.routes,d=t.params,l=t.location,u=t.stepBack,p=c.map((function(e){return e.path||""}));"string"!=typeof e?(a=c.indexOf(e)+1,i=o()(p.slice(0,a),(function(e){return"/"===e[0]}))):i=o()(p,(function(e){return"/"===e[0]}));var m=p.slice(i,a);void 0!==u&&(m=m.slice(0,u));var h=null!==(n=null==l?void 0:l.search)&&void 0!==n?n:"",j=null!==(s=null==l?void 0:l.hash)&&void 0!==s?s:"",v="".concat(m.join("")).concat("string"!=typeof e?"":e).concat(h).concat(j);return(0,r.Z)(v,d)}},"./app/views/settings/project/permissionAlert.tsx":function(e,t,n){"use strict";n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),r=(n("../node_modules/react/index.js"),n("./app/components/acl/access.tsx")),i=n("./app/components/alert.tsx"),a=n("./app/icons/index.tsx"),c=n("./app/locale.tsx"),d=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),l=["access"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t=e.access,n=void 0===t?["project:write"]:t,s=(0,o.Z)(e,l);return(0,d.tZ)(r.Z,{access:n,children:function(e){return!e.hasAccess&&(0,d.tZ)(i.Z,p(p({type:"warning",icon:(0,d.tZ)(a.FC,{size:"xs"})},s),{},{children:(0,c.t)("These settings can only be edited by users with the organization owner, manager, or admin role.")}))}})};m.displayName="PermissionAlert",t.Z=m},"./app/views/settings/project/projectEnvironments.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{ProjectEnvironments:function(){return R}}),n("../node_modules/core-js/modules/es.reflect.construct.js");var s=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),l=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),u=(n("../node_modules/core-js/modules/es.array.concat.js"),n("../node_modules/core-js/modules/es.function.name.js"),n("../node_modules/core-js/modules/es.string.ends-with.js"),n("../node_modules/core-js/modules/es.array.map.js"),n("../node_modules/react/index.js")),p=n("./app/actionCreators/indicator.tsx"),m=n("./app/components/acl/access.tsx"),h=n("./app/components/button.tsx"),j=n("./app/components/links/listLink.tsx"),v=n("./app/components/loadingIndicator.tsx"),f=n("./app/components/navTabs.tsx"),y=n("./app/components/panels/index.tsx"),b=n("./app/components/sentryDocumentTitle.tsx"),Z=n("./app/constants/index.tsx"),g=n("./app/locale.tsx"),x=n("./app/styles/space.tsx"),_=n("./app/utils/environment.tsx"),w=n("./app/utils/recreateRoute.tsx"),k=n("./app/utils/withApi.tsx"),E=n("./app/views/settings/components/emptyMessage.tsx"),P=n("./app/views/settings/components/settingsPageHeader.tsx"),O=n("./app/views/settings/project/permissionAlert.tsx"),S=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var R=function(e){(0,i.Z)(m,e);var t,n,l=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=(0,c.Z)(t);if(n){var o=(0,c.Z)(this).constructor;e=Reflect.construct(s,arguments,o)}else e=s.apply(this,arguments);return(0,a.Z)(this,e)});function m(){var e;(0,s.Z)(this,m);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=l.call.apply(l,[this].concat(n)),(0,d.Z)((0,r.Z)(e),"state",{project:null,environments:null,isLoading:!0}),(0,d.Z)((0,r.Z)(e),"toggleEnv",(function(t,n){var s=e.props.params,o=s.orgId,i=s.projectId;e.props.api.request("/projects/".concat(o,"/").concat(i,"/environments/").concat((0,_.z)(t),"/"),{method:"PUT",data:{name:t.name,isHidden:n},success:function(){(0,p.S9)((0,g._N)("Updated [environment]",{environment:(0,_.G)(t)}))},error:function(){(0,p.Iw)((0,g._N)("Unable to update [environment]",{environment:(0,_.G)(t)}))},complete:e.fetchData.bind((0,r.Z)(e))})})),e}return(0,o.Z)(m,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){this.props.location.pathname.endsWith("hidden/")!==e.location.pathname.endsWith("hidden/")&&this.fetchData()}},{key:"fetchData",value:function(){var e=this,t=this.props.location.pathname.endsWith("hidden/");this.state.isLoading||this.setState({isLoading:!0});var n=this.props.params,s=n.orgId,o=n.projectId;this.props.api.request("/projects/".concat(s,"/").concat(o,"/environments/"),{query:{visibility:t?"hidden":"visible"},success:function(t){e.setState({environments:t,isLoading:!1})}})}},{key:"fetchProjectDetails",value:function(){var e=this,t=this.props.params,n=t.orgId,s=t.projectId;this.props.api.request("/projects/".concat(n,"/").concat(s,"/"),{success:function(t){e.setState({project:t})}})}},{key:"renderEmpty",value:function(){var e=this.props.location.pathname.endsWith("hidden/")?(0,g.t)("You don't have any hidden environments."):(0,g.t)("You don't have any environments yet.");return(0,S.tZ)(E.Z,{children:e})}},{key:"renderAllEnvironmentsSystemRow",value:function(){return this.props.location.pathname.endsWith("hidden/")?null:(0,S.tZ)(A,{name:Z.UZ,environment:{id:Z.UZ,name:Z.UZ,displayName:Z.UZ},isSystemRow:!0})}},{key:"renderEnvironmentList",value:function(e){var t=this,n=this.props.location.pathname.endsWith("hidden/"),s=n?(0,g.t)("Show"):(0,g.t)("Hide");return(0,S.BX)(u.Fragment,{children:[this.renderAllEnvironmentsSystemRow(),e.map((function(e){return(0,S.tZ)(A,{name:e.name,environment:e,isHidden:n,onHide:t.toggleEnv,actionText:s,shouldShowAction:!0},e.id)}))]})}},{key:"renderBody",value:function(){var e=this.state,t=e.environments;return e.isLoading?(0,S.tZ)(v.Z,{}):(0,S.tZ)(y.N,{children:null!=t&&t.length?this.renderEnvironmentList(t):this.renderEmpty()})}},{key:"render",value:function(){var e=this.props,t=e.routes,n=e.params,s=e.location.pathname.endsWith("hidden/"),o=(0,w.Z)("",{routes:t,params:n,stepBack:-1});return(0,S.BX)("div",{children:[(0,S.tZ)(b.Z,{title:(0,g.t)("Environments"),projectSlug:n.projectId}),(0,S.tZ)(P.Z,{title:(0,g.t)("Manage Environments"),tabs:(0,S.BX)(f.Z,{underlined:!0,children:[(0,S.tZ)(j.Z,{to:o,index:!0,isActive:function(){return!s},children:(0,g.t)("Environments")}),(0,S.tZ)(j.Z,{to:"".concat(o,"hidden/"),index:!0,isActive:function(){return s},children:(0,g.t)("Hidden")})]})}),(0,S.tZ)(O.Z,{}),(0,S.BX)(y.s_,{children:[(0,S.tZ)(y.V9,{children:s?(0,g.t)("Hidden"):(0,g.t)("Active Environments")}),this.renderBody()]})]})}}]),m}(u.Component);function A(e){var t=e.environment,n=e.name,s=e.onHide,o=e.shouldShowAction,r=void 0!==o&&o,i=e.isSystemRow,a=void 0!==i&&i,c=e.isHidden,d=void 0!==c&&c,l=e.actionText,p=void 0===l?"":l;return(0,S.BX)(D,{children:[(0,S.tZ)(I,{children:a?(0,g.t)("All Environments"):n}),(0,S.tZ)(m.Z,{access:["project:write"],children:function(e){var n=e.hasAccess;return(0,S.tZ)(u.Fragment,{children:r&&s&&(0,S.tZ)(C,{size:"xsmall",disabled:!n,onClick:function(){return s(t,!d)},children:p})})}})]})}R.displayName="ProjectEnvironments",A.displayName="EnvironmentRow";var D=(0,l.Z)(y.Lv,{target:"e1heia562"})({name:"1tz8p38",styles:"align-items:center;justify-content:space-between"}),I=(0,l.Z)("div",{target:"e1heia561"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),C=(0,l.Z)(h.ZP,{target:"e1heia560"})("margin-left:",(0,x.Z)(.5),";");t.default=(0,k.Z)(R)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_projectEnvironments_tsx.6cb965b112bc7fca3b3e0b77369f0f94.js.map