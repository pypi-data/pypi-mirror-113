jaa  {{ vm.total_mktval }} joo
<ul class="nav nav-tabs" id="portfilio_tab">
    <li class="active"><a href="#summary" data-toggle="tab">Summary</a></li>
    <li><a href="#performance" data-toggle="tab">Performance</a></li>
</ul>

<div id="content" class="tab-content" ng-app="portfolio">
    <span us-spinner="{radius:30, width:8, length: 16}"></span>

    <div class="tab-pane active" id="summary">
	<table class="table table-bordered table-striped" ng-cloak>
	    <thead>
		<tr>
		    <th>
			<div class="table-header">
			    <div class="table-header-icon">
				<a href="#" ng-click="vm.sortColumn='$key'; 
					 vm.sortReverse = !vm.sortReverse">Security
				</a>
				<span class="table-icon fa fa-caret-down" 
				      ng-show="vm.sortColumn == '$key' && !vm.sortReverse">
				</span>
				<span class="table-icon fa fa-caret-up" 
				      ng-show="vm.sortColumn == '$key' && vm.sortReverse">
				</span>
			    </div>
			</div>
		    </th>
		    <th class="table-header nobreak">Last Price
			<div>
			    <div class="table-header nobreak t">Date</div>
			</div>
		    </th>
		    <th>
			<div class="table-header">
			    Change
			</div>
		    </th>
		    <th>
			<div class="table-header">
			    Average price 
			</div>
		    </th>
		    <th>
			<div class="table-header">
			    <div class="table-header-icon">
				<a href="#" ng-click="vm.sortColumn = 'shares';
					 vm.sortReverse = !vm.sortReverse">Shares
				</a>
				<span class="table-icon fa fa-caret-up"
				      ng-show="vm.sortColumn ==
					     'shares' && 
					     !vm.sortReverse">
				</span>
				<span class="table-icon fa fa-caret-down"
				      ng-show="vm.sortColumn == 'shares' && 
					     vm.sortReverse"> 
				</span>
			    </div>
			</div>
		    </th>
		    <th>
			<div class="table-header">
			    <div class="table-header-icon">
				<a href="#" ng-click="vm.sortColumn = 'mktval'; 
					 vm.sortReverse =
					 !vm.sortReverse"> Market Value 
				</a>
				<span class="table-icon fa fa-caret-up"
				      ng-show="vm.sortColumn ==
					     'mktval' && 
					     !vm.sortReverse">
				</span>
				<span class="table-icon fa fa-caret-down"
				      ng-show="vm.sortColumn == 'mktval' && 
					     vm.sortReverse"> 
				</span>
			    </div>
			</div>
		    </th>
		    <th>
			<div class="table-header">
			    <div class="table-header-icon">
				<a href="#" ng-click="vm.sortColumn = 'day_change'; 
					 vm.sortReverse =
					 !vm.sortReverse"> Day change
				</a>
				<span class="table-icon fa fa-caret-up"
				      ng-show="vm.sortColumn ==
					     'day_change' &&
					     !vm.sortReverse">
				</span>
				<span class="table-icon fa fa-caret-down"
				      ng-show="vm.sortColumn ==
					     'day_change' &&
					     vm.sortReverse">
				</span>
			    </div>
			</div>
		    </th>
		    <th>
			<div class="table-header">
			    <div class="table-header-icon">
				<a href="#" ng-click="vm.sortColumn = 'folio_percentage'; 
					 vm.sortReverse =
					 !vm.sortReverse"> Weight
				</a>
				<span class="table-icon fa fa-caret-up"
				      ng-show="vm.sortColumn ==
					     'folio_percentage' && 
					     !vm.sortReverse">
				</span>
				<span class="table-icon fa fa-caret-down"
				      ng-show="vm.sortColumn ==
					     'folio_percentage' && 
					     vm.sortReverse"> 
				</span>
			    </div>
			</div>
		    </th> 
		    <th>
			<div class="table-header">
			    <div class="table-header-icon">
				<a href="#" ng-click="vm.sortColumn = 'total_return'; 
					 vm.sortReverse =
					 !vm.sortReverse">	Overall return

				</a>
				<span class="table-icon fa fa-caret-up"
				      ng-show="vm.sortColumn == 'total_return' &&
					     !vm.sortReverse">
				</span>
				<span class="table-icon fa fa-caret-down"
				      ng-show="vm.sortColumn == 'total_return' &&
					     vm.sortReverse"> 
				</span>
			    </div>
			</div>
		    </th>
		</tr>
	    </thead>
	    <tbody>
		<tr>
		</tr>
		<tr ng-repeat="data in vm.positions | toArray |
			       orderBy:vm.sortColumn:vm.sortReverse"
		    ng-if="data.$key != '$CASH' && data.shares >=1">
		    <td> 
			{{ data.$key }}
		    </td> 
		    <td>
			{{ data.price }}
			<div class="nobreak topborder"> 
			    {{ data.latest_date|date:"dd-MMM-yyyy"  }} 
			</div>
		    </td>
		    <td highlight="data.change">
			<span ng-class="{ 
					'negative': data.change < 0,
					'positive': data.change > 0 }">
			    {{ data.change }}
			</span>
			<div class="topborder">
			    <span ng-class="{ 
					    'negative': data.change < 0, 
					    'positive': data.change > 0 }">
				{{ data.change_percentage }} %
			    </span>
			</div>
		    </td>
		    <td> {{ data.average|number:2 }} </td>
		    <td> {{ data.shares }} </td>
		    <td> {{ data.mktval|number:2 }} </td>
		    <td>
			<span ng-class="{
					'negative': data.day_change < 0,
					'positive': data.day_change > 0
					}">
			    {{ data.day_change| number:2 }}
			</span>
		    </td>
		    <td> {{ data.folio_percentage|number:2 }} </td>
		    <td>
			<span ng-class="{ 
					'negative': data.total_return < 0,
					'positive': data.total_return > 0 }">
			    {{ data.total_return|number:2 }} % 
			</span>
		    </td>
		</tr>
	    </tbody>
		<tbody>
		    <tr>
			<th>Cash:</th>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>{{ vm.positions['$CASH'].basis|number:2 }} </td>
			<td>&nbsp;</td>
			<td>{{ vm.total_return|number:2 }} %</td>
		    </tr>
		    <tr>
			<th>Total:</th>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td highlight="vm.Positions.total_mktval">
			    {{ vm.Positions.total_mktval|number:2}}
			</td>
			<td>
			    <span ng-class="{
					    'negative': vm.Positions.total_day_change < 0,
					    'positive': vm.Positions.total_day_change > 0 }">
				{{ vm.Positions.total_day_change | number: 2 }}
			    </span>
			</td>
			<td>{{ vm.total_return|number:2 }} %</td>
		    </tr>
		</tbody>
	</table>
    </div> <!-- tab summary -->

    <div class="tab-pane" id="performance">
	<table id="sharePerformance" class="tablesorter">
	    <thead>
		<tr>
		    <th>Security</th>
		    <th class="nobreak">Last Price
			<div>
			    <div class="nobreak t">Date</div>
			</div>
		    </th>
		    <th>Average price </th>
		    <th>Shares</th>
		    <th>Cost Basis</th>
		    <th>Mkt Value</th>
		    <th>Sells</th>
		    <th>Gain</th>
		    <th>Dividends</th>
		    <th>Overall return </th>
		</tr>
	    </thead>
	    <tbody>
		<tr ng-repeat="data in vm.positions | toArray |
			       orderBy:vm.sortColumn:vm.sortReverse"
		    ng-if="data.$key != '$CASH' && data.shares >=1">
		    
		    <td>{{ security }}</td>
		    <td>{{ data.price|number:2 }} 
			<div>
			    <div class="nobreak topborder"> 
				{{ data.latest_date|date:"d-M-Y"  }} 
			    </div>
			</div>
		    </td>
		    <td>{{ data.average|number:2 }}</td>
		    <td>{{ data.shares|number:2 }}</td>
		    <td>{{ data.basis|number:2 }}</td>
		    <td>{{ data.mktval|number:2 }}</td>
		    <td>{{ data.sold|number:2 }}</td>
		    <td>{{ data.gain|number:2 }}</td>
		    <td>{{ data.dividends|number:2 }}</td>
		    <td>
			<span class="{{ data.total_return }}"> 
			    {{ data.total_return|number:2 }} %
			</span>
		    </td>
		</tr>
	    </tbody>
	    <tbody class="tablesorter-no-sort">
		<tr>
		    <th>Cash:</th>
		    <td>&nbsp;</td>
		    <td>&nbsp;</td>
		    <td>&nbsp;</td>
		    <td>{{ account.cash.basis|number:2 }}</td>
		    <td>{{ account.cash.mktval|number:2 }}</td>
		    <td>&nbsp;</td>
		    <td>{{ account.cash.gain|number:2 }}</td>
		    <td>&nbsp;</td>
		    <td>{{ account.cash.total_return|number:2 }} %</td>
		</tr>
		<tr>
		    <th>Total:</th>
		    <td>&nbsp;</td>
		    <td>&nbsp;</td>
		    <td>&nbsp;</td>
		    <td>{{ account.basis|number:2 }}</td>
		    <td>{{ account.mktval|number:2 }}</td>
		    <td>{{ account.sells|number:2 }}</td>
		    <td>{{ account.gain|number:2 }}</td>
		    <td>{{ account.dividends|number:2 }}</td>
		    <td>{{ account.total_return|number:2 }} %</td>
		</tr>
	    </tbody>
	</table>
