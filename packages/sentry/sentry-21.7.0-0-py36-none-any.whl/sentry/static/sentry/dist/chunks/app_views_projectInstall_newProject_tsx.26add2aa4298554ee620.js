(self.webpackChunk=self.webpackChunk||[]).push([["app_views_projectInstall_newProject_tsx"],{"./app/utils/slugify.tsx":function(e,t,r){"use strict";function o(e){return"string"==typeof e?e.toLowerCase().replace(" ","-"):""}r.d(t,{Z:function(){return o}}),r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.string.replace.js")},"./app/views/projectInstall/newProject.tsx":function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ee}});var o=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=r("../node_modules/react-document-title/index.js"),s=r.n(n),a=r("./app/styles/space.tsx"),i=(r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js")),c=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),l=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),u=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),d=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),p=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),m=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),f=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),h=r("../node_modules/@babel/runtime/regenerator/index.js"),g=r.n(h),j=(r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/react/index.js")),y=r("../node_modules/react-router/es/index.js"),b=r("../node_modules/@sentry/minimal/esm/index.js"),Z=r("../node_modules/platformicons/build/index.js"),v=r("./app/actionCreators/modal.tsx"),x=r("./app/actions/projectActions.tsx"),_=r("./app/components/alert.tsx"),P=r("./app/components/button.tsx"),w=r("./app/components/forms/selectControl.tsx"),C=r("./app/components/pageHeading.tsx"),O=r("./app/components/platformPicker.tsx"),k=r("./app/components/tooltip.tsx"),S=r("./app/data/platformCategories.tsx"),N=r("./app/icons/index.tsx"),F=r("./app/locale.tsx"),z=r("./app/styles/input.tsx"),R=r("./app/utils/analytics.tsx"),T=r("./app/utils/getPlatformName.tsx"),B=r("./app/utils/slugify.tsx"),E=r("./app/utils/withApi.tsx"),A=r("./app/utils/withOrganization.tsx"),X=r("./app/utils/withTeams.tsx"),I=r("./app/views/projectInstall/issueAlertOptions.tsx"),q=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,f.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G=function(e){(0,d.Z)(n,e);var t,r,o=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,m.Z)(t);if(r){var n=(0,m.Z)(this).constructor;e=Reflect.construct(o,arguments,n)}else e=o.apply(this,arguments);return(0,p.Z)(this,e)});function n(e,t){var r;(0,c.Z)(this,n),r=o.call(this,e,t),(0,f.Z)((0,u.Z)(r),"createProject",function(){var e=(0,i.Z)(g().mark((function e(t){var o,n,s,a,i,c,l,u,d,p,m,f,h,j,Z,v,_,P,w,C,O,k;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o=r.props,n=o.organization,s=o.api,a=r.state,i=a.projectName,c=a.platform,l=a.team,u=a.dataFragment,d=n.slug,m=(p=u||{}).shouldCreateCustomRule,f=p.name,h=p.conditions,j=p.actions,Z=p.actionMatch,v=p.frequency,_=p.defaultRules,r.setState({inFlight:!0}),i||b.$e((function(e){e.setExtra("props",r.props),e.setExtra("state",r.state),b.uT("No project name")})),e.prev=7,e.next=10,s.requestPromise("/teams/".concat(d,"/").concat(l,"/projects/"),{method:"POST",data:{name:i,platform:c,default_rules:null==_||_}});case 10:if(P=e.sent,!m){e.next=16;break}return e.next=14,s.requestPromise("/projects/".concat(n.slug,"/").concat(P.slug,"/rules/"),{method:"POST",data:{name:f,conditions:h,actions:j,actionMatch:Z,frequency:v}});case 14:C=e.sent,w=C.id;case 16:r.trackIssueAlertOptionSelectedEvent(P,_,m,w),x.Z.createSuccess(P),O=c||"other",k="/".concat(n.slug,"/").concat(P.slug,"/getting-started/").concat(O,"/"),y.browserHistory.push(k),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(7),r.setState({inFlight:!1,error:e.t0.responseJSON.detail}),403!==e.t0.status&&409!==e.t0.status&&b.$e((function(t){t.setExtra("err",e.t0),t.setExtra("props",r.props),t.setExtra("state",r.state),b.uT("Project creation failed")}));case 27:case"end":return e.stop()}}),e,null,[[7,23]])})));return function(t){return e.apply(this,arguments)}}()),(0,f.Z)((0,u.Z)(r),"setPlatform",(function(e){return r.setState((function(t){var r=t.projectName,o=t.platform;return{platform:e,projectName:!r||o&&(0,T.Z)(o)===r?(0,T.Z)(e)||"":r}}))}));var s=e.location.query,a=e.organization.teams.filter((function(e){return e.hasAccess})),l=s.team||a.length&&a[0].slug,d=(0,T.Z)(s.platform)?s.platform:"";return r.state={error:!1,projectName:(0,T.Z)(d)||"",team:l,platform:d,inFlight:!1,dataFragment:void 0},r}return(0,l.Z)(n,[{key:"defaultCategory",get:function(){var e,t,r=this.props.location.query;return e=r.category,null===(t=S.ZP.find((function(t){return t.id===e})))||void 0===t?void 0:t.id}},{key:"renderProjectForm",value:function(){var e=this,t=this.props.organization,r=this.state,o=r.projectName,n=r.platform,s=r.team,a=this.props.teams.filter((function(e){return e.hasAccess})),i=(0,q.BX)(L,{onSubmit:this.createProject,children:[(0,q.BX)("div",{children:[(0,q.tZ)($,{children:(0,F.t)("Project name")}),(0,q.BX)(K,{children:[(0,q.tZ)(J,{platform:null!=n?n:""}),(0,q.tZ)("input",{type:"text",name:"name",placeholder:(0,F.t)("Project name"),autoComplete:"off",value:o,onChange:function(t){return e.setState({projectName:(0,B.Z)(t.target.value)})}})]})]}),(0,q.BX)("div",{children:[(0,q.tZ)($,{children:(0,F.t)("Team")}),(0,q.BX)(Q,{children:[(0,q.tZ)(w.Z,{name:"select-team",clearable:!1,value:s,placeholder:(0,F.t)("Select a Team"),onChange:function(t){return e.setState({team:t.value})},options:a.map((function(e){var t=e.slug;return{label:"#".concat(t),value:t}}))}),(0,q.tZ)(k.Z,{title:(0,F.t)("Create a team"),children:(0,q.tZ)(P.ZP,{borderless:!0,"data-test-id":"create-team",type:"button",icon:(0,q.tZ)(N.N_,{isCircled:!0}),onClick:function(){return(0,v.openCreateTeamModal)({organization:t,onClose:function(t){var r=t.slug;return e.setState({team:r})}})}})})]})]}),(0,q.tZ)("div",{children:(0,q.tZ)(P.ZP,{"data-test-id":"create-project",priority:"primary",disabled:!this.canSubmitForm,children:(0,F.t)("Create Project")})})]});return(0,q.BX)(j.Fragment,{children:[(0,q.tZ)(C.Z,{withMargins:!0,children:(0,F.t)("Give your project a name")}),i]})}},{key:"canSubmitForm",get:function(){var e,t=this.state,r=t.projectName,o=t.team,n=t.inFlight,s=this.state.dataFragment||{},a=s.shouldCreateCustomRule,i=s.conditions;return!n&&o&&""!==r&&(!a||(null==i||null===(e=i.every)||void 0===e?void 0:e.call(i,(function(e){return e.value}))))}},{key:"trackIssueAlertOptionSelectedEvent",value:function(e,t,r,o){var n={eventKey:"new_project.alert_rule_selected",eventName:"New Project Alert Rule Selected",organization_id:this.props.organization.id,project_id:e.id,rule_type:t?"Default":r?"Custom":"No Rule"};void 0!==o&&(n=M(M({},n),{},{custom_rule_id:o})),(0,R.ec)(n)}},{key:"render",value:function(){var e=this,t=this.state,r=t.platform,o=t.error;return(0,q.BX)(j.Fragment,{children:[o&&(0,q.tZ)(_.Z,{type:"error",children:o}),(0,q.BX)("div",{"data-test-id":"onboarding-info",children:[(0,q.tZ)(C.Z,{withMargins:!0,children:(0,F.t)("Create a new Project")}),(0,q.tZ)(U,{children:(0,F.t)("Projects allow you to scope error and transaction events to a specific\n               application in your organization. For example, you might have separate\n               projects for your API server and frontend client.")}),(0,q.tZ)(C.Z,{withMargins:!0,children:(0,F.t)("Choose a platform")}),(0,q.tZ)(O.Z,{platform:r,defaultCategory:this.defaultCategory,setPlatform:this.setPlatform,organization:this.props.organization,showOther:!0}),(0,q.tZ)(I.Z,{onChange:function(t){e.setState({dataFragment:t})}}),this.renderProjectForm()]})]})}}]),n}(j.Component);G.displayName="CreateProject";var H=(0,E.Z)((0,y.withRouter)((0,A.Z)((0,X.Z)(G)))),L=(0,o.Z)("form",{target:"e1icdt8d5"})("display:grid;grid-template-columns:300px 250px max-content;grid-gap:",(0,a.Z)(2),";align-items:end;padding:",(0,a.Z)(3)," 0;box-shadow:0 -1px 0 rgba(0, 0, 0, 0.1);background:",(function(e){return e.theme.background}),";"),$=(0,o.Z)("div",{target:"e1icdt8d4"})("font-size:",(function(e){return e.theme.fontSizeExtraLarge}),";margin-bottom:",(0,a.Z)(1),";"),J=(0,o.Z)(Z.v,{target:"e1icdt8d3"})("margin-right:",(0,a.Z)(1),";"),K=(0,o.Z)("div",{target:"e1icdt8d2"})((function(e){return(0,z.T)(e)}),";padding:5px 10px;display:flex;align-items:center;input{background:",(function(e){return e.theme.background}),";border:0;outline:0;flex:1;}"),Q=(0,o.Z)("div",{target:"e1icdt8d1"})({name:"1gijyrs",styles:"display:grid;grid-template-columns:1fr min-content;align-items:center"}),U=(0,o.Z)("p",{target:"e1icdt8d0"})("color:",(function(e){return e.theme.subText}),";max-width:760px;"),V=function(){return(0,q.tZ)(W,{children:(0,q.tZ)("div",{className:"container",children:(0,q.BX)(Y,{children:[(0,q.tZ)(s(),{title:"Sentry"}),(0,q.tZ)(H,{})]})})})};V.displayName="NewProject";var W=(0,o.Z)("div",{target:"escx7041"})("flex:1;background:",(function(e){return e.theme.background}),";margin-bottom:-",(0,a.Z)(3),";"),Y=(0,o.Z)("div",{target:"escx7040"})("margin-top:",(0,a.Z)(3),";"),ee=V}}]);
//# sourceMappingURL=../sourcemaps/app_views_projectInstall_newProject_tsx.d80b2a15175162980a351942874c9b4d.js.map