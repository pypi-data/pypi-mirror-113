(self.webpackChunk=self.webpackChunk||[]).push([["app_views_admin_adminOrganizations_tsx"],{"./app/components/resultGrid.tsx":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var o=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),s=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),n=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/react/index.js")),d=r("../node_modules/react-router/es/index.js"),h=r("./app/components/dropdownLink.tsx"),m=r("./app/components/menuItem.tsx"),f=r("./app/components/pagination/index.tsx"),y=r("./app/icons/index.tsx"),v=r("./app/utils/withApi.tsx"),b=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=(0,u.Z)(e);if(t){var s=(0,u.Z)(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return(0,a.Z)(this,r)}}var O=function(e){(0,l.Z)(r,e);var t=Z(r);function r(){var e;(0,s.Z)(this,r);for(var n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];return e=t.call.apply(t,[this].concat(l)),(0,c.Z)((0,i.Z)(e),"getSelector",(function(){return(0,b.BX)(h.Z,{title:e.getCurrentLabel(),children:[e.getDefaultItem(),e.props.options.map((function(t){var r,s=(0,o.Z)(t,2),n=s[0],i=s[1],l=(r={},(0,c.Z)(r,e.props.queryKey,n),(0,c.Z)(r,"cursor",""),r),a=j(j({},e.props.location.query),l);return(0,b.tZ)(m.Z,{isActive:e.props.value===n,to:{pathname:e.props.path,query:a},children:i},n)}))]})})),e}return(0,n.Z)(r,[{key:"getCurrentLabel",value:function(){var e=this,t=this.props.options.find((function(t){var r;return t[0]===(null!==(r=e.props.value)&&void 0!==r?r:"")}));return t?this.props.name+": "+t[1]:this.props.name+": Any"}},{key:"getDefaultItem",value:function(){var e=j(j({},this.props.location.query),{},{cursor:""});return delete e[this.props.queryKey],(0,b.tZ)(m.Z,{isActive:""===this.props.value||!this.props.value,to:{pathname:this.props.path,query:e},children:"Any"},"")}},{key:"render",value:function(){return(0,b.tZ)("div",{className:"filter-options",children:1===this.props.options.length?(0,b.tZ)("strong",{children:this.getCurrentLabel()}):this.getSelector()})}}]),r}(p.Component);O.displayName="Filter";var w=function(e){(0,l.Z)(r,e);var t=Z(r);function r(){return(0,s.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r,[{key:"getCurrentSortLabel",value:function(){var e,t=this;return null===(e=this.props.options.find((function(e){return(0,o.Z)(e,1)[0]===t.props.value})))||void 0===e?void 0:e[1]}},{key:"getSortBySelector",value:function(){var e=this;return(0,b.tZ)(h.Z,{title:this.getCurrentSortLabel(),className:"sorted-by",children:this.props.options.map((function(t){var r=(0,o.Z)(t,2),s=r[0],n=r[1],i=j(j({},e.props.location.query),{},{sortBy:s,cursor:""});return(0,b.tZ)(m.Z,{isActive:e.props.value===s,to:{pathname:e.props.path,query:i},children:n},s)}))})}},{key:"render",value:function(){return 0===this.props.options.length?null:(0,b.BX)("div",{className:"sort-options",children:["Showing results sorted by",1===this.props.options.length?(0,b.tZ)("strong",{className:"sorted-by",children:this.getCurrentSortLabel()}):this.getSortBySelector()]})}}]),r}(p.Component);w.displayName="SortBy";var k=function(e){(0,l.Z)(r,e);var t=Z(r);function r(){var e;(0,s.Z)(this,r);for(var o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n)),(0,c.Z)((0,i.Z)(e),"state",e.defaultState),(0,c.Z)((0,i.Z)(e),"onSearch",(function(t){var r,o,s=null!==(r=e.props.location)&&void 0!==r?r:{},n=e.state.query,i=j(j({},null!==(o=s.query)&&void 0!==o?o:{}),{},{query:n,cursor:""});t.preventDefault(),d.browserHistory.push({pathname:e.props.path,query:i})})),(0,c.Z)((0,i.Z)(e),"onQueryChange",(function(t){e.setState({query:t.target.value})})),e}return(0,n.Z)(r,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(){var e,t,r=this.query;this.setState({query:null!==(e=r.query)&&void 0!==e?e:"",sortBy:null!==(t=r.sortBy)&&void 0!==t?t:this.props.defaultSort,filters:j({},r),pageLinks:null,loading:!0,error:!1},this.fetchData)}},{key:"defaultState",get:function(){var e,t,r=this.query;return{rows:[],loading:!0,error:!1,pageLinks:null,query:null!==(e=r.query)&&void 0!==e?e:"",sortBy:null!==(t=r.sortBy)&&void 0!==t?t:this.props.defaultSort,filters:j({},r)}}},{key:"query",get:function(){var e,t;return null!==(e=(null!==(t=this.props.location)&&void 0!==t?t:{}).query)&&void 0!==e?e:{}}},{key:"remountComponent",value:function(){this.setState(this.defaultState,this.fetchData)}},{key:"refresh",value:function(){this.setState({loading:!0},this.fetchData)}},{key:"fetchData",value:function(){var e=this,t=j(j({},this.props.defaultParams),{},{sortBy:this.state.sortBy},this.query);this.props.api.request(this.props.endpoint,{method:this.props.method,data:t,success:function(t,r,o){var s;e.setState({loading:!1,error:!1,rows:t,pageLinks:null!==(s=null==o?void 0:o.getResponseHeader("Link"))&&void 0!==s?s:null})},error:function(){e.setState({loading:!1,error:!0})}})}},{key:"renderLoading",value:function(){return(0,b.tZ)("tr",{children:(0,b.tZ)("td",{colSpan:this.props.columns.length,children:(0,b.BX)("div",{className:"loading",children:[(0,b.tZ)("div",{className:"loading-indicator"}),(0,b.tZ)("div",{className:"loading-message",children:"Hold on to your butts!"})]})})})}},{key:"renderError",value:function(){return(0,b.tZ)("tr",{children:(0,b.tZ)("td",{colSpan:this.props.columns.length,children:(0,b.tZ)("div",{className:"alert-block alert-error",children:"Something bad happened :("})})})}},{key:"renderNoResults",value:function(){return(0,b.tZ)("tr",{children:(0,b.tZ)("td",{colSpan:this.props.columns.length,children:"No results found."})})}},{key:"renderResults",value:function(){var e=this;return this.state.rows.map((function(t){var r,o,s,n;return(0,b.tZ)("tr",{children:null===(s=(n=e.props).columnsForRow)||void 0===s?void 0:s.call(n,t)},null===(r=(o=e.props).keyForRow)||void 0===r?void 0:r.call(o,t))}))}},{key:"render",value:function(){var e,t,r=this,o=this.props.filters;return(0,b.BX)("div",{className:"result-grid",children:[(0,b.BX)("div",{className:"table-options",children:[this.props.hasSearch&&(0,b.tZ)("div",{className:"result-grid-search",children:(0,b.tZ)("form",{onSubmit:this.onSearch,children:(0,b.BX)("div",{className:"form-group",children:[(0,b.tZ)("input",{type:"text",className:"form-control input-search",placeholder:"search",style:{width:300},name:"query",autoComplete:"off",value:this.state.query,onChange:this.onQueryChange}),(0,b.tZ)("button",{type:"submit",className:"btn btn-sm btn-primary",children:(0,b.tZ)(y.jV,{size:"xs"})})]})})}),(0,b.tZ)(w,{options:null!==(e=this.props.sortOptions)&&void 0!==e?e:[],value:this.state.sortBy,path:null!==(t=this.props.path)&&void 0!==t?t:"",location:this.props.location}),Object.keys(null!=o?o:{}).map((function(e){var t;return(0,b.tZ)(O,j({queryKey:e,value:r.state.filters[e],path:null!==(t=r.props.path)&&void 0!==t?t:"",location:r.props.location},null==o?void 0:o[e]),e)}))]}),(0,b.BX)("table",{className:"table table-grid",children:[(0,b.tZ)("thead",{children:(0,b.tZ)("tr",{children:this.props.columns})}),(0,b.tZ)("tbody",{children:this.state.loading?this.renderLoading():this.state.error?this.renderError():0===this.state.rows.length?this.renderNoResults():this.renderResults()})]}),this.props.hasPagination&&this.state.pageLinks&&(0,b.tZ)(f.Z,{pageLinks:this.state.pageLinks})]})}}]),r}(p.Component);k.displayName="ResultGrid",(0,c.Z)(k,"defaultProps",{path:"",endpoint:"",method:"GET",columns:[],sortOptions:[],filters:{},defaultSort:"",keyForRow:function(e){return e.id},columnsForRow:function(){return[]},defaultParams:{per_page:50},hasPagination:!0,hasSearch:!1}),t.Z=(0,v.Z)(k)},"./app/views/admin/adminOrganizations.tsx":function(e,t,r){"use strict";r.r(t),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/react-router/es/index.js")),n=r("./app/components/resultGrid.tsx"),i=r("./app/locale.tsx"),l=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function(e){return[(0,l.BX)("td",{children:[(0,l.tZ)("strong",{children:(0,l.tZ)(s.Link,{to:"/".concat(e.slug,"/"),children:e.name})}),(0,l.tZ)("br",{}),(0,l.tZ)("small",{children:e.slug})]},e.id)]},p=function(e){return(0,l.BX)("div",{children:[(0,l.tZ)("h3",{children:(0,i.t)("Organizations")}),(0,l.tZ)(n.Z,u({path:"/manage/organizations/",endpoint:"/organizations/?show=all",method:"GET",columns:[(0,l.tZ)("th",{children:"Organization"},"column-org")],columnsForRow:c,hasSearch:!0,sortOptions:[["date","Date Joined"],["members","Members"],["events","Events"],["projects","Projects"],["employees","Employees"]],defaultSort:"date"},e))]})};p.displayName="AdminOrganizations",t.default=p}}]);
//# sourceMappingURL=../sourcemaps/app_views_admin_adminOrganizations_tsx.dc7d8f226b4c1c2c56ddbc5d4fb80b45.js.map