(()=>{"use strict";var e,t,r,a={8535:(e,t,r)=>{var a=r(89178),n=r(63025),i=r(45709),c=r(60216),o=r.n(c),s=r(32735),l=r(12788),u=r(28965),d=r(25591),m=r(5212),p=r(69184),y=r(37314),f=r(67986),g=r(48060),b=r(72865),v=r(36323),D=r(19306),O=r(59090);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const E=n.ZP.bind(null,{endpoint:"users.profile_picture_preview",rules:[{args:["source","user_id"],converters:{source:"AnyConverter",user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"profile",isDynamic:!1},{data:"/",isDynamic:!1},{data:"picture",isDynamic:!1},{data:"/",isDynamic:!1},{data:"preview",isDynamic:!1},{data:"/",isDynamic:!1},{data:"source",isDynamic:!0}]},{args:["source"],converters:{source:"AnyConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"profile",isDynamic:!1},{data:"/",isDynamic:!1},{data:"picture",isDynamic:!1},{data:"/",isDynamic:!1},{data:"preview",isDynamic:!1},{data:"/",isDynamic:!1},{data:"source",isDynamic:!0}]}]},"/"),P=n.ZP.bind(null,{endpoint:"users.save_profile_picture",rules:[{args:["user_id"],converters:{user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"profile",isDynamic:!1},{data:"/",isDynamic:!1},{data:"picture",isDynamic:!1}]},{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"profile",isDynamic:!1},{data:"/",isDynamic:!1},{data:"picture",isDynamic:!1}]}]},"/");function j(e){let{image:t,text:r,email:a,children:n,source:i}=e;const{input:{onChange:c,value:o}}=(0,d.U$)("source"),l=o===i;return s.createElement(m.Z,{color:l?"blue":null,onClick:()=>c(i),style:l?{backgroundColor:"#f5f5f5"}:null},s.createElement(m.Z.Description,null,t?s.createElement(p.Z,{src:t,circular:!0,size:"tiny"}):s.createElement(y.Z,{name:"question circle outline",size:"huge",className:"users-client-js-___ProfilePicture-module__placeholder___xenP1"}),r),a&&s.createElement(b.Tm,{useEventTarget:!0},s.createElement(m.Z.Content,{extra:!0},s.createElement(D.vN,null,"Based on ",s.createElement(D.dO,{name:"email",value:a})))),n&&s.createElement(m.Z.Content,{extra:!0},n))}function w(e){let{onFileSelected:t}=e;const{submitting:r}=(0,d.cl)({subscription:{submitting:!0}}),{input:{onChange:a}}=(0,d.U$)("file",{allowNull:!0}),{getRootProps:n,getInputProps:i,open:c}=(0,u.u)({onDropAccepted:e=>{let[r]=e;t(r),a(r)},multiple:!1,noClick:!0,noKeyboard:!0,accept:[".jpg",".png",".gif",".webp"],disabled:r});return s.createElement("section",null,s.createElement("div",n(),s.createElement("input",i()),s.createElement(f.Z,{disabled:r,type:"button",icon:"upload",content:D.vN.string("Upload"),size:"small",onClick:e=>{e.stopPropagation(),c()}})))}j.propTypes={image:o().string,text:o().string.isRequired,email:o().string,children:o().node,source:o().oneOf(["standard","identicon","gravatar","custom"]).isRequired},j.defaultProps={image:null,email:null,children:null},w.propTypes={onFileSelected:o().func.isRequired};const S=(0,i.Z)({field:"file",updates:e=>null===e?{}:{source:"custom"}});function C(e){let{userId:t,email:r,source:a}=e;const[n,i]=(0,s.useState)(null),[c,o]=(0,s.useState)("custom"===a),l=null!==t?{user_id:t}:{},u=(0,s.useCallback)((e=>{i(e),o(!0)}),[]);return s.createElement("div",{className:"users-client-js-___ProfilePicture-module__profile-picture-selection___1iUMu"},s.createElement(d.l0,{onSubmit:async e=>{const t=new FormData;"custom"===e.source&&t.append("picture",e.file),t.append("source",e.source);const r={headers:{"content-type":"multipart/form-data"}};try{await O.l2.post(P(l),t,r)}catch(e){return void(0,O.zZ)(e)}location.reload(),await new Promise((()=>{}))},initialValues:{file:null,source:a},validate:e=>"custom"!==e.source||e.file?{}:{source:"invalid"},subscription:{},decorators:[S]},(e=>s.createElement("div",null,s.createElement(g.Z,{onSubmit:e.handleSubmit},s.createElement(m.Z.Group,{itemsPerRow:4,centered:!0},s.createElement(j,{image:E(h(h({},l),{},{source:"standard"})),text:D.vN.string("System-assigned icon"),source:"standard"}),s.createElement(j,{image:E(h(h({},l),{},{source:"identicon"})),text:"Identicon",source:"identicon",email:r}),s.createElement(j,{image:E(h(h({},l),{},{source:"gravatar"})),text:"Gravatar",source:"gravatar",email:r}),s.createElement(j,{image:c?n?URL.createObjectURL(n):E(h(h({},l),{},{source:"custom"})):null,text:D.vN.string("Custom picture"),source:"custom"},s.createElement(w,{onFileSelected:u}))),s.createElement(v.Ei,{label:D.vN.string("Save changes"),className:"submit-button"}))))))}C.propTypes={userId:o().number,email:o().string.isRequired,source:o().string.isRequired},C.defaultProps={userId:null},window.setupPictureSelection=function(e,t,r){document.addEventListener("DOMContentLoaded",(()=>{l.render(s.createElement(C,{userId:e,email:t,source:r}),document.querySelector("#profile-picture-selection"))}))}}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={id:e,loaded:!1,exports:{}};return a[e].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.m=a,e=[],i.O=(t,r,a,n)=>{if(!r){var c=1/0;for(l=0;l<e.length;l++){for(var[r,a,n]=e[l],o=!0,s=0;s<r.length;s++)(!1&n||c>=n)&&Object.keys(i.O).every((e=>i.O[e](r[s])))?r.splice(s--,1):(o=!1,n<c&&(c=n));o&&(e.splice(l--,1),t=a())}return t}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[r,a,n]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,a){if(1&a&&(e=this(e)),8&a)return e;if("object"==typeof e&&e){if(4&a&&e.__esModule)return e;if(16&a&&"function"==typeof e.then)return e}var n=Object.create(null);i.r(n);var c={};t=t||[null,r({}),r([]),r(r)];for(var o=2&a&&e;"object"==typeof o&&!~t.indexOf(o);o=r(o))Object.getOwnPropertyNames(o).forEach((t=>c[t]=()=>e[t]));return c.default=()=>e,i.d(n,c),n},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.e=()=>Promise.resolve(),i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.j=4436,(()=>{var e={4436:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var a,n,[c,o,s]=r,l=0;for(a in o)i.o(o,a)&&(i.m[a]=o[a]);if(s)var u=s(i);for(t&&t(r);l<c.length;l++)n=c[l],i.o(e,n)&&e[n]&&e[n][0](),e[c[l]]=0;return i.O(u)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var c=i.O(void 0,[5514,3044,8592],(()=>i(8535)));c=i.O(c)})();
//# sourceMappingURL=module_users.profile_picture.e988fcab.bundle.js.map