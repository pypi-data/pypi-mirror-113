(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionEvents_index_tsx"],{"./app/components/globalSdkUpdateAlert.tsx":function(e,t,n){"use strict";n("../node_modules/core-js/modules/es.reflect.construct.js"),n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var r=n("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=n("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),p=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=n("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),m=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),f=n("../node_modules/@babel/runtime/regenerator/index.js"),v=n.n(f),h=(n("../node_modules/core-js/modules/es.array.concat.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.string.includes.js"),n("../node_modules/react/index.js")),y=n("./app/actionCreators/prompts.tsx"),b=n("./app/actions/sidebarPanelActions.tsx"),g=n("./app/components/alert.tsx"),j=n("./app/constants/globalSelectionHeader.tsx"),Z=n("./app/icons/index.tsx"),w=n("./app/locale.tsx"),O=n("./app/styles/space.tsx"),x=n("./app/utils/analytics.tsx"),k=n("./app/utils/promptIsDismissed.tsx"),_=n("./app/utils/withApi.tsx"),S=n("./app/utils/withGlobalSelection.tsx"),P=n("./app/utils/withOrganization.tsx"),D=n("./app/utils/withSdkUpdates.tsx"),C=n("./app/components/sidebar/types.tsx"),z=n("./app/components/button.tsx"),E=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),q=["api","selection","sdkUpdates","organization","Wrapper"];function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e){var t=e.organization;return(0,x.ec)({eventKey:"sdk_updates.snoozed",eventName:"SDK Updates: Snoozed",organization_id:t.id})},T=function(e){(0,l.Z)(h,e);var t,n,m,f=(n=h,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(m){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function h(){var e;(0,i.Z)(this,h);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=f.call.apply(f,[this].concat(n)),(0,p.Z)((0,a.Z)(e),"state",{isDismissed:null}),(0,p.Z)((0,a.Z)(e),"snoozePrompt",(function(){var t=e.props,n=t.api,r=t.organization;(0,y.X)(n,{organizationId:r.id,feature:"sdk_updates",status:"snoozed"}),e.setState({isDismissed:!0}),N({organization:e.props.organization})})),e}return(0,s.Z)(h,[{key:"componentDidMount",value:function(){var e;this.promptsCheck(),e={organization:this.props.organization}.organization,(0,x.ec)({eventKey:"sdk_updates.seen",eventName:"SDK Updates: Seen",organization_id:e.id})}},{key:"promptsCheck",value:(t=(0,o.Z)(v().mark((function e(){var t,n,r,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.api,r=t.organization,e.next=3,(0,y.v)(n,{organizationId:r.id,feature:"sdk_updates"});case 3:o=e.sent,this.setState({isDismissed:(0,k.I)(o)});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t=this.props,n=(t.api,t.selection),o=t.sdkUpdates,i=t.organization,s=t.Wrapper,a=(0,r.Z)(t,q),l=this.state.isDismissed;if(!o||null===l||l)return null;if(0===(e=0===(null==n?void 0:n.projects.length)||(null==n?void 0:n.projects)===[j.mP]?o:o.filter((function(e){var t;return null==n||null===(t=n.projects)||void 0===t?void 0:t.includes(parseInt(e.projectId,10))})),e.reduce((function(e,t){return[].concat((0,d.Z)(e),(0,d.Z)(t.suggestions))}),[])).length)return null;var c=(0,E.tZ)(z.ZP,{priority:"link",onClick:function(){b.Z.activatePanel(C.z.Broadcasts),function(e){var t=e.organization;(0,x.ec)({eventKey:"sdk_updates.clicked",eventName:"SDK Updates: Clicked",organization_id:t.id})}({organization:i})},children:(0,w.t)("Review updates")}),u=(0,E.tZ)(g.Z,F(F({type:"info",icon:(0,E.tZ)(Z.XK,{})},a),{},{children:(0,E.BX)(V,{children:[(0,w.t)("You have outdated SDKs in your projects. Update them for important fixes and features."),(0,E.BX)(R,{children:[(0,E.tZ)(z.ZP,{priority:"link",title:(0,w.t)("Dismiss for the next two weeks"),onClick:this.snoozePrompt,children:(0,w.t)("Remind me later")}),"|",c]})]})}));return s?(0,E.tZ)(s,{children:u}):u}}]),h}(h.Component);T.displayName="InnerGlobalSdkSuggestions";var V=(0,m.Z)("div",{target:"e13jrk6t1"})("display:flex;flex-wrap:wrap;@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){justify-content:space-between;}"),R=(0,m.Z)("div",{target:"e13jrk6t0"})("display:grid;grid-template-columns:repeat(3, max-content);grid-gap:",(0,O.Z)(1),";"),A=(0,P.Z)((0,D.Z)((0,S.Z)((0,_.Z)(T))));t.Z=A},"./app/utils/discover/discoverQuery.tsx":function(e,t,n){"use strict";n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(n("../node_modules/react/index.js"),n("./app/utils/withApi.tsx")),i=n("./app/utils/discover/genericDiscoverQuery.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t){return e.transactionName!==t.transactionName||e.transactionThreshold!==t.transactionThreshold||e.transactionThresholdMetric!==t.transactionThresholdMetric}function c(e){return(0,s.tZ)(i.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({route:"eventsv2",shouldRefetchData:l},e))}c.displayName="DiscoverQuery",t.Z=(0,o.Z)(c)},"./app/views/performance/transactionSummary/transactionEvents/index.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ue}}),n("../node_modules/core-js/modules/es.reflect.construct.js"),n("../node_modules/core-js/modules/es.symbol.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var r=n("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),o=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=(n("../node_modules/core-js/modules/es.array.concat.js"),n("../node_modules/core-js/modules/es.array.sort.js"),n("../node_modules/core-js/modules/web.dom-collections.for-each.js"),n("../node_modules/core-js/modules/es.string.trim.js"),n("../node_modules/core-js/modules/es.array.join.js"),n("../node_modules/core-js/modules/es.regexp.exec.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/core-js/modules/es.array.find.js"),n("../node_modules/core-js/modules/es.array.map.js"),n("../node_modules/core-js/modules/es.array.filter.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.string.includes.js"),n("../node_modules/core-js/modules/es.object.values.js"),n("../node_modules/core-js/modules/es.object.keys.js"),n("../node_modules/core-js/modules/es.array.splice.js"),n("../node_modules/react/index.js")),d=n("../node_modules/react-router/es/index.js"),m=n("./app/components/acl/feature.tsx"),f=n("./app/components/alert.tsx"),v=n("./app/components/lightWeightNoProjectMessage.tsx"),h=n("./app/components/organizations/globalSelectionHeader/index.tsx"),y=n("./app/components/sentryDocumentTitle.tsx"),b=n("./app/locale.tsx"),g=n("./app/utils/analytics.tsx"),j=n("./app/utils/discover/discoverQuery.tsx"),Z=n("./app/utils/discover/eventView.tsx"),w=n("./app/utils/discover/fields.tsx"),O=n("./app/utils/performance/histogram/index.tsx"),x=n("./app/utils/queryString.tsx"),k=n("./app/utils/tokenizeSearch.tsx"),_=n("./app/utils/withGlobalSelection.tsx"),S=n("./app/utils/withOrganization.tsx"),P=n("./app/utils/withProjects.tsx"),D=n("./app/views/performance/utils.tsx"),C=n("./app/views/performance/transactionSummary/filter.tsx"),z=n("./app/views/performance/transactionSummary/latencyChart.tsx"),E=n("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),q=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),B=(n("../node_modules/core-js/modules/es.object.entries.js"),n("../node_modules/lodash/omit.js")),F=n.n(B),N=n("./app/components/button.tsx"),T=n("./app/components/dropdownControl.tsx"),V=n("./app/components/events/searchBar.tsx"),R=n("./app/components/globalSdkUpdateAlert.tsx"),A=n("./app/components/layouts/thirds.tsx"),I=n("./app/components/loadingIndicator.tsx"),L=n("./app/components/organizations/globalSelectionHeader/getParams.tsx"),M=n("./app/icons/index.tsx"),H=n("./app/styles/space.tsx"),W=n("./app/views/eventsV2/table/cellAction.tsx"),X=n("./app/views/performance/landing/utils.tsx"),K=n("./app/views/performance/transactionSummary/header.tsx"),U=(n("../node_modules/core-js/modules/es.number.constructor.js"),n("../node_modules/core-js/modules/es.function.name.js"),n("./app/components/gridEditable/index.tsx")),Q=n("./app/components/gridEditable/sortLink.tsx"),G=n("./app/components/links/link.tsx"),Y=n("./app/components/pagination/index.tsx"),J=n("./app/components/questionTooltip.tsx"),$=n("./app/components/tooltip.tsx"),ee=n("./app/utils.tsx"),te=n("./app/utils/discover/fieldRenderers.tsx"),ne=n("./app/views/performance/data.tsx"),re=n("./app/views/performance/transactionSummary/utils.tsx"),oe=n("../node_modules/react-dom/index.js"),ie=n("../node_modules/react-popper/lib/esm/Popper.js"),se=n("../node_modules/react-popper/lib/esm/Manager.js"),ae=n("../node_modules/react-popper/lib/esm/Reference.js"),le=n("./app/components/menuItem.tsx"),ce=n("./app/components/radio.tsx"),ue=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me=function(e){(0,a.Z)(p,e);var t,n,r=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var o=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function p(e){var t;(0,o.Z)(this,p),t=r.call(this,e),(0,u.Z)((0,s.Z)(t),"state",{isOpen:!1}),(0,u.Z)((0,s.Z)(t),"portalEl",void 0),(0,u.Z)((0,s.Z)(t),"menuEl",void 0),(0,u.Z)((0,s.Z)(t),"handleClickOutside",(function(e){t.menuEl&&e.target instanceof Element&&(t.menuEl.contains(e.target)||t.setState({isOpen:!1}))})),(0,u.Z)((0,s.Z)(t),"toggleOpen",(function(){t.setState((function(e){return{isOpen:!e.isOpen}}))}));var n=document.getElementById("transaction-events-portal");return n||((n=document.createElement("div")).setAttribute("id","transaction-events-portal"),document.body.appendChild(n)),t.portalEl=n,t.menuEl=null,t}return(0,i.Z)(p,[{key:"componentDidUpdate",value:function(e,t){this.state.isOpen&&!1===t.isOpen&&document.addEventListener("click",this.handleClickOutside,!0),!1===this.state.isOpen&&t.isOpen&&document.removeEventListener("click",this.handleClickOutside,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside,!0),this.portalEl.remove()}},{key:"generateSortLink",value:function(e){var t=this.props,n=t.eventView,r=t.tableMeta,o=t.location;if(r){var i=n.sortOnField(e,r,"desc").generateQueryStringObject();return de(de({},o),{},{query:de(de({},o.query),{},{sort:i.sort})})}}},{key:"renderMenuItem",value:function(e,t){var n=this,r=this.props.eventView;return(0,ue.tZ)(ve,{children:(0,ue.tZ)(he,{children:(0,ue.BX)(ye,{children:[(0,ue.tZ)(be,{readOnly:!0,radioSize:"small",checked:r.sorts.some((function(t){return t.field===e})),onClick:function(){var t=n.generateSortLink({field:e});t&&d.browserHistory.push(t)}}),(0,ue.tZ)("span",{children:t})]})})})}},{key:"renderMenuContent",value:function(){return(0,ue.BX)(ge,{children:[this.renderMenuItem("spans.http",(0,b.t)("Sort By HTTP")),this.renderMenuItem("spans.db",(0,b.t)("Sort By DB")),this.renderMenuItem("spans.resource",(0,b.t)("Sort By Resource")),this.renderMenuItem("spans.browser",(0,b.t)("Sort By Browser"))]})}},{key:"renderMenu",value:function(){var e=this;return oe.createPortal((0,ue.tZ)(ie.ZP,{placement:"top",modifiers:{hide:{enabled:!1},preventOverflow:{padding:10,enabled:!0,boundariesElement:"viewport"}},children:function(t){var n=t.ref,r=t.style,o=t.placement;return(0,ue.tZ)(fe,{ref:function(t){n(t),e.menuEl=t},style:r,"data-placement":o,children:e.renderMenuContent()})}}),this.portalEl)}},{key:"render",value:function(){var e=this,t=this.props.title,n=this.state.isOpen?this.renderMenu():null;return(0,ue.BX)(se.ZP,{children:[(0,ue.tZ)(ae.Z,{children:function(n){var r=n.ref;return(0,ue.tZ)(je,{ref:r,children:(0,ue.tZ)(t,{onClick:e.toggleOpen})})}}),n]})}}]),p}(p.Component);me.displayName="OperationSort";var fe=(0,q.Z)("div",{target:"e1pnio0z6"})("border:none;border-radius:2px;box-shadow:0 0 0 1px rgba(52, 60, 69, 0.2),0 1px 3px rgba(70, 82, 98, 0.25);background-clip:padding-box;background-color:",(function(e){return e.theme.background}),";width:220px;overflow:visible;z-index:",(function(e){return e.theme.zIndex.tooltip}),";&:before,&:after{width:0;height:0;content:'';display:block;position:absolute;right:auto;}&:before{border-left:9px solid transparent;border-right:9px solid transparent;left:calc(50% - 9px);z-index:-2;}&:after{border-left:8px solid transparent;border-right:8px solid transparent;left:calc(50% - 8px);z-index:-1;}&[data-placement*='bottom']{margin-top:9px;&:before{border-bottom:9px solid ",(function(e){return e.theme.border}),";top:-9px;}&:after{border-bottom:8px solid ",(function(e){return e.theme.background}),";top:-8px;}}&[data-placement*='top']{margin-bottom:9px;&:before{border-top:9px solid ",(function(e){return e.theme.border}),";bottom:-9px;}&:after{border-top:8px solid ",(function(e){return e.theme.background}),";bottom:-8px;}}"),ve=(0,q.Z)(le.Z,{target:"e1pnio0z5"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";&:not(:last-child){border-bottom:1px solid ",(function(e){return e.theme.innerBorder}),";}"),he=(0,q.Z)("div",{target:"e1pnio0z4"})({name:"1bxfgt5",styles:"display:flex;flex-direction:row;justify-content:flex-start;align-items:center;width:100%"}),ye=(0,q.Z)("label",{target:"e1pnio0z3"})({name:"1oo7s2s",styles:"display:grid;cursor:pointer;grid-gap:0.25em 0.5em;grid-template-columns:max-content auto;align-items:center;outline:none;font-weight:normal;margin:0"}),be=(0,q.Z)(ce.Z,{target:"e1pnio0z2"})({name:"ti75j2",styles:"margin:0"}),ge=(0,q.Z)("div",{target:"e1pnio0z1"})({name:"1okymkx",styles:"max-height:250px;overflow-y:auto"}),je=(0,q.Z)("div",{target:"e1pnio0z0"})({name:"e0dnmk",styles:"cursor:pointer"}),Ze=me;function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var o=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var ke=function(e){(0,a.Z)(n,e);var t=xe(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props.onClick;return(0,ue.BX)("div",{onClick:e,children:[(0,ue.tZ)("span",{children:(0,b.t)("operation duration")}),(0,ue.tZ)(Se,{size:"xs",position:"top",title:(0,b.t)("Span durations are summed over the course of an entire transaction. Any overlapping spans are only counted once.")})]})}}]),n}(p.Component);ke.displayName="OperationTitle";var _e=function(e){(0,a.Z)(n,e);var t=xe(n);function n(){var e;(0,o.Z)(this,n);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,u.Z)((0,s.Z)(e),"state",{widths:[]}),(0,u.Z)((0,s.Z)(e),"handleCellAction",(function(t){return function(n,r){var o=e.props,i=o.eventView,s=o.location,a=o.organization;(0,g.ec)({eventKey:"performance_views.transactionEvents.cellaction",eventName:"Performance Views: Transaction Events Tab Cell Action Clicked",organization_id:parseInt(a.id,10),action:n});var l=(0,k.aI)(i.query);l.removeTag("event.type"),(0,W.rh)(l,n,t,r),d.browserHistory.push({pathname:s.pathname,query:Oe(Oe({},s.query),{},{cursor:void 0,query:l.formatString()})})}})),(0,u.Z)((0,s.Z)(e),"renderBodyCellWithData",(function(t){return function(n,r){return e.renderBodyCell(t,n,r)}})),(0,u.Z)((0,s.Z)(e),"renderHeadCellWithMeta",(function(t){var n,r=null!==(n=e.props.columnTitles)&&void 0!==n?n:ne.hj;return function(n,o){return e.renderHeadCell(t,n,r[o])}})),(0,u.Z)((0,s.Z)(e),"handleResizeColumn",(function(t,n){var o=(0,r.Z)(e.state.widths);o[t]=n.width?Number(n.width):U.z7,e.setState({widths:o})})),e}return(0,i.Z)(n,[{key:"renderBodyCell",value:function(e,t,n){var r=this.props,o=r.eventView,i=r.organization,s=r.location,a=r.transactionName;if(!e||!e.meta)return n[t.key];var l=e.meta,c=String(t.key),u=(0,te.Js)(c,l)(n,{organization:i,location:s,eventView:o}),p=[W.eX.ADD,W.eX.EXCLUDE,W.eX.SHOW_GREATER_THAN,W.eX.SHOW_LESS_THAN];if("id"===c||"trace"===c){var d=("id"===c?re.vd:re.Z6)(a)(i,n,s.query);return(0,ue.tZ)(W.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t),allowActions:p,children:(0,ue.tZ)(G.Z,{to:d,children:u})})}var m=(0,w.LY)(c),f=n[m];return"integer"===l[m]&&(0,ee.ri)(f)&&f>999?(0,ue.tZ)($.Z,{title:f.toLocaleString(),containerDisplayMode:"block",position:"right",children:(0,ue.tZ)(W.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t),allowActions:p,children:u})}):(0,ue.tZ)(W.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t),allowActions:p,children:u})}},{key:"onSortClick",value:function(e,t){var n=this.props.organization;(0,g.ec)({eventKey:"performance_views.transactionEvents.sort",eventName:"Performance Views: Transaction Events Tab Sorted",organization_id:parseInt(n.id,10),field:t,direction:e})}},{key:"renderHeadCell",value:function(e,t,n){var r=this,o=this.props,i=o.eventView,s=o.location,a=(0,w.qG)(t.name,t.type,e),l={field:t.name,width:t.width},c=i.sortForField(l,e),u="id"!==l.field&&"trace"!==l.field&&l.field!==w.zD&&(0,Z.M3)(l,e),p=c?c.kind:void 0,d=c?c.field:void 0;return l.field===w.zD&&(n=(0,ue.tZ)(Ze,{title:ke,eventView:i,tableMeta:e,location:s})),(0,ue.tZ)(Q.Z,{align:a,title:n||l.field,direction:p,canSort:u,generateSortLink:function(){if(e){var t=i.sortOnField(l,e).generateQueryStringObject();return Oe(Oe({},s),{},{query:Oe(Oe({},s.query),{},{sort:t.sort})})}},onClick:function(){return r.onSortClick(p,d)}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.eventView,r=t.organization,o=t.location,i=t.setError,s=this.state.widths,a=n.getColumns().find((function(e){return e.name===w.zD})),l=n.getColumns().filter((function(e){return!a||!(0,w.yK)(e.name)})).map((function(e,t){return"number"==typeof s[t]?Oe(Oe({},e),{},{width:s[t]}):e}));return(0,ue.tZ)("div",{children:(0,ue.tZ)(j.Z,{eventView:n,orgSlug:r.slug,location:o,setError:i,referrer:"api.performance.transaction-events",children:function(t){var r=t.pageLinks,i=t.isLoading,s=t.tableData;return(0,ue.BX)(p.Fragment,{children:[(0,ue.tZ)(U.ZP,{isLoading:i,data:s?s.data:[],columnOrder:l,columnSortBy:n.getSorts(),grid:{onResizeColumn:e.handleResizeColumn,renderHeadCell:e.renderHeadCellWithMeta(null==s?void 0:s.meta),renderBodyCell:e.renderBodyCellWithData(s)},location:o}),(0,ue.tZ)(Y.Z,{pageLinks:r})]})}})})}}]),n}(p.Component);_e.displayName="EventsTable";var Se=(0,q.Z)(J.Z,{target:"e8p3pb0"})({name:"1dgfen9",styles:"position:relative;top:1px;left:4px"}),Pe=_e,De=n("./app/views/performance/transactionSummary/transactionEvents/utils.tsx");function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var o=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var qe=function(e){(0,a.Z)(n,e);var t=Ee(n);function n(){var e;(0,o.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),(0,u.Z)((0,s.Z)(e),"state",{incompatibleAlertNotice:null,error:void 0}),(0,u.Z)((0,s.Z)(e),"handleCellAction",(function(t){return function(n,r){var o=e.props,i=o.eventView,s=o.location,a=(0,k.aI)(i.query);a.removeTag("event.type"),a.removeTag("transaction"),(0,W.rh)(a,n,t,r),d.browserHistory.push({pathname:s.pathname,query:ze(ze({},s.query),{},{cursor:void 0,query:a.formatString()})})}})),(0,u.Z)((0,s.Z)(e),"handleIncompatibleQuery",(function(t,n){var r=t((function(){return e.setState({incompatibleAlertNotice:null})}));e.setState({incompatibleAlertNotice:r})})),(0,u.Z)((0,s.Z)(e),"setError",(function(t){e.setState({error:t})})),e}return(0,i.Z)(n,[{key:"renderError",value:function(){var e=this.state.error;return e?(0,ue.tZ)(Te,{type:"error",icon:(0,ue.tZ)(M.Gy,{size:"md"}),children:e}):null}},{key:"render",value:function(){var e=this.props,t=e.eventView,n=e.location,r=e.organization,o=e.projects,i=e.transactionName,s=e.isLoading,a=this.state.incompatibleAlertNotice;return(0,ue.BX)(p.Fragment,{children:[(0,ue.tZ)(K.Z,{eventView:t,location:n,organization:r,projects:o,transactionName:i,currentTab:K.O.Events,hasWebVitals:(0,X.Q_)(n,o,t).field===X.BY.FRONTEND_PAGELOAD,handleIncompatibleQuery:this.handleIncompatibleQuery}),(0,ue.BX)(A.uT,{children:[(0,ue.tZ)(Ae,{}),this.renderError(),a&&(0,ue.tZ)(A.or,{fullWidth:!0,children:a}),(0,ue.tZ)(A.or,{fullWidth:!0,children:s?(0,ue.tZ)(I.Z,{}):(0,ue.tZ)(Be,ze(ze({},this.props),{},{setError:this.setError}))})]})]})}}]),n}(p.Component);qe.displayName="EventsPageContent";var Be=function(e){(0,a.Z)(n,e);var t=Ee(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props.eventView,t=this.props,n=t.location,r=t.organization,o=t.transactionName,i=t.spanOperationBreakdownFilter,s=t.eventsDisplayFilterName,a=t.onChangeEventsDisplayFilter,l=t.setError,c=t.webVital,u=[(0,b.t)("event id"),(0,b.t)("user"),(0,b.t)("operation duration"),(0,b.t)("total duration"),(0,b.t)("trace id"),(0,b.t)("timestamp")];c&&u.splice(3,0,(0,b.t)(c));var d=(0,C.Is)(i,n);return d&&((e=e.clone()).query="".concat(e.query," ").concat(d).trim(),u.splice(2,1,(0,b.t)("".concat(i," duration")))),(0,ue.BX)(p.Fragment,{children:[(0,ue.tZ)(Fe,ze(ze({},this.props),{},{onChangeEventsDisplayFilter:a,eventsDisplayFilterName:s})),(0,ue.tZ)(Re,{children:(0,ue.tZ)(Pe,{eventView:e,organization:r,location:n,setError:l,columnTitles:u,transactionName:o})})]})}}]),n}(p.Component);Be.displayName="Body";var Fe=function(e){var t=e.eventView,n=e.location,r=e.organization,o=e.spanOperationBreakdownFilter,i=e.onChangeSpanOperationBreakdownFilter,s=e.eventsDisplayFilterName,a=e.onChangeEventsDisplayFilter,l=e.percentileValues,c=(0,x.ro)(n.query.query,""),u=(0,De._S)(o,l);return(0,ue.BX)(Ne,{children:[(0,ue.tZ)(C.ZP,{organization:r,currentFilter:o,onChangeFilter:i}),(0,ue.tZ)(Ve,{organization:r,projectIds:t.project,query:c,fields:t.fields,onSearch:function(e){var t=(0,L.Q)(ze(ze({},n.query||{}),{},{query:e})),r=F()(t,"cursor");d.browserHistory.push({pathname:n.pathname,query:r})}}),(0,ue.tZ)(Ie,{children:(0,ue.tZ)(T.ZP,{buttonProps:{prefix:(0,b.t)("Percentile")},label:u[s].label,children:Object.entries(u).map((function(e){var t=(0,E.Z)(e,2),n=t[0],r=t[1];return(0,ue.tZ)(T.hP,{onSelect:a,eventKey:n,"data-test-id":n,isActive:s===n,children:r.label},n)}))})}),(0,ue.tZ)(Ie,{children:(0,ue.tZ)(N.ZP,{to:t.getResultsViewUrlTarget(r.slug),children:(0,b.t)("Open in Discover")})})]})};Fe.displayName="Search";var Ne=(0,q.Z)("div",{target:"e1rf7xcw5"})("display:flex;width:100%;margin-bottom:",(0,H.Z)(3),";"),Te=(0,q.Z)(f.Z,{target:"e1rf7xcw4"})({name:"3hfw1i",styles:"grid-column:1/3;margin:0"}),Ve=(0,q.Z)(V.Z,{target:"e1rf7xcw3"})({name:"1ff36h2",styles:"flex-grow:1"}),Re=(0,q.Z)("div",{target:"e1rf7xcw2"})({name:"1ff36h2",styles:"flex-grow:1"}),Ae=(0,q.Z)(R.Z,{target:"e1rf7xcw1"})("@media (min-width: ",(function(e){return e.theme.breakpoints[1]}),"){margin-bottom:0;}"),Ie=(0,q.Z)("div",{target:"e1rf7xcw0"})("margin-left:",(0,H.Z)(1),";flex-grow:0;");Ae.defaultProps={Wrapper:function(e){return(0,ue.tZ)(A.or,ze({fullWidth:!0},e))}};var Le=qe;function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var We=function(e){(0,a.Z)(p,e);var t,n,r=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var o=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function p(){var e;(0,o.Z)(this,p);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),(0,u.Z)((0,s.Z)(e),"state",{spanOperationBreakdownFilter:(0,C.q0)(e.props.location),eventsDisplayFilterName:(0,De.tb)(e.props.location),eventView:Ke(e.props.location,(0,D.JY)(e.props.location))}),(0,u.Z)((0,s.Z)(e),"onChangeSpanOperationBreakdownFilter",(function(t){var n,r=e.props,o=r.location,i=r.organization,s=e.state,a=s.spanOperationBreakdownFilter,l=s.eventsDisplayFilterName,c=s.eventView;(0,g.ec)({eventName:"Performance Views: Transaction Events Ops Breakdown Filter Dropdown",eventKey:"performance_views.transactionEvents.ops_filter_dropdown.selection",organization_id:parseInt(i.id,10),action:t});var u=(0,De._S)(a)[l].sort,p=null==c||null===(n=c.sorts)||void 0===n?void 0:n[0],m={};(null==u?void 0:u.kind)===(null==p?void 0:p.kind)&&(null==u?void 0:u.field)===(null==p?void 0:p.field)&&(m=(0,De.qg)(l,t));var f=He(He(He({},(0,O.V)(o,[z.Oo,z.mo])),(0,C.bz)(t)),m);t===C.f1.None&&delete f.breakdown,d.browserHistory.push({pathname:o.pathname,query:f})})),(0,u.Z)((0,s.Z)(e),"onChangeEventsDisplayFilter",(function(t){var n=e.props.organization;(0,g.ec)({eventName:"Performance Views: Transaction Events Display Filter Dropdown",eventKey:"performance_views.transactionEvents.display_filter_dropdown.selection",organization_id:parseInt(n.id,10),action:t}),e.filterDropdownSortEvents(t)})),(0,u.Z)((0,s.Z)(e),"filterDropdownSortEvents",(function(t){var n=e.props.location,r=e.state.spanOperationBreakdownFilter,o=He(He({},(0,O.V)(n,[z.Oo,z.mo])),(0,De.qg)(t,r));t===De.q3.p100&&delete o.showTransaction,d.browserHistory.push({pathname:n.pathname,query:o})})),(0,u.Z)((0,s.Z)(e),"getFilteredEventView",(function(t){var n=e.state,r=n.eventsDisplayFilterName,o=n.spanOperationBreakdownFilter,i=n.eventView,s=(0,De._S)(o,t)[r],a=null==i?void 0:i.clone();if(a&&null!=s&&s.query){var l=(0,k.aI)(a.query);s.query.forEach((function(e){return l.setTagValues(e[0],[e[1]])})),a.query=l.formatString()}return a})),(0,u.Z)((0,s.Z)(e),"renderNoAccess",(function(){return(0,ue.tZ)(f.Z,{type:"warning",children:(0,b.t)("You don't have access to this feature")})})),e}return(0,i.Z)(p,[{key:"getDocumentTitle",value:function(){var e=(0,D.JY)(this.props.location);return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,b.t)("Events")].join(" — "):[(0,b.t)("Summary"),(0,b.t)("Events")].join(" — ")}},{key:"getPercentilesEventView",value:function(e){return e.withColumns([].concat([{kind:"function",function:["p100","",void 0,void 0]},{kind:"function",function:["p99","",void 0,void 0]},{kind:"function",function:["p95","",void 0,void 0]},{kind:"function",function:["p75","",void 0,void 0]},{kind:"function",function:["p50","",void 0,void 0]}]))}},{key:"render",value:function(){var e=this,t=this.props,n=t.organization,r=t.projects,o=t.location,i=this.state.eventView,s=(0,D.JY)(o),a=Xe(o);if(!i||void 0===s)return d.browserHistory.replace({pathname:"/organizations/".concat(n.slug,"/performance/"),query:He({},o.query)}),null;var l=this.getPercentilesEventView(i),c=1===i.project.length,u=c?r.find((function(e){return parseInt(e.id,10)===i.project[0]})):void 0,p=i.project.map((function(e){return r.find((function(t){return parseInt(t.id,10)===e}))})).filter((function(e){return void 0!==e})).map((function(e){return e.slug}));return(0,ue.tZ)(y.Z,{title:this.getDocumentTitle(),orgSlug:n.slug,projectSlug:null==u?void 0:u.slug,children:(0,ue.tZ)(m.Z,{features:["performance-events-page"],organization:n,renderDisabled:this.renderNoAccess,children:(0,ue.tZ)(h.Z,{lockedMessageSubject:(0,b.t)("transaction"),shouldForceProject:c,forceProject:u,specificProjectSlugs:p,disableMultipleProjectSelection:!0,showProjectSettingsLink:!0,children:(0,ue.tZ)(v.Z,{organization:n,children:(0,ue.tZ)(j.Z,{eventView:l,orgSlug:n.slug,location:o,referrer:"api.performance.transaction-events",children:function(t){var i,l=t.isLoading,c=t.tableData,u=null==c||null===(i=c.data)||void 0===i?void 0:i[0];return(0,ue.tZ)(Le,{location:o,eventView:e.getFilteredEventView(u),transactionName:s,organization:n,projects:r,spanOperationBreakdownFilter:e.state.spanOperationBreakdownFilter,onChangeSpanOperationBreakdownFilter:e.onChangeSpanOperationBreakdownFilter,eventsDisplayFilterName:e.state.eventsDisplayFilterName,onChangeEventsDisplayFilter:e.onChangeEventsDisplayFilter,percentileValues:u,isLoading:l,webVital:a})}})})})})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return He(He({},t),{},{spanOperationBreakdownFilter:(0,C.q0)(e.location),eventsDisplayFilterName:(0,De.tb)(e.location),eventView:Ke(e.location,(0,D.JY)(e.location))})}}]),p}(p.Component);function Xe(e){var t=(0,x.ro)(e.query.webVital,"");if(Object.values(w.Zl).includes(t))return t}function Ke(e,t){if(void 0!==t){var n=(0,x.ro)(e.query.query,""),o=(0,k.aI)(n);o.setTagValues("event.type",["transaction"]).setTagValues("transaction",[t]),Object.keys(o.tagValues).forEach((function(e){(0,w.h1)(e)&&o.removeTag(e)}));var i=["id","user.display",w.zD,"transaction.duration","trace","timestamp"],s=(0,C.q0)(e);s!==C.f1.None?i.splice(2,1,"spans.".concat(s)):i.push.apply(i,(0,r.Z)(w.$4).concat(["spans.total.time"]));var a=Xe(e);return a&&i.splice(3,0,a),Z.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:t,fields:i,query:o.formatString(),projects:[],orderby:(0,x.ro)(e.query.sort,"-timestamp")},e)}}We.displayName="TransactionEvents";var Ue=(0,_.Z)((0,P.Z)((0,S.Z)(We)))},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":function(e,t,n){"use strict";n.d(t,{q3:function(){return r},_S:function(){return c},xr:function(){return u},tb:function(){return p},qg:function(){return d},Zq:function(){return m}});var r,o=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(n("../node_modules/core-js/modules/es.number.to-fixed.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.string.includes.js"),n("../node_modules/core-js/modules/es.object.values.js"),n("../node_modules/core-js/modules/es.array.sort.js"),n("../node_modules/core-js/modules/es.array.concat.js"),n("./app/locale.tsx")),s=n("./app/utils/queryString.tsx"),a=n("./app/views/performance/transactionSummary/filter.tsx"),l=n("./app/views/performance/transactionSummary/utils.tsx");function c(e,t){var n,s=t||{p99:0,p95:0,p75:0,p50:0},l=s.p99,c=s.p95,u=s.p75,p=s.p50;return n={},(0,o.Z)(n,r.p50,{name:r.p50,query:p?[["transaction.duration","<=".concat(p.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,i.t)("p50")}),(0,o.Z)(n,r.p75,{name:r.p75,query:u?[["transaction.duration","<=".concat(u.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,i.t)("p75")}),(0,o.Z)(n,r.p95,{name:r.p95,query:c?[["transaction.duration","<=".concat(c.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,i.t)("p95")}),(0,o.Z)(n,r.p99,{name:r.p99,query:l?[["transaction.duration","<=".concat(l.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,i.t)("p99")}),(0,o.Z)(n,r.p100,{name:r.p100,label:(0,i.t)("p100")}),n}function u(e){var t=e.orgSlug,n=e.transaction,r=e.projectID,o=e.query;return{pathname:"/organizations/".concat(t,"/performance/summary/events/"),query:{transaction:n,project:r,environment:o.environment,statsPeriod:o.statsPeriod,start:o.start,end:o.end,query:o.query}}}function p(e){return t=(0,s.ro)(e.query.showTransactions,r.p100),Object.values(r).includes(t)?t:r.p100;var t}function d(e,t){var n,r,o=c(t),i=null===(n=o[e].sort)||void 0===n?void 0:n.kind,s=null===(r=o[e].sort)||void 0===r?void 0:r.field,a={showTransactions:e};return i&&s&&(a.sort="".concat("desc"===i?"-":"").concat(s)),a}function m(e){switch(e){case l.K0.OUTLIER:return r.p100;case l.K0.SLOW:return r.p95;default:return}}!function(e){e.p50="p50",e.p75="p75",e.p95="p95",e.p99="p99",e.p100="p100"}(r||(r={}))}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionEvents_index_tsx.36c4d7cc401da5fb2e3f37db615b6c05.js.map