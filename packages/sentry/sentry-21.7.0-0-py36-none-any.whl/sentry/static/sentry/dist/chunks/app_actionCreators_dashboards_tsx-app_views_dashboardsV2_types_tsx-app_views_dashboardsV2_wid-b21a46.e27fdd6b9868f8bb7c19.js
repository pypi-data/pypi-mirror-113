(self.webpackChunk=self.webpackChunk||[]).push([["app_actionCreators_dashboards_tsx-app_views_dashboardsV2_types_tsx-app_views_dashboardsV2_wid-b21a46"],{"./app/actionCreators/dashboards.tsx":function(e,t,r){"use strict";r.d(t,{JR:function(){return s},AK:function(){return i},Y:function(){return a},iM:function(){return l},QL:function(){return u}}),r("../node_modules/core-js/modules/es.array.concat.js");var n=r("./app/actionCreators/indicator.tsx"),o=r("./app/locale.tsx");function s(e,t,r,s){var i=r.title,a=r.widgets,l=e.requestPromise("/organizations/".concat(t,"/dashboards/"),{method:"POST",data:{title:i,widgets:a,duplicate:s}});return l.catch((function(e){var t,r=null!==(t=null==e?void 0:e.responseJSON)&&void 0!==t?t:null;r?(0,n.Iw)(r):(0,n.Iw)((0,o.t)("Unable to create dashboard"))})),l}function i(e,t,r){var s=e.requestPromise("/organizations/".concat(t,"/dashboards/").concat(r,"/"),{method:"GET"});return s.catch((function(e){var t,r=null!==(t=null==e?void 0:e.responseJSON)&&void 0!==t?t:null;r?(0,n.Iw)(r):(0,n.Iw)((0,o.t)("Unable to load dashboard"))})),s}function a(e,t,r){var s={title:r.title,widgets:r.widgets},i=e.requestPromise("/organizations/".concat(t,"/dashboards/").concat(r.id,"/"),{method:"PUT",data:s});return i.catch((function(e){var t,r=null!==(t=null==e?void 0:e.responseJSON)&&void 0!==t?t:null;r?(0,n.Iw)(r):(0,n.Iw)((0,o.t)("Unable to update dashboard"))})),i}function l(e,t,r){var s=e.requestPromise("/organizations/".concat(t,"/dashboards/").concat(r,"/"),{method:"DELETE"});return s.catch((function(e){var t,r=null!==(t=null==e?void 0:e.responseJSON)&&void 0!==t?t:null;r?(0,n.Iw)(r):(0,n.Iw)((0,o.t)("Unable to delete dashboard"))})),s}function u(e,t,r){return e.requestPromise("/organizations/".concat(t,"/dashboards/widgets/"),{method:"POST",data:r})}},"./app/actionCreators/events.tsx":function(e,t,r){"use strict";if(r.d(t,{lI:function(){return h},eV:function(){return b},JE:function(){return g}}),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),"app"==r.j)var n=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");var o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=r("../node_modules/@babel/runtime/regenerator/index.js"),a=r.n(i),l=(r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.entries.js"),r("../node_modules/core-js/modules/es.object.values.js"),r("../node_modules/lodash/pick.js")),u=r.n(l),c=r("./app/components/charts/utils.tsx"),d=r("./app/utils/getPeriod.tsx"),p=r("./app/utils/performance/constants.tsx");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(e,t){var r=t.organization,n=t.project,o=t.environment,i=t.team,a=t.period,l=t.start,u=t.end,p=t.interval,m=t.includePrevious,h=t.query,b=t.yAxis,v=t.field,g=t.topEvents,y=t.orderby,j=t.partial,Z=(0,c.Sw)(m,a),w=Object.fromEntries(Object.entries({interval:p,project:n,environment:o,team:i,query:h,yAxis:b,field:v,topEvents:g,orderby:y,partial:j?"1":void 0}).filter((function(e){return void 0!==(0,s.Z)(e,2)[1]}))),O=(0,d.X)({period:a,start:l,end:u},{shouldDoublePeriod:Z});return e.requestPromise("/organizations/".concat(r.slug,"/events-stats/"),{query:f(f({},w),O)})};function b(e,t,r){return v.apply(this,arguments)}function v(){return(v=(0,n.Z)(a().mark((function e(t,r,n){var o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u()(n,Object.values(p.s)),s=f(f({},o),{},{query:n.query}),e.abrupt("return",t.requestPromise("/organizations/".concat(r,"/events-facets/"),{query:s}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,r){return y.apply(this,arguments)}function y(){return(y=(0,n.Z)(a().mark((function e(t,r,n){var o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u()(n,Object.values(p.s)),s=f(f({},o),{},{query:n.query}),e.abrupt("return",t.requestPromise("/organizations/".concat(r,"/events-meta/"),{query:s}).then((function(e){return e.count})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"./app/components/charts/components/visualMap.tsx":function(e,t,r){"use strict";function n(e){return e}r.d(t,{Z:function(){return n}}),r("../node_modules/echarts/lib/component/visualMap.js")},"./app/components/charts/lineChart.tsx":function(e,t,r){"use strict";r.d(t,{Z:function(){return g}}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),s=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=(r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/react/index.js")),d=r("./app/components/charts/series/lineSeries.tsx"),p=r("./app/components/charts/baseChart.tsx"),m=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),f=["series","seriesOptions"],h=["seriesName","data","dataArray"];function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(e){(0,a.Z)(c,e);var t,r,n=(t=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(r){var o=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function c(){return(0,s.Z)(this,c),n.apply(this,arguments)}return(0,i.Z)(c,[{key:"render",value:function(){var e=this.props,t=e.series,r=e.seriesOptions,n=(0,o.Z)(e,f);return(0,m.tZ)(p.Z,v(v({},n),{},{series:t.map((function(e){var t=e.seriesName,n=e.data,s=e.dataArray,i=(0,o.Z)(e,h);return(0,d.Z)(v(v(v({},r),i),{},{name:t,data:s||n.map((function(e){var t=e.value;return[e.name,t]})),animation:!1,animationThreshold:1,animationDuration:0}))}))}))}}]),c}(c.Component);g.displayName="LineChart"},"./app/components/charts/transitionChart.tsx":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.reflect.construct.js");var n=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/react/index.js")),d=r("./app/components/charts/loadingPanel.tsx"),p=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var m=function(e){(0,i.Z)(f,e);var t,r,m=(t=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(r){var o=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function f(){var e;(0,n.Z)(this,f);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=m.call.apply(m,[this].concat(r)),(0,u.Z)((0,s.Z)(e),"state",{prevReloading:e.props.reloading,prevLoading:e.props.loading,key:1}),e}return(0,o.Z)(f,[{key:"render",value:function(){var e=this.props,t=e.height,r=e.loading,n=e.reloading;return r&&!n?(0,p.tZ)(d.Z,{height:t,"data-test-id":"events-request-loading"}):(0,p.tZ)(c.Fragment,{children:this.props.children},String(this.state.key))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.prevReloading,n=e.reloading,o=t.prevLoading,s=e.loading;return o!==s?{prevReloading:n,prevLoading:s,key:t.key+1}:s?{prevReloading:n,prevLoading:s,key:t.key}:r&&!n?{prevReloading:n,prevLoading:s,key:t.key+1}:{prevReloading:n,prevLoading:s,key:t.key}}}]),f}(c.Component);m.displayName="TransitionChart",(0,u.Z)(m,"defaultProps",{height:"200px"}),t.Z=m},"./app/utils/getPeriod.tsx":function(e,t,r){"use strict";r.d(t,{X:function(){return l}});var n=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),o=(r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.string.match.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/moment/moment.js")),s=r.n(o),i=r("./app/constants/index.tsx"),a=r("./app/utils/dates.tsx"),l=function(e){var t=e.period,r=e.start,o=e.end,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=l.shouldDoublePeriod;if(t||r||o||(t=i.GY),t){if(!u)return{statsPeriod:t};var c=t.match(/([0-9]+)([mhdw])/),d=(0,n.Z)(c,3),p=d[1],m=d[2];return{statsPeriod:"".concat(2*parseInt(p,10)).concat(m)}}if(!r||!o)throw new Error("start and end required");var f=(0,a.v5)(r),h=(0,a.v5)(o);if(u){var b=s()(o).diff(s()(r)),v=s()(r).subtract(b);return{start:(0,a.v5)(v),end:h}}return{start:f,end:h}}},"./app/views/dashboardsV2/contextMenu.tsx":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=r("../node_modules/classnames/index.js"),i=r.n(s),a=r("./app/components/dropdownMenu.tsx"),l=r("./app/icons/index.tsx"),u=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e){var t=e.children;return(0,u.tZ)(a.Z,{children:function(e){var r=e.isOpen,n=e.getRootProps,o=e.getActorProps,s=e.getMenuProps,a=i()("dropdown",{"anchor-right":!0,open:r});return(0,u.BX)(m,d(d({},n({className:a})),{},{children:[(0,u.tZ)(f,d(d({},o({onClick:function(e){e.stopPropagation(),e.preventDefault()}})),{},{children:(0,u.tZ)(l.YR,{"data-test-id":"context-menu",size:"md"})})),r&&(0,u.tZ)("ul",d(d({},s({})),{},{className:i()("dropdown-menu"),children:t}))]}))}})};p.displayName="ContextMenu";var m=(0,o.Z)("span",{target:"e1xn1f5x1"})("display:flex;color:",(function(e){return e.theme.textColor}),";"),f=(0,o.Z)("div",{target:"e1xn1f5x0"})({name:"1y7emqs",styles:"display:flex;cursor:pointer;padding:0 5px"});t.Z=p},"./app/views/dashboardsV2/types.tsx":function(e,t,r){"use strict";var n,o;r.d(t,{F:function(){return n},n:function(){return o}}),function(e){e.AREA="area",e.BAR="bar",e.LINE="line",e.TABLE="table",e.WORLD_MAP="world_map",e.BIG_NUMBER="big_number",e.STACKED_AREA="stacked_area"}(n||(n={})),function(e){e.VIEW="view",e.EDIT="edit",e.CREATE="create",e.PENDING_DELETE="pending_delete"}(o||(o={}))},"./app/views/dashboardsV2/utils.tsx":function(e,t,r){"use strict";r.d(t,{q:function(){return a},t:function(){return l}});var n=r("../node_modules/lodash/cloneDeep.js"),o=r.n(n),s=r("./app/utils/dates.tsx"),i=r("./app/utils/discover/eventView.tsx");function a(e){return o()(e)}function l(e,t,r){var n=r.datetime,o=n.start,a=n.end,l=n.period,u=r.projects,c=r.environments;return i.ZP.fromSavedQuery({id:void 0,name:e,version:2,fields:t.fields,query:t.conditions,orderby:t.orderby,projects:u,range:l,start:o?(0,s.v5)(o):void 0,end:a?(0,s.v5)(a):void 0,environment:c})}},"./app/views/dashboardsV2/widgetCard.tsx":function(e,t,r){"use strict";r.d(t,{Z:function(){return Le}}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),c=(r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/react/index.js")),d=r("../node_modules/react-router/es/index.js"),p=r("../node_modules/lodash/isEqual.js"),m=r.n(p),f=r("./app/components/charts/styles.tsx"),h=r("./app/components/errorBoundary.tsx"),b=r("./app/components/menuItem.tsx"),v=r("./app/components/organizations/globalSelectionHeader/utils.tsx"),g=r("./app/components/panels/index.tsx"),y=r("./app/components/placeholder.tsx"),j=r("./app/icons/index.tsx"),Z=r("./app/locale.tsx"),w=r("./app/styles/overflowEllipsis.tsx"),O=r("./app/styles/space.tsx"),x=r("./app/utils/analytics.tsx"),_=r("./app/utils/withApi.tsx"),P=r("./app/utils/withGlobalSelection.tsx"),R=r("./app/utils/withOrganization.tsx"),C=r("./app/views/dashboardsV2/contextMenu.tsx"),k=r("./app/views/dashboardsV2/utils.tsx"),D=(r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js")),S=r("./app/components/charts/areaChart.tsx"),E=r("./app/components/charts/barChart.tsx"),q=r("./app/components/charts/chartZoom.tsx"),T=r("./app/components/charts/errorPanel.tsx"),M=r("./app/components/charts/lineChart.tsx"),z=(r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("./app/components/panels/panelTable.tsx")),N=r("./app/utils/discover/fieldRenderers.tsx"),A=r("./app/utils/discover/fields.tsx"),B=r("./app/views/eventsV2/utils.tsx"),I=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var L=function(e){(0,i.Z)(u,e);var t,r,n=(t=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(r){var o=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function u(){return(0,o.Z)(this,u),n.apply(this,arguments)}return(0,s.Z)(u,[{key:"renderRow",value:function(e,t,r,n){var o=this.props,s=o.location,i=o.organization;return n.map((function(n){var o=(0,N.Js)(n.name,r)(t,{organization:i,location:s});return(0,I.tZ)("div",{children:o},"".concat(e,":").concat(n.name))}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.className,n=t.loading,o=t.fields,s=t.metadata,i=t.data,a=t.title,l=null!=s?s:{},u=(0,B.Hg)(o.map((function(e){return{field:e}})));return(0,I.BX)(c.Fragment,{children:[a&&(0,I.tZ)("h4",{children:a}),(0,I.tZ)(F,{className:r,isLoading:n,headers:u.map((function(e,t){var r=(0,A.qG)(e.name,e.type,l);return(0,I.tZ)(W,{align:r,children:e.name},t)})),children:null==i?void 0:i.map((function(t,r){return e.renderRow(r,t,l,u)}))})]})}}]),u}(c.Component);L.displayName="SimpleTableChart";var F=(0,u.Z)(z.Z,{target:"e3tr8vk1"})("border-radius:0;border-left:0;border-right:0;border-bottom:0;margin:0;",z.z,"{height:min-content;}"),W=(0,u.Z)("div",{target:"e3tr8vk0"})((function(e){return e.align?"text-align: ".concat(e.align,";"):""}),";"),X=(0,R.Z)(L),V=r("./app/components/charts/transitionChart.tsx"),U=r("./app/components/charts/transparentLoadingMask.tsx"),J=r("./app/components/charts/utils.tsx"),G=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),Q=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),H=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),K=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),Y=r("../node_modules/@babel/runtime/regenerator/index.js"),$=r.n(Y),ee=(r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.promise.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/core-js/modules/es.object.entries.js"),r("../node_modules/core-js/modules/es.array.join.js"),r("../node_modules/echarts/index.js")),te=r.n(ee),re=r("../node_modules/lodash/max.js"),ne=r.n(re),oe=r("./app/components/charts/components/visualMap.tsx");function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r("../node_modules/echarts/lib/chart/map.js");var ae=r("./app/components/charts/baseChart.tsx"),le=["series","seriesOptions","theme"],ue=["seriesName","data"];function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pe=function(e){(0,i.Z)(p,e);var t,u,c,d=(u=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,l.Z)(u);if(c){var r=(0,l.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,a.Z)(this,e)});function p(){var e;(0,o.Z)(this,p);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=d.call.apply(d,[this].concat(r)),(0,n.Z)((0,K.Z)(e),"state",{countryToCodeMap:null,map:null,codeToCountryMap:null}),e}return(0,s.Z)(p,[{key:"componentDidMount",value:(t=(0,H.Z)($().mark((function e(){var t,n,o,s;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e("app_data_countryCodesMap_tsx").then(r.bind(r,"./app/data/countryCodesMap.tsx")),r.e("app_data_world_json").then(r.t.bind(r,"./app/data/world.json",19))]);case 2:t=e.sent,n=(0,Q.Z)(t,2),o=n[0],s=n[1],te().registerMap("sentryWorld",s.default),this.setState({countryToCodeMap:o.default,map:s.default,codeToCountryMap:Object.fromEntries(Object.entries(o.default).map((function(e){var t=(0,Q.Z)(e,2),r=t[0];return[t[1],r]})))});case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,r=t.countryToCodeMap,n=t.map;if(null===r||null===n)return null;var o=this.props,s=o.series,i=o.seriesOptions,a=o.theme,l=(0,G.Z)(o,le),u=s.map((function(t){var r,n=t.seriesName,o=t.data,s=(0,G.Z)(t,ue);return function(){return ie(ie({roam:!0,itemStyle:{emphasis:{label:{show:!1}}}},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},{type:"map"})}(de(de(de({},i),s),{},{map:"sentryWorld",name:n,nameMap:null!==(r=e.state.countryToCodeMap)&&void 0!==r?r:void 0,aspectScale:.85,zoom:1.3,center:[10.97,9.71],itemStyle:{areaColor:a.gray200,borderColor:a.backgroundSecondary,emphasis:{areaColor:a.orange300}},label:{emphasis:{show:!1}},data:o}))})),c=ne()(s.map((function(e){var t=e.data;return ne()(t.map((function(e){return e.value})))})))||1;return(0,I.tZ)(ae.Z,de(de({options:{backgroundColor:a.background,visualMap:[(0,oe.Z)({left:"right",min:0,max:c,inRange:{color:[a.purple200,a.purple300]},text:["High","Low"],textStyle:{color:a.textColor},calculable:!1})]}},l),{},{yAxis:null,xAxis:null,series:u,tooltip:{formatter:function(t){var r,n=Array.isArray(t)?t[0]:t,o=n.marker,s=n.name,i=n.value;if(isNaN(i))return"";var a="number"==typeof i?i.toLocaleString():"",l=(null===(r=e.state.codeToCountryMap)||void 0===r?void 0:r[s])||s;return['<div class="tooltip-series tooltip-series-solo">\n                 <div><span class="tooltip-label">'.concat(o," <strong>").concat(l,"</strong></span> ").concat(a,"</div>\n              </div>"),'<div class="tooltip-arrow"></div>'].join("")}}}))}}]),p}(c.Component);pe.displayName="WorldMapChart";var me=(0,D.b)(pe),fe=r("./app/components/loadingIndicator.tsx"),he=r("./app/utils/discover/charts.tsx"),be=r("./app/utils/getDynamicText.tsx");function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ye=function(e){(0,i.Z)(u,e);var t,r,n=(t=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(r){var o=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function u(){return(0,o.Z)(this,u),n.apply(this,arguments)}return(0,s.Z)(u,[{key:"shouldComponentUpdate",value:function(e){var t=ge(ge({},this.props),{},{widget:ge(ge({},this.props.widget),{},{title:""})});return e=ge(ge({},e),{},{widget:ge(ge({},e.widget),{},{title:""})}),!m()(t,e)}},{key:"tableResultComponent",value:function(e){var t=e.loading,r=e.errorMessage,n=e.tableResults,o=this.props,s=o.location,i=o.widget,a=o.organization;return r?(0,I.tZ)(T.Z,{children:(0,I.tZ)(j.FC,{color:"gray500",size:"lg"})}):void 0===n||t?(0,I.tZ)(y.Z,{height:"200px"}):n.map((function(e,r){var o,l,u=null!==(o=null===(l=i.queries[r])||void 0===l?void 0:l.fields)&&void 0!==o?o:[];return(0,I.tZ)(xe,{location:s,fields:u,title:n.length>1?e.title:"",loading:t,metadata:e.meta,data:e.data,organization:a},"table:".concat(e.title))}))}},{key:"bigNumberComponent",value:function(e){var t=e.loading,r=e.errorMessage,n=e.tableResults;return r?(0,I.tZ)(T.Z,{children:(0,I.tZ)(j.FC,{color:"gray500",size:"lg"})}):void 0===n||t?(0,I.tZ)(we,{children:"—"}):n.map((function(e){var t,r=null!==(t=e.meta)&&void 0!==t?t:{},n=Object.keys(null!=r?r:{})[0];if(!n||!e.data.length)return(0,I.tZ)(we,{children:"—"},"big_number:".concat(e.title));var o=e.data[0],s=(0,N.fK)(n,r)(o);return(0,I.tZ)(we,{children:s},"big_number:".concat(e.title))}))}},{key:"chartComponent",value:function(e){switch(this.props.widget.displayType){case"bar":return(0,I.tZ)(E.Z,ge({},e));case"area":return(0,I.tZ)(S.Z,ge({stacked:!0},e));case"world_map":return(0,I.tZ)(me,ge({},e));case"line":default:return(0,I.tZ)(M.Z,ge({},e))}}},{key:"render",value:function(){var e,t,r,n=this,o=this.props,s=o.theme,i=o.tableResults,a=o.timeseriesResults,l=o.errorMessage,u=o.loading,c=o.widget;if("table"===c.displayType)return(0,I.BX)(V.Z,{loading:u,reloading:u,children:[(0,I.tZ)(Ze,{loading:u}),this.tableResultComponent({tableResults:i,loading:u,errorMessage:l})]});if("big_number"===c.displayType)return(0,I.BX)(V.Z,{loading:u,reloading:u,children:[(0,I.tZ)(Ze,{loading:u}),this.bigNumberComponent({tableResults:i,loading:u,errorMessage:l})]});if(l)return(0,I.tZ)(T.Z,{children:(0,I.tZ)(j.FC,{color:"gray500",size:"lg"})});var d=this.props,p=d.location,m=d.router,f=d.selection.datetime,h=f.start,b=f.end,v=f.period,g=f.utc;if("world_map"===c.displayType){var Z={title:"",data:[]},w=function(){var e;if(!i||!i.length)return Z;var t=i[0],r=t.data,n=t.meta;if(!r||!r.length||!n)return Z;var o=Object.keys(n).find((function(e){return"geo.country_code"!==e}));return o?{title:null!==(e=t.title)&&void 0!==e?e:"",data:r.filter((function(e){return e["geo.country_code"]})).map((function(e){return{name:e["geo.country_code"],value:e[o]}}))}:Z}(),O=w.data,x=[{seriesName:w.title,data:O}];return(0,I.BX)(V.Z,{loading:u,reloading:u,children:[(0,I.tZ)(Ze,{loading:u}),(0,I.tZ)(Oe,{children:(0,be.Z)({value:this.chartComponent({series:x}),fixed:(0,I.tZ)(y.Z,{height:"200px",testId:"skeleton-ui"})})})]})}var _={left:0,top:0,selected:(0,J.RI)(p),formatter:function(e){var t=(0,A.hW)(e);if(null!==t){var r=(0,A.b8)(t);null!==r&&(e=r.toUpperCase())}return e}},P=null!==(e=null===(t=c.queries[0])||void 0===t||null===(r=t.fields)||void 0===r?void 0:r[0])&&void 0!==e?e:"count()",R={grid:{left:0,right:0,top:"40px",bottom:0},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:he.CX},yAxis:{axisLabel:{color:s.chartLabel,formatter:function(e){return(0,he.gu)(e,P)}}}};return(0,I.tZ)(q.Z,{router:m,period:v,start:h,end:b,utc:g,children:function(e){if(l)return(0,I.tZ)(T.Z,{children:(0,I.tZ)(j.FC,{color:"gray500",size:"lg"})});var t=a?s.charts.getColorPalette(a.length-2):[],r=a?a.map((function(e,r){return ge(ge({},e),{},{color:t[r]})})):[];return(0,I.BX)(V.Z,{loading:u,reloading:u,children:[(0,I.tZ)(Ze,{loading:u}),(0,I.tZ)(Oe,{children:(0,be.Z)({value:n.chartComponent(ge(ge(ge({},e),R),{},{legend:_,series:r})),fixed:(0,I.tZ)(y.Z,{height:"200px",testId:"skeleton-ui"})})})]})}})}}]),u}(c.Component);ye.displayName="WidgetCardChart";var je=(0,u.Z)((function(e){return(0,I.tZ)(U.Z,ge(ge({},e),{},{maskBackgroundColor:"transparent"}))}),{target:"e1od7x483"})({name:"1vcob1d",styles:"display:flex;justify-content:center;align-items:center"}),Ze=function(e){var t=e.loading;return t?(0,I.tZ)(je,{visible:t,children:(0,I.tZ)(fe.Z,{mini:!0})}):null};Ze.displayName="LoadingScreen";var we=(0,u.Z)("div",{target:"e1od7x482"})("font-size:32px;padding:",(0,O.Z)(1)," ",(0,O.Z)(3)," ",(0,O.Z)(3)," ",(0,O.Z)(3),";*{text-align:left!important;}"),Oe=(0,u.Z)("div",{target:"e1od7x481"})("padding:0 ",(0,O.Z)(3)," ",(0,O.Z)(3),";"),xe=(0,u.Z)(X,{target:"e1od7x480"})("margin-top:",(0,O.Z)(1.5),";border-bottom-left-radius:",(function(e){return e.theme.borderRadius}),";border-bottom-right-radius:",(function(e){return e.theme.borderRadius}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";box-shadow:none;>div{padding:",(0,O.Z)(1)," ",(0,O.Z)(3),";}"),_e=(0,D.b)(ye),Pe=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),Re=(r("../node_modules/core-js/modules/es.array.sort.js"),r("../node_modules/core-js/modules/es.symbol.description.js"),r("./app/actionCreators/events.tsx")),Ce=r("./app/utils/dates.tsx"),ke=r("./app/utils/discover/genericDiscoverQuery.tsx"),De=["name"],Se=["name"];function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Te(e,t){return{seriesName:t,data:e.data.map((function(e){var t=(0,Q.Z)(e,2);return{name:1e3*t[0],value:t[1].reduce((function(e,t){return e+t.count}),0)}}))}}function Me(e,t){var r=[],n=e.name;if((0,J.Xe)(t)){var o=Object.keys(t).map((function(e){var r=n?"".concat(n," : ").concat(e):e,o=t[e];return[o.order||0,Te(o,r)]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}));r=r.concat(o)}else{var s=e.fields[0],i=n?"".concat(n," : ").concat(s):s,a=Te(t,i);r.push(a)}return r}var ze=function(e){(0,i.Z)(c,e);var t,r,u=(t=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(r){var o=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function c(){var e;(0,o.Z)(this,c);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=u.call.apply(u,[this].concat(r)),(0,n.Z)((0,K.Z)(e),"state",{loading:!0,queryFetchID:void 0,errorMessage:void 0,timeseriesResults:void 0,rawResults:void 0,tableResults:void 0}),e}return(0,s.Z)(c,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){var t,r=this.props,n=r.selection,o=r.widget,s=e.widget.queries.reduce((function(e,t){var r=(0,Q.Z)(e,2),n=r[0],o=r[1],s=t.name,i=(0,G.Z)(t,De);return n.push(s),o.push(i),[n,o]}),[[],[]]),i=(0,Q.Z)(s,2),a=i[0],l=i[1],u=o.queries.reduce((function(e,t){var r=(0,Q.Z)(e,2),n=r[0],o=r[1],s=t.name,i=(0,G.Z)(t,Se);return n.push(s),o.push(i),[n,o]}),[[],[]]),c=(0,Q.Z)(u,2),d=c[0],p=c[1];m()(o.displayType,e.widget.displayType)&&m()(o.interval,e.widget.interval)&&m()(p,l)&&m()(o.displayType,e.widget.displayType)&&(0,v.WO)(n,e.selection)?this.state.loading||m()(a,d)||(null===(t=this.state.rawResults)||void 0===t?void 0:t.length)!==o.queries.length||this.setState((function(e){var t=o.queries.reduce((function(t,r,n){return t.concat(Me(r,e.rawResults[n]))}),[]);return qe(qe({},e),{},{timeseriesResults:t})})):this.fetchData()}},{key:"fetchEventData",value:function(e){var t=this,r=this.props,n=r.selection,o=r.api,s=r.organization,i=r.widget,a=[];this.setState({tableResults:[]});var l=i.queries.map((function(e){var t=(0,k.t)(i.title,e,n),r="",a={per_page:5,noPagination:!0};if("table"===i.displayType)r="/organizations/".concat(s.slug,"/eventsv2/"),a.referrer="api.dashboards.tablewidget";else if("big_number"===i.displayType)r="/organizations/".concat(s.slug,"/eventsv2/"),a.per_page=1,a.referrer="api.dashboards.bignumberwidget";else{if("world_map"!==i.displayType)throw Error("Expected widget displayType to be either big_number, table or world_map");r="/organizations/".concat(s.slug,"/events-geo/"),delete a.per_page,a.referrer="api.dashboards.worldmapwidget"}return(0,ke.A)(o,r,qe(qe({},t.generateQueryStringObject()),a))})),u=0;l.forEach(function(){var r=(0,H.Z)($().mark((function r(n,o){var s,c,d,p,m,f,h,b;return $().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n;case 3:d=r.sent,p=(0,Q.Z)(d,1),m=p[0],(f=m).title=null!==(s=null===(c=i.queries[o])||void 0===c?void 0:c.name)&&void 0!==s?s:"",a=[].concat((0,Pe.Z)(a),[f]),t.setState((function(t){return t.queryFetchID!==e?t:qe(qe({},t),{},{tableResults:a})})),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(0),b=(null===r.t0||void 0===r.t0||null===(h=r.t0.responseJSON)||void 0===h?void 0:h.detail)||(0,Z.t)("An unknown error occurred."),t.setState({errorMessage:b});case 16:return r.prev=16,u++,t.setState((function(t){return t.queryFetchID!==e?t:qe(qe({},t),{},{loading:u!==l.length})})),r.finish(16);case 20:case"end":return r.stop()}}),r,null,[[0,12,16,20]])})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"fetchTimeseriesData",value:function(e){var t=this,r=this.props,n=r.selection,o=r.api,s=r.organization,i=r.widget;this.setState({timeseriesResults:[],rawResults:[]});var a=n.environments,l=n.projects,u=n.datetime,c=u.start,d=u.end,p=u.period,m=function(e,t){var r="bar"===e.displayType?"1d":e.interval;r||(r="5m");var n=(0,Ce.YJ)(r);return(0,J.Nm)(t)/n>4e3?(0,J.ZS)(t,!0):r}(i,{start:c,end:d,period:p}),f=i.queries.map((function(e){var t={organization:s,interval:m,start:c,end:d,project:l,environment:a,period:p,query:e.conditions,yAxis:e.fields,orderby:e.orderby,includePrevious:!1,referrer:"api.dashboards.timeserieswidget",partial:!0};return(0,Re.lI)(o,t)})),h=0;f.forEach(function(){var r=(0,H.Z)($().mark((function r(n,o){var s,a,l;return $().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n;case 3:s=r.sent,t.setState((function(t){var r,n;if(t.queryFetchID!==e)return t;var a=(null!==(r=t.timeseriesResults)&&void 0!==r?r:[]).concat(Me(i.queries[o],s));return qe(qe({},t),{},{timeseriesResults:a,rawResults:(null!==(n=t.rawResults)&&void 0!==n?n:[]).concat(s)})})),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),l=(null===r.t0||void 0===r.t0||null===(a=r.t0.responseJSON)||void 0===a?void 0:a.detail)||(0,Z.t)("An unknown error occurred."),t.setState({errorMessage:l});case 11:return r.prev=11,h++,t.setState((function(t){return t.queryFetchID!==e?t:qe(qe({},t),{},{loading:h!==f.length})})),r.finish(11);case 15:case"end":return r.stop()}}),r,null,[[0,7,11,15]])})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"fetchData",value:function(){var e=this.props.widget,t=Symbol("queryFetchID");this.setState({loading:!0,errorMessage:void 0,queryFetchID:t}),["table","world_map","big_number"].includes(e.displayType)?this.fetchEventData(t):this.fetchTimeseriesData(t)}},{key:"render",value:function(){var e=this.props.children,t=this.state;return e({loading:t.loading,timeseriesResults:t.timeseriesResults,tableResults:t.tableResults,errorMessage:t.errorMessage})}}]),c}(c.Component);ze.displayName="WidgetQueries";var Ne=ze;function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ie=function(e){(0,i.Z)(u,e);var t,r,n=(t=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(r){var o=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function u(){return(0,o.Z)(this,u),n.apply(this,arguments)}return(0,s.Z)(u,[{key:"shouldComponentUpdate",value:function(e){return!m()(e.widget,this.props.widget)||!(0,v.WO)(e.selection,this.props.selection)||this.props.isEditing!==e.isEditing||this.props.isSorting!==e.isSorting||this.props.hideToolbar!==e.hideToolbar}},{key:"renderToolbar",value:function(){var e=this.props,t=e.onEdit,r=e.onDelete,n=e.draggableProps,o=e.hideToolbar;return e.isEditing?(0,I.tZ)(Xe,{children:(0,I.BX)(Ve,{style:{visibility:o?"hidden":"visible"},children:[(0,I.tZ)(Ue,{children:(0,I.tZ)(Je,Be(Be({color:"textColor"},null==n?void 0:n.listeners),null==n?void 0:n.attributes))}),(0,I.tZ)(Ue,{"data-test-id":"widget-edit",onClick:function(){t()},children:(0,I.tZ)(j.yl,{color:"textColor"})}),(0,I.tZ)(Ue,{"data-test-id":"widget-delete",onClick:function(){r()},children:(0,I.tZ)(j.Fz,{color:"textColor"})})]})}):null}},{key:"renderContextMenu",value:function(){var e=this,t=this.props,r=t.widget,n=t.selection,o=t.organization;if(!t.showContextMenu)return null;var s=[];if("table"===r.displayType&&o.features.includes("discover-basic")&&r.queries.length){var i=r.queries[0],a=(0,k.t)(r.title,i,n);s.push((0,I.tZ)(b.Z,{onClick:function(t){t.preventDefault(),(0,x.ec)({eventKey:"dashboards2.tablewidget.open_in_discover",eventName:"Dashboards2: Table Widget - Open in Discover",organization_id:parseInt(e.props.organization.id,10)}),d.browserHistory.push(a.getResultsViewUrlTarget(o.slug))},children:(0,Z.t)("Open in Discover")},"open-discover"))}return s.length?(0,I.tZ)(He,{children:(0,I.tZ)(C.Z,{children:s})}):null}},{key:"render",value:function(){var e=this,t=this.props,r=t.widget,n=t.api,o=t.organization,s=t.selection,i=t.renderErrorMessage,a=t.location,l=t.router;return(0,I.tZ)(h.Z,{customComponent:(0,I.tZ)(Fe,{children:(0,Z.t)("Error loading widget data")}),children:(0,I.BX)(We,{isDragging:!1,children:[(0,I.BX)(Qe,{children:[(0,I.tZ)(Ge,{children:r.title}),this.renderContextMenu()]}),(0,I.tZ)(Ne,{api:n,organization:o,widget:r,selection:s,children:function(t){var n=t.tableResults,u=t.timeseriesResults,d=t.errorMessage,p=t.loading;return(0,I.BX)(c.Fragment,{children:["function"==typeof i?i(d):null,(0,I.tZ)(_e,{timeseriesResults:u,tableResults:n,errorMessage:d,loading:p,location:a,widget:r,selection:s,router:l,organization:o}),e.renderToolbar()]})}})]})})}}]),u}(c.Component);Ie.displayName="WidgetCard";var Le=(0,_.Z)((0,R.Z)((0,P.Z)(d.withRouter(Ie)))),Fe=(0,u.Z)(y.Z,{target:"emngp8q8"})("display:flex;align-items:center;justify-content:center;background-color:",(function(e){return e.theme.alert.error.backgroundLight}),";border:1px solid ",(function(e){return e.theme.alert.error.border}),";color:",(function(e){return e.theme.alert.error.textLight}),";border-radius:",(function(e){return e.theme.borderRadius}),";margin-bottom:",(0,O.Z)(2),";"),We=(0,u.Z)(g.s_,{shouldForwardProp:function(e){return"isDragging"!==e},target:"emngp8q7"})("margin:0;visibility:",(function(e){return e.isDragging?"hidden":"visible"}),";height:100%;min-height:96px;"),Xe=(0,u.Z)("div",{target:"emngp8q6"})("position:absolute;top:0;left:0;z-index:1;width:100%;height:100%;display:flex;justify-content:flex-end;align-items:flex-start;background-color:",(function(e){return e.theme.overlayBackgroundAlpha}),";border-radius:",(function(e){return e.theme.borderRadius}),";"),Ve=(0,u.Z)("div",{target:"emngp8q5"})("display:flex;margin:10px ",(0,O.Z)(2),";touch-action:none;"),Ue=(0,u.Z)("div",{target:"emngp8q4"})("padding:",(0,O.Z)(1),";&:hover{cursor:pointer;}"),Je=(0,u.Z)(j.LS,{target:"emngp8q3"})({name:"1fhyj3b",styles:"&:hover{cursor:grab;}"}),Ge=(0,u.Z)(f.Gh,{target:"emngp8q2"})(w.Z,";"),Qe=(0,u.Z)("div",{target:"emngp8q1"})("padding:",(0,O.Z)(2)," ",(0,O.Z)(3)," 0 ",(0,O.Z)(3),";width:100%;display:flex;justify-content:space-between;"),He=(0,u.Z)("div",{target:"emngp8q0"})("margin-left:",(0,O.Z)(1),";")}}]);
//# sourceMappingURL=../sourcemaps/app_actionCreators_dashboards_tsx-app_views_dashboardsV2_types_tsx-app_views_dashboardsV2_wid-b21a46.2cd369ad645082fbb39891f44730e766.js.map